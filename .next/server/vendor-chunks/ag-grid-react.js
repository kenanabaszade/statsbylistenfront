"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/ag-grid-react";
exports.ids = ["vendor-chunks/ag-grid-react"];
exports.modules = {

/***/ "(ssr)/./node_modules/ag-grid-react/dist/package/index.esm.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/ag-grid-react/dist/package/index.esm.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AgGridReact: () => (/* binding */ AgGridReact),\n/* harmony export */   CustomComponentContext: () => (/* binding */ CustomContext),\n/* harmony export */   getInstance: () => (/* binding */ getInstance),\n/* harmony export */   useGridCellEditor: () => (/* binding */ useGridCellEditor),\n/* harmony export */   useGridDate: () => (/* binding */ useGridDate),\n/* harmony export */   useGridFilter: () => (/* binding */ useGridFilter),\n/* harmony export */   useGridFloatingFilter: () => (/* binding */ useGridFloatingFilter),\n/* harmony export */   useGridMenuItem: () => (/* binding */ useGridMenuItem),\n/* harmony export */   warnReactiveCustomComponents: () => (/* binding */ warnReactiveCustomComponents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ag_grid_community__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ag-grid-community */ \"(ssr)/./node_modules/ag-grid-community/dist/package/main.esm.mjs\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n// packages/ag-grid-react/src/agGridReact.tsx\n\n\n// packages/ag-grid-react/src/reactUi/agGridReactUi.tsx\n\n\n\n// packages/ag-grid-react/src/reactUi/cellRenderer/groupCellRenderer.tsx\n\n\n\n// packages/ag-grid-react/src/reactUi/beansContext.tsx\n\nvar BeansContext = react__WEBPACK_IMPORTED_MODULE_0___default().createContext({});\n\n// packages/ag-grid-react/src/reactUi/jsComp.tsx\nvar showJsComp = (compDetails, context, eParent, ref) => {\n  const doNothing = !compDetails || compDetails.componentFromFramework || context.isDestroyed();\n  if (doNothing) {\n    return;\n  }\n  const promise = compDetails.newAgStackInstance();\n  if (promise == null) {\n    return;\n  }\n  let comp;\n  let compGui;\n  let destroyed = false;\n  promise.then((c) => {\n    if (destroyed) {\n      context.destroyBean(c);\n      return;\n    }\n    comp = c;\n    compGui = comp.getGui();\n    eParent.appendChild(compGui);\n    setRef(ref, comp);\n  });\n  return () => {\n    destroyed = true;\n    if (!comp) {\n      return;\n    }\n    compGui?.parentElement?.removeChild(compGui);\n    context.destroyBean(comp);\n    if (ref) {\n      setRef(ref, void 0);\n    }\n  };\n};\nvar setRef = (ref, value) => {\n  if (!ref) {\n    return;\n  }\n  if (ref instanceof Function) {\n    const refCallback = ref;\n    refCallback(value);\n  } else {\n    const refObj = ref;\n    refObj.current = value;\n  }\n};\n\n// packages/ag-grid-react/src/reactUi/utils.tsx\n\n\nvar classesList = (...list) => {\n  const filtered = list.filter((s) => s != null && s !== \"\");\n  return filtered.join(\" \");\n};\nvar CssClasses = class _CssClasses {\n  constructor(...initialClasses) {\n    this.classesMap = {};\n    initialClasses.forEach((className) => {\n      this.classesMap[className] = true;\n    });\n  }\n  setClass(className, on) {\n    const nothingHasChanged = !!this.classesMap[className] == on;\n    if (nothingHasChanged) {\n      return this;\n    }\n    const res = new _CssClasses();\n    res.classesMap = { ...this.classesMap };\n    res.classesMap[className] = on;\n    return res;\n  }\n  toString() {\n    const res = Object.keys(this.classesMap).filter((key) => this.classesMap[key]).join(\" \");\n    return res;\n  }\n};\nvar isComponentStateless = (Component2) => {\n  const hasSymbol = () => typeof Symbol === \"function\" && Symbol.for;\n  const getMemoType = () => hasSymbol() ? Symbol.for(\"react.memo\") : 60115;\n  return typeof Component2 === \"function\" && !(Component2.prototype && Component2.prototype.isReactComponent) || typeof Component2 === \"object\" && Component2.$$typeof === getMemoType();\n};\nvar reactVersion = react__WEBPACK_IMPORTED_MODULE_0___default().version?.split(\".\")[0];\nvar isReactVersion17Minus = reactVersion === \"16\" || reactVersion === \"17\";\nfunction isReact19() {\n  return reactVersion === \"19\";\n}\nvar disableFlushSync = false;\nfunction runWithoutFlushSync(func) {\n  if (!disableFlushSync) {\n    setTimeout(() => disableFlushSync = false, 0);\n  }\n  disableFlushSync = true;\n  return func();\n}\nvar agFlushSync = (useFlushSync, fn) => {\n  if (!isReactVersion17Minus && useFlushSync && !disableFlushSync) {\n    react_dom__WEBPACK_IMPORTED_MODULE_2___default().flushSync(fn);\n  } else {\n    fn();\n  }\n};\nfunction getNextValueIfDifferent(prev, next, maintainOrder) {\n  if (next == null || prev == null) {\n    return next;\n  }\n  if (prev === next || next.length === 0 && prev.length === 0) {\n    return prev;\n  }\n  if (maintainOrder || prev.length === 0 && next.length > 0 || prev.length > 0 && next.length === 0) {\n    return next;\n  }\n  const oldValues = [];\n  const newValues = [];\n  const prevMap = /* @__PURE__ */ new Map();\n  const nextMap = /* @__PURE__ */ new Map();\n  for (let i = 0; i < next.length; i++) {\n    const c = next[i];\n    nextMap.set(c.instanceId, c);\n  }\n  for (let i = 0; i < prev.length; i++) {\n    const c = prev[i];\n    prevMap.set(c.instanceId, c);\n    if (nextMap.has(c.instanceId)) {\n      oldValues.push(c);\n    }\n  }\n  for (let i = 0; i < next.length; i++) {\n    const c = next[i];\n    const instanceId = c.instanceId;\n    if (!prevMap.has(instanceId)) {\n      newValues.push(c);\n    }\n  }\n  if (oldValues.length === prev.length && newValues.length === 0) {\n    return prev;\n  }\n  if (oldValues.length === 0 && newValues.length === next.length) {\n    return next;\n  }\n  if (oldValues.length === 0) {\n    return newValues;\n  }\n  if (newValues.length === 0) {\n    return oldValues;\n  }\n  return [...oldValues, ...newValues];\n}\n\n// packages/ag-grid-react/src/reactUi/cellRenderer/groupCellRenderer.tsx\nvar GroupCellRenderer = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((props, ref) => {\n  const { ctrlsFactory, context } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const eGui = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eValueRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eCheckboxRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eExpandedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eContractedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const ctrlRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const [innerCompDetails, setInnerCompDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [childCount, setChildCount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [value, setValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [cssClasses, setCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new CssClasses());\n  const [expandedCssClasses, setExpandedCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new CssClasses(\"ag-hidden\"));\n  const [contractedCssClasses, setContractedCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new CssClasses(\"ag-hidden\"));\n  const [checkboxCssClasses, setCheckboxCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new CssClasses(\"ag-invisible\"));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref, () => {\n    return {\n      // force new instance when grid tries to refresh\n      refresh() {\n        return false;\n      }\n    };\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(() => {\n    return showJsComp(innerCompDetails, context, eValueRef.current);\n  }, [innerCompDetails]);\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eGui.current = eRef;\n    if (!eRef) {\n      ctrlRef.current = context.destroyBean(ctrlRef.current);\n      return;\n    }\n    const compProxy = {\n      setInnerRenderer: (details, valueToDisplay) => {\n        setInnerCompDetails(details);\n        setValue(valueToDisplay);\n      },\n      setChildCount: (count) => setChildCount(count),\n      addOrRemoveCssClass: (name, on) => setCssClasses((prev) => prev.setClass(name, on)),\n      setContractedDisplayed: (displayed) => setContractedCssClasses((prev) => prev.setClass(\"ag-hidden\", !displayed)),\n      setExpandedDisplayed: (displayed) => setExpandedCssClasses((prev) => prev.setClass(\"ag-hidden\", !displayed)),\n      setCheckboxVisible: (visible) => setCheckboxCssClasses((prev) => prev.setClass(\"ag-invisible\", !visible))\n    };\n    const groupCellRendererCtrl = ctrlsFactory.getInstance(\"groupCellRendererCtrl\");\n    if (groupCellRendererCtrl) {\n      ctrlRef.current = context.createBean(groupCellRendererCtrl);\n      ctrlRef.current.init(\n        compProxy,\n        eRef,\n        eCheckboxRef.current,\n        eExpandedRef.current,\n        eContractedRef.current,\n        GroupCellRenderer,\n        props\n      );\n    }\n  }, []);\n  const className = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => `ag-cell-wrapper ${cssClasses.toString()}`, [cssClasses]);\n  const expandedClassName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => `ag-group-expanded ${expandedCssClasses.toString()}`, [expandedCssClasses]);\n  const contractedClassName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => `ag-group-contracted ${contractedCssClasses.toString()}`,\n    [contractedCssClasses]\n  );\n  const checkboxClassName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => `ag-group-checkbox ${checkboxCssClasses.toString()}`, [checkboxCssClasses]);\n  const useFwRenderer = innerCompDetails && innerCompDetails.componentFromFramework;\n  const FwRenderer = useFwRenderer ? innerCompDetails.componentClass : void 0;\n  const useValue = innerCompDetails == null && value != null;\n  const escapedValue = (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._escapeString)(value, true);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    \"span\",\n    {\n      className,\n      ref: setRef2,\n      ...!props.colDef ? { role: ctrlRef.current?.getCellAriaRole() } : {}\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", { className: expandedClassName, ref: eExpandedRef }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", { className: contractedClassName, ref: eContractedRef }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", { className: checkboxClassName, ref: eCheckboxRef }),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", { className: \"ag-group-value\", ref: eValueRef }, useValue && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, escapedValue), useFwRenderer && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(FwRenderer, { ...innerCompDetails.params })),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", { className: \"ag-group-child-count\" }, childCount)\n  );\n});\nvar groupCellRenderer_default = GroupCellRenderer;\n\n// packages/ag-grid-react/src/shared/customComp/customComponentWrapper.ts\n\n\n// packages/ag-grid-react/src/reactUi/customComp/customWrapperComp.tsx\n\n\n// packages/ag-grid-react/src/shared/customComp/customContext.ts\n\nvar CustomContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({\n  setMethods: () => {\n  }\n});\n\n// packages/ag-grid-react/src/reactUi/customComp/customWrapperComp.tsx\nvar CustomWrapperComp = (params) => {\n  const { initialProps, addUpdateCallback, CustomComponentClass, setMethods } = params;\n  const [{ key, ...props }, setProps] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialProps);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    addUpdateCallback((newProps) => setProps(newProps));\n  }, []);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(CustomContext.Provider, { value: { setMethods } }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(CustomComponentClass, { key, ...props }));\n};\nvar customWrapperComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(CustomWrapperComp);\n\n// packages/ag-grid-react/src/shared/reactComponent.ts\n\n\n\n\n// packages/ag-grid-react/src/shared/keyGenerator.ts\nvar counter = 0;\nfunction generateNewKey() {\n  return `agPortalKey_${++counter}`;\n}\n\n// packages/ag-grid-react/src/shared/reactComponent.ts\nvar ReactComponent = class {\n  constructor(reactComponent, portalManager, componentType, suppressFallbackMethods) {\n    this.portal = null;\n    this.oldPortal = null;\n    this.reactComponent = reactComponent;\n    this.portalManager = portalManager;\n    this.componentType = componentType;\n    this.suppressFallbackMethods = !!suppressFallbackMethods;\n    this.statelessComponent = this.isStateless(this.reactComponent);\n    this.key = generateNewKey();\n    this.portalKey = generateNewKey();\n    this.instanceCreated = this.isStatelessComponent() ? ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.AgPromise.resolve(false) : new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.AgPromise((resolve) => {\n      this.resolveInstanceCreated = resolve;\n    });\n  }\n  getGui() {\n    return this.eParentElement;\n  }\n  /** `getGui()` returns the parent element. This returns the actual root element. */\n  getRootElement() {\n    const firstChild = this.eParentElement.firstChild;\n    return firstChild;\n  }\n  destroy() {\n    if (this.componentInstance && typeof this.componentInstance.destroy == \"function\") {\n      this.componentInstance.destroy();\n    }\n    const portal = this.portal;\n    if (portal) {\n      this.portalManager.destroyPortal(portal);\n    }\n  }\n  createParentElement(params) {\n    const componentWrappingElement = this.portalManager.getComponentWrappingElement();\n    const eParentElement = document.createElement(componentWrappingElement || \"div\");\n    eParentElement.classList.add(\"ag-react-container\");\n    params.reactContainer = eParentElement;\n    return eParentElement;\n  }\n  addParentContainerStyleAndClasses() {\n    if (!this.componentInstance) {\n      return;\n    }\n    if (this.componentInstance.getReactContainerStyle && this.componentInstance.getReactContainerStyle()) {\n      (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._warnOnce)(\n        'Since v31.1 \"getReactContainerStyle\" is deprecated. Apply styling directly to \".ag-react-container\" if needed.'\n      );\n      Object.assign(this.eParentElement.style, this.componentInstance.getReactContainerStyle());\n    }\n    if (this.componentInstance.getReactContainerClasses && this.componentInstance.getReactContainerClasses()) {\n      (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._warnOnce)(\n        'Since v31.1 \"getReactContainerClasses\" is deprecated. Apply styling directly to \".ag-react-container\" if needed.'\n      );\n      const parentContainerClasses = this.componentInstance.getReactContainerClasses();\n      parentContainerClasses.forEach((className) => this.eParentElement.classList.add(className));\n    }\n  }\n  statelessComponentRendered() {\n    return this.eParentElement.childElementCount > 0 || this.eParentElement.childNodes.length > 0;\n  }\n  getFrameworkComponentInstance() {\n    return this.componentInstance;\n  }\n  isStatelessComponent() {\n    return this.statelessComponent;\n  }\n  getReactComponentName() {\n    return this.reactComponent.name;\n  }\n  getMemoType() {\n    return this.hasSymbol() ? Symbol.for(\"react.memo\") : 60115;\n  }\n  hasSymbol() {\n    return typeof Symbol === \"function\" && Symbol.for;\n  }\n  isStateless(Component2) {\n    return typeof Component2 === \"function\" && !(Component2.prototype && Component2.prototype.isReactComponent) || typeof Component2 === \"object\" && Component2.$$typeof === this.getMemoType();\n  }\n  hasMethod(name) {\n    const frameworkComponentInstance = this.getFrameworkComponentInstance();\n    return !!frameworkComponentInstance && frameworkComponentInstance[name] != null || this.fallbackMethodAvailable(name);\n  }\n  callMethod(name, args) {\n    const frameworkComponentInstance = this.getFrameworkComponentInstance();\n    if (this.isStatelessComponent()) {\n      return this.fallbackMethod(name, !!args && args[0] ? args[0] : {});\n    } else if (!frameworkComponentInstance) {\n      setTimeout(() => this.callMethod(name, args));\n      return;\n    }\n    const method = frameworkComponentInstance[name];\n    if (method) {\n      return method.apply(frameworkComponentInstance, args);\n    }\n    if (this.fallbackMethodAvailable(name)) {\n      return this.fallbackMethod(name, !!args && args[0] ? args[0] : {});\n    }\n  }\n  addMethod(name, callback) {\n    this[name] = callback;\n  }\n  init(params) {\n    this.eParentElement = this.createParentElement(params);\n    this.createOrUpdatePortal(params);\n    return new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.AgPromise((resolve) => this.createReactComponent(resolve));\n  }\n  createOrUpdatePortal(params) {\n    if (!this.isStatelessComponent()) {\n      this.ref = (element) => {\n        this.componentInstance = element;\n        this.addParentContainerStyleAndClasses();\n        this.resolveInstanceCreated?.(true);\n        this.resolveInstanceCreated = void 0;\n      };\n      params.ref = this.ref;\n    }\n    this.reactElement = this.createElement(this.reactComponent, { ...params, key: this.key });\n    this.portal = (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(\n      this.reactElement,\n      this.eParentElement,\n      this.portalKey\n      // fixed deltaRowModeRefreshCompRenderer\n    );\n  }\n  createElement(reactComponent, props) {\n    return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(reactComponent, props);\n  }\n  createReactComponent(resolve) {\n    this.portalManager.mountReactPortal(this.portal, this, resolve);\n  }\n  rendered() {\n    return this.isStatelessComponent() && this.statelessComponentRendered() || !!(!this.isStatelessComponent() && this.getFrameworkComponentInstance());\n  }\n  /*\n   * fallback methods - these will be invoked if a corresponding instance method is not present\n   * for example if refresh is called and is not available on the component instance, then refreshComponent on this\n   * class will be invoked instead\n   *\n   * Currently only refresh is supported\n   */\n  refreshComponent(args) {\n    this.oldPortal = this.portal;\n    this.createOrUpdatePortal(args);\n    this.portalManager.updateReactPortal(this.oldPortal, this.portal);\n  }\n  fallbackMethod(name, params) {\n    const method = this[`${name}Component`];\n    if (!this.suppressFallbackMethods && !!method) {\n      return method.bind(this)(params);\n    }\n  }\n  fallbackMethodAvailable(name) {\n    if (this.suppressFallbackMethods) {\n      return false;\n    }\n    const method = this[`${name}Component`];\n    return !!method;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/customComponentWrapper.ts\nfunction addOptionalMethods(optionalMethodNames, providedMethods, component) {\n  optionalMethodNames.forEach((methodName) => {\n    const providedMethod = providedMethods[methodName];\n    if (providedMethod) {\n      component[methodName] = providedMethod;\n    }\n  });\n}\nvar CustomComponentWrapper = class extends ReactComponent {\n  constructor() {\n    super(...arguments);\n    this.awaitUpdateCallback = new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.AgPromise((resolve) => {\n      this.resolveUpdateCallback = resolve;\n    });\n    this.wrapperComponent = customWrapperComp_default;\n  }\n  init(params) {\n    this.sourceParams = params;\n    return super.init(this.getProps());\n  }\n  addMethod() {\n  }\n  getInstance() {\n    return this.instanceCreated.then(() => this.componentInstance);\n  }\n  getFrameworkComponentInstance() {\n    return this;\n  }\n  createElement(reactComponent, props) {\n    return super.createElement(this.wrapperComponent, {\n      initialProps: props,\n      CustomComponentClass: reactComponent,\n      setMethods: (methods) => this.setMethods(methods),\n      addUpdateCallback: (callback) => {\n        this.updateCallback = () => {\n          callback(this.getProps());\n          return new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.AgPromise((resolve) => {\n            setTimeout(() => {\n              resolve();\n            });\n          });\n        };\n        this.resolveUpdateCallback();\n      }\n    });\n  }\n  setMethods(methods) {\n    this.providedMethods = methods;\n    addOptionalMethods(this.getOptionalMethods(), this.providedMethods, this);\n  }\n  getOptionalMethods() {\n    return [];\n  }\n  getProps() {\n    return {\n      ...this.sourceParams,\n      key: this.key,\n      ref: this.ref\n    };\n  }\n  refreshProps() {\n    if (this.updateCallback) {\n      return this.updateCallback();\n    }\n    return new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.AgPromise(\n      (resolve) => this.awaitUpdateCallback.then(() => {\n        this.updateCallback().then(() => resolve());\n      })\n    );\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/cellRendererComponentWrapper.ts\nvar CellRendererComponentWrapper = class extends CustomComponentWrapper {\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n    return true;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/dateComponentWrapper.ts\nvar DateComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.date = null;\n    this.onDateChange = (date) => this.updateDate(date);\n  }\n  getDate() {\n    return this.date;\n  }\n  setDate(date) {\n    this.date = date;\n    this.refreshProps();\n  }\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n  }\n  getOptionalMethods() {\n    return [\"afterGuiAttached\", \"setInputPlaceholder\", \"setInputAriaLabel\", \"setDisabled\"];\n  }\n  updateDate(date) {\n    this.setDate(date);\n    this.sourceParams.onDateChanged();\n  }\n  getProps() {\n    const props = super.getProps();\n    props.date = this.date;\n    props.onDateChange = this.onDateChange;\n    delete props.onDateChanged;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/dragAndDropImageComponentWrapper.ts\nvar DragAndDropImageComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.label = \"\";\n    this.icon = null;\n    this.shake = false;\n  }\n  setIcon(iconName, shake) {\n    this.icon = iconName;\n    this.shake = shake;\n    this.refreshProps();\n  }\n  setLabel(label) {\n    this.label = label;\n    this.refreshProps();\n  }\n  getProps() {\n    const props = super.getProps();\n    const { label, icon, shake } = this;\n    props.label = label;\n    props.icon = icon;\n    props.shake = shake;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/filterComponentWrapper.ts\nvar FilterComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.model = null;\n    this.onModelChange = (model) => this.updateModel(model);\n    this.onUiChange = () => this.sourceParams.filterChangedCallback();\n    this.expectingNewMethods = true;\n    this.hasBeenActive = false;\n  }\n  isFilterActive() {\n    return this.model != null;\n  }\n  doesFilterPass(params) {\n    return this.providedMethods.doesFilterPass(params);\n  }\n  getModel() {\n    return this.model;\n  }\n  setModel(model) {\n    this.expectingNewMethods = true;\n    this.model = model;\n    this.hasBeenActive || (this.hasBeenActive = this.isFilterActive());\n    return this.refreshProps();\n  }\n  refresh(newParams) {\n    this.sourceParams = newParams;\n    this.refreshProps();\n    return true;\n  }\n  getOptionalMethods() {\n    return [\"afterGuiAttached\", \"afterGuiDetached\", \"onNewRowsLoaded\", \"getModelAsString\", \"onAnyFilterChanged\"];\n  }\n  setMethods(methods) {\n    if (this.expectingNewMethods === false && this.hasBeenActive && this.providedMethods?.doesFilterPass !== methods?.doesFilterPass) {\n      setTimeout(() => {\n        this.sourceParams.filterChangedCallback();\n      });\n    }\n    this.expectingNewMethods = false;\n    super.setMethods(methods);\n  }\n  updateModel(model) {\n    this.setModel(model).then(() => this.sourceParams.filterChangedCallback());\n  }\n  getProps() {\n    const props = super.getProps();\n    props.model = this.model;\n    props.onModelChange = this.onModelChange;\n    props.onUiChange = this.onUiChange;\n    delete props.filterChangedCallback;\n    delete props.filterModifiedCallback;\n    delete props.valueGetter;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/floatingFilterComponentProxy.ts\n\nfunction updateFloatingFilterParent(params, model) {\n  params.parentFilterInstance((instance) => {\n    (instance.setModel(model) || ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.AgPromise.resolve()).then(() => {\n      params.filterParams.filterChangedCallback();\n    });\n  });\n}\nvar FloatingFilterComponentProxy = class {\n  constructor(floatingFilterParams, refreshProps) {\n    this.floatingFilterParams = floatingFilterParams;\n    this.refreshProps = refreshProps;\n    this.model = null;\n    this.onModelChange = (model) => this.updateModel(model);\n  }\n  getProps() {\n    return {\n      ...this.floatingFilterParams,\n      model: this.model,\n      onModelChange: this.onModelChange\n    };\n  }\n  onParentModelChanged(parentModel) {\n    this.model = parentModel;\n    this.refreshProps();\n  }\n  refresh(params) {\n    this.floatingFilterParams = params;\n    this.refreshProps();\n  }\n  setMethods(methods) {\n    addOptionalMethods(this.getOptionalMethods(), methods, this);\n  }\n  getOptionalMethods() {\n    return [\"afterGuiAttached\"];\n  }\n  updateModel(model) {\n    this.model = model;\n    this.refreshProps();\n    updateFloatingFilterParent(this.floatingFilterParams, model);\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/floatingFilterComponentWrapper.ts\nvar FloatingFilterComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.model = null;\n    this.onModelChange = (model) => this.updateModel(model);\n  }\n  onParentModelChanged(parentModel) {\n    this.model = parentModel;\n    this.refreshProps();\n  }\n  refresh(newParams) {\n    this.sourceParams = newParams;\n    this.refreshProps();\n  }\n  getOptionalMethods() {\n    return [\"afterGuiAttached\"];\n  }\n  updateModel(model) {\n    this.model = model;\n    this.refreshProps();\n    updateFloatingFilterParent(this.sourceParams, model);\n  }\n  getProps() {\n    const props = super.getProps();\n    props.model = this.model;\n    props.onModelChange = this.onModelChange;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/loadingOverlayComponentWrapper.ts\nvar LoadingOverlayComponentWrapper = class extends CustomComponentWrapper {\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/menuItemComponentWrapper.ts\nvar MenuItemComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.active = false;\n    this.expanded = false;\n    this.onActiveChange = (active) => this.updateActive(active);\n  }\n  setActive(active) {\n    this.awaitSetActive(active);\n  }\n  setExpanded(expanded) {\n    this.expanded = expanded;\n    this.refreshProps();\n  }\n  getOptionalMethods() {\n    return [\"select\", \"configureDefaults\"];\n  }\n  awaitSetActive(active) {\n    this.active = active;\n    return this.refreshProps();\n  }\n  updateActive(active) {\n    const result = this.awaitSetActive(active);\n    if (active) {\n      result.then(() => this.sourceParams.onItemActivated());\n    }\n  }\n  getProps() {\n    const props = super.getProps();\n    props.active = this.active;\n    props.expanded = this.expanded;\n    props.onActiveChange = this.onActiveChange;\n    delete props.onItemActivated;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/noRowsOverlayComponentWrapper.ts\nvar NoRowsOverlayComponentWrapper = class extends CustomComponentWrapper {\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/statusPanelComponentWrapper.ts\nvar StatusPanelComponentWrapper = class extends CustomComponentWrapper {\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n    return true;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/toolPanelComponentWrapper.ts\nvar ToolPanelComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.onStateChange = (state) => this.updateState(state);\n  }\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n    return true;\n  }\n  getState() {\n    return this.state;\n  }\n  updateState(state) {\n    this.state = state;\n    this.refreshProps();\n    this.sourceParams.onStateUpdated();\n  }\n  getProps() {\n    const props = super.getProps();\n    props.state = this.state;\n    props.onStateChange = this.onStateChange;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/util.ts\n\nfunction getInstance(wrapperComponent, callback) {\n  const promise = wrapperComponent?.getInstance?.() ?? ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.AgPromise.resolve(void 0);\n  promise.then((comp) => callback(comp));\n}\nfunction warnReactiveCustomComponents() {\n  (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._warnOnce)(\"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.\");\n}\n\n// packages/ag-grid-react/src/shared/portalManager.ts\nvar MAX_COMPONENT_CREATION_TIME_IN_MS = 1e3;\nvar PortalManager = class {\n  constructor(refresher, wrappingElement, maxComponentCreationTimeMs) {\n    this.destroyed = false;\n    this.portals = [];\n    this.hasPendingPortalUpdate = false;\n    this.wrappingElement = wrappingElement ? wrappingElement : \"div\";\n    this.refresher = refresher;\n    this.maxComponentCreationTimeMs = maxComponentCreationTimeMs ? maxComponentCreationTimeMs : MAX_COMPONENT_CREATION_TIME_IN_MS;\n  }\n  getPortals() {\n    return this.portals;\n  }\n  destroy() {\n    this.destroyed = true;\n  }\n  destroyPortal(portal) {\n    this.portals = this.portals.filter((curPortal) => curPortal !== portal);\n    this.batchUpdate();\n  }\n  getComponentWrappingElement() {\n    return this.wrappingElement;\n  }\n  mountReactPortal(portal, reactComponent, resolve) {\n    this.portals = [...this.portals, portal];\n    this.waitForInstance(reactComponent, resolve);\n    this.batchUpdate();\n  }\n  updateReactPortal(oldPortal, newPortal) {\n    this.portals[this.portals.indexOf(oldPortal)] = newPortal;\n    this.batchUpdate();\n  }\n  batchUpdate() {\n    if (this.hasPendingPortalUpdate) {\n      return;\n    }\n    setTimeout(() => {\n      if (!this.destroyed) {\n        this.refresher();\n        this.hasPendingPortalUpdate = false;\n      }\n    });\n    this.hasPendingPortalUpdate = true;\n  }\n  waitForInstance(reactComponent, resolve, startTime = Date.now()) {\n    if (this.destroyed) {\n      resolve(null);\n      return;\n    }\n    if (reactComponent.rendered()) {\n      resolve(reactComponent);\n    } else {\n      if (Date.now() - startTime >= this.maxComponentCreationTimeMs && !this.hasPendingPortalUpdate) {\n        return;\n      }\n      window.setTimeout(() => {\n        this.waitForInstance(reactComponent, resolve, startTime);\n      });\n    }\n  }\n};\n\n// packages/ag-grid-react/src/reactUi/gridComp.tsx\n\n\n\n// packages/ag-grid-react/src/reactUi/gridBodyComp.tsx\n\n\n\n// packages/ag-grid-react/src/reactUi/header/gridHeaderComp.tsx\n\n\n\n// packages/ag-grid-react/src/reactUi/header/headerRowContainerComp.tsx\n\n\n\n// packages/ag-grid-react/src/reactUi/header/headerRowComp.tsx\n\n\n\n// packages/ag-grid-react/src/reactUi/header/headerCellComp.tsx\n\n\nvar HeaderCellComp = ({ ctrl }) => {\n  const isAlive = ctrl.isAlive();\n  const { context } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const colId = isAlive ? ctrl.getColId() : void 0;\n  const [userCompDetails, setUserCompDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const compBean = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const eGui = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eResize = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eHeaderCompWrapper = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const userCompRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const cssClassManager = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  if (isAlive && !cssClassManager.current) {\n    cssClassManager.current = new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.CssClassManager(() => eGui.current);\n  }\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eGui.current = eRef;\n    compBean.current = eRef ? context.createBean(new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._EmptyBean()) : context.destroyBean(compBean.current);\n    if (!eRef || !isAlive) {\n      return;\n    }\n    const compProxy = {\n      setWidth: (width) => {\n        if (eGui.current) {\n          eGui.current.style.width = width;\n        }\n      },\n      addOrRemoveCssClass: (name, on) => cssClassManager.current.addOrRemoveCssClass(name, on),\n      setAriaSort: (sort) => {\n        if (eGui.current) {\n          sort ? (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._setAriaSort)(eGui.current, sort) : (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._removeAriaSort)(eGui.current);\n        }\n      },\n      setUserCompDetails: (compDetails) => setUserCompDetails(compDetails),\n      getUserCompInstance: () => userCompRef.current || void 0\n    };\n    ctrl.setComp(compProxy, eRef, eResize.current, eHeaderCompWrapper.current, compBean.current);\n    const selectAllGui = ctrl.getSelectAllGui();\n    eResize.current?.insertAdjacentElement(\"afterend\", selectAllGui);\n    compBean.current.addDestroyFunc(() => selectAllGui.remove());\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(\n    () => showJsComp(userCompDetails, context, eHeaderCompWrapper.current, userCompRef),\n    [userCompDetails]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    ctrl.setDragSource(eGui.current);\n  }, [userCompDetails]);\n  const userCompStateless = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const res = userCompDetails?.componentFromFramework && isComponentStateless(userCompDetails.componentClass);\n    return !!res;\n  }, [userCompDetails]);\n  const reactUserComp = userCompDetails && userCompDetails.componentFromFramework;\n  const UserCompClass = userCompDetails && userCompDetails.componentClass;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: setRef2, className: \"ag-header-cell\", \"col-id\": colId, role: \"columnheader\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: eResize, className: \"ag-header-cell-resize\", role: \"presentation\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: eHeaderCompWrapper, className: \"ag-header-cell-comp-wrapper\", role: \"presentation\" }, reactUserComp && userCompStateless && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(UserCompClass, { ...userCompDetails.params }), reactUserComp && !userCompStateless && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(UserCompClass, { ...userCompDetails.params, ref: userCompRef })));\n};\nvar headerCellComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(HeaderCellComp);\n\n// packages/ag-grid-react/src/reactUi/header/headerFilterCellComp.tsx\n\n\nvar HeaderFilterCellComp = ({ ctrl }) => {\n  const { context, gos } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const [cssClasses, setCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    () => new CssClasses(\"ag-header-cell\", \"ag-floating-filter\")\n  );\n  const [cssBodyClasses, setBodyCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new CssClasses());\n  const [cssButtonWrapperClasses, setButtonWrapperCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    () => new CssClasses(\"ag-floating-filter-button\", \"ag-hidden\")\n  );\n  const [buttonWrapperAriaHidden, setButtonWrapperAriaHidden] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"false\");\n  const [userCompDetails, setUserCompDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [, setRenderKey] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1);\n  const compBean = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const eGui = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eFloatingFilterBody = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eButtonWrapper = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eButtonShowMainFilter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const userCompResolve = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const userCompPromise = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const userCompRef = (value) => {\n    if (value == null) {\n      return;\n    }\n    userCompResolve.current && userCompResolve.current(value);\n  };\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eGui.current = eRef;\n    compBean.current = eRef ? context.createBean(new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._EmptyBean()) : context.destroyBean(compBean.current);\n    if (!eRef) {\n      return;\n    }\n    userCompPromise.current = new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.AgPromise((resolve) => {\n      userCompResolve.current = resolve;\n    });\n    const compProxy = {\n      addOrRemoveCssClass: (name, on) => setCssClasses((prev) => prev.setClass(name, on)),\n      addOrRemoveBodyCssClass: (name, on) => setBodyCssClasses((prev) => prev.setClass(name, on)),\n      setButtonWrapperDisplayed: (displayed) => {\n        setButtonWrapperCssClasses((prev) => prev.setClass(\"ag-hidden\", !displayed));\n        setButtonWrapperAriaHidden(!displayed ? \"true\" : \"false\");\n      },\n      setWidth: (width) => {\n        if (eGui.current) {\n          eGui.current.style.width = width;\n        }\n      },\n      setCompDetails: (compDetails) => setUserCompDetails(compDetails),\n      getFloatingFilterComp: () => userCompPromise.current ? userCompPromise.current : null,\n      setMenuIcon: (eIcon) => eButtonShowMainFilter.current?.appendChild(eIcon)\n    };\n    ctrl.setComp(compProxy, eRef, eButtonShowMainFilter.current, eFloatingFilterBody.current, compBean.current);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(\n    () => showJsComp(userCompDetails, context, eFloatingFilterBody.current, userCompRef),\n    [userCompDetails]\n  );\n  const className = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => cssClasses.toString(), [cssClasses]);\n  const bodyClassName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => cssBodyClasses.toString(), [cssBodyClasses]);\n  const buttonWrapperClassName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => cssButtonWrapperClasses.toString(), [cssButtonWrapperClasses]);\n  const userCompStateless = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const res = userCompDetails && userCompDetails.componentFromFramework && isComponentStateless(userCompDetails.componentClass);\n    return !!res;\n  }, [userCompDetails]);\n  const reactiveCustomComponents = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => gos.get(\"reactiveCustomComponents\"), []);\n  const floatingFilterCompProxy = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (userCompDetails) {\n      if (reactiveCustomComponents) {\n        const compProxy = new FloatingFilterComponentProxy(\n          userCompDetails.params,\n          () => setRenderKey((prev) => prev + 1)\n        );\n        userCompRef(compProxy);\n        return compProxy;\n      } else if (userCompDetails.componentFromFramework) {\n        warnReactiveCustomComponents();\n      }\n    }\n    return void 0;\n  }, [userCompDetails]);\n  const floatingFilterProps = floatingFilterCompProxy?.getProps();\n  const reactUserComp = userCompDetails && userCompDetails.componentFromFramework;\n  const UserCompClass = userCompDetails && userCompDetails.componentClass;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: setRef2, className, role: \"gridcell\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: eFloatingFilterBody, className: bodyClassName, role: \"presentation\" }, reactUserComp && !reactiveCustomComponents && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(UserCompClass, { ...userCompDetails.params, ref: userCompStateless ? () => {\n  } : userCompRef }), reactUserComp && reactiveCustomComponents && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    CustomContext.Provider,\n    {\n      value: {\n        setMethods: (methods) => floatingFilterCompProxy.setMethods(methods)\n      }\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(UserCompClass, { ...floatingFilterProps })\n  )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    \"div\",\n    {\n      ref: eButtonWrapper,\n      \"aria-hidden\": buttonWrapperAriaHidden,\n      className: buttonWrapperClassName,\n      role: \"presentation\"\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      \"button\",\n      {\n        ref: eButtonShowMainFilter,\n        type: \"button\",\n        className: \"ag-button ag-floating-filter-button-button\",\n        tabIndex: -1\n      }\n    )\n  ));\n};\nvar headerFilterCellComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(HeaderFilterCellComp);\n\n// packages/ag-grid-react/src/reactUi/header/headerGroupCellComp.tsx\n\n\nvar HeaderGroupCellComp = ({ ctrl }) => {\n  const { context } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const [cssClasses, setCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new CssClasses());\n  const [cssResizableClasses, setResizableCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new CssClasses());\n  const [resizableAriaHidden, setResizableAriaHidden] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"false\");\n  const [ariaExpanded, setAriaExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [userCompDetails, setUserCompDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const colId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ctrl.getColId(), []);\n  const compBean = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const eGui = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eResize = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eHeaderCompWrapper = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const userCompRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eGui.current = eRef;\n    compBean.current = eRef ? context.createBean(new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._EmptyBean()) : context.destroyBean(compBean.current);\n    if (!eRef) {\n      return;\n    }\n    const compProxy = {\n      setWidth: (width) => {\n        if (eGui.current) {\n          eGui.current.style.width = width;\n        }\n      },\n      addOrRemoveCssClass: (name, on) => setCssClasses((prev) => prev.setClass(name, on)),\n      setHeaderWrapperHidden: (hidden) => {\n        const headerCompWrapper = eHeaderCompWrapper.current;\n        if (!headerCompWrapper) {\n          return;\n        }\n        if (hidden) {\n          headerCompWrapper.style.setProperty(\"display\", \"none\");\n        } else {\n          headerCompWrapper.style.removeProperty(\"display\");\n        }\n      },\n      setHeaderWrapperMaxHeight: (value) => {\n        const headerCompWrapper = eHeaderCompWrapper.current;\n        if (!headerCompWrapper) {\n          return;\n        }\n        if (value != null) {\n          headerCompWrapper.style.setProperty(\"max-height\", `${value}px`);\n        } else {\n          headerCompWrapper.style.removeProperty(\"max-height\");\n        }\n        headerCompWrapper.classList.toggle(\"ag-header-cell-comp-wrapper-limited-height\", value != null);\n      },\n      setUserCompDetails: (compDetails) => setUserCompDetails(compDetails),\n      setResizableDisplayed: (displayed) => {\n        setResizableCssClasses((prev) => prev.setClass(\"ag-hidden\", !displayed));\n        setResizableAriaHidden(!displayed ? \"true\" : \"false\");\n      },\n      setAriaExpanded: (expanded) => setAriaExpanded(expanded),\n      getUserCompInstance: () => userCompRef.current || void 0\n    };\n    ctrl.setComp(compProxy, eRef, eResize.current, eHeaderCompWrapper.current, compBean.current);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(() => showJsComp(userCompDetails, context, eHeaderCompWrapper.current), [userCompDetails]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (eGui.current) {\n      ctrl.setDragSource(eGui.current);\n    }\n  }, [userCompDetails]);\n  const userCompStateless = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const res = userCompDetails?.componentFromFramework && isComponentStateless(userCompDetails.componentClass);\n    return !!res;\n  }, [userCompDetails]);\n  const className = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => \"ag-header-group-cell \" + cssClasses.toString(), [cssClasses]);\n  const resizableClassName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => \"ag-header-cell-resize \" + cssResizableClasses.toString(),\n    [cssResizableClasses]\n  );\n  const reactUserComp = userCompDetails && userCompDetails.componentFromFramework;\n  const UserCompClass = userCompDetails && userCompDetails.componentClass;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: setRef2, className, \"col-id\": colId, role: \"columnheader\", \"aria-expanded\": ariaExpanded }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: eHeaderCompWrapper, className: \"ag-header-cell-comp-wrapper\", role: \"presentation\" }, reactUserComp && userCompStateless && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(UserCompClass, { ...userCompDetails.params }), reactUserComp && !userCompStateless && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(UserCompClass, { ...userCompDetails.params, ref: userCompRef })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: eResize, \"aria-hidden\": resizableAriaHidden, className: resizableClassName }));\n};\nvar headerGroupCellComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(HeaderGroupCellComp);\n\n// packages/ag-grid-react/src/reactUi/header/headerRowComp.tsx\nvar HeaderRowComp = ({ ctrl }) => {\n  const { context } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const { topOffset, rowHeight } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ctrl.getTopAndHeight(), []);\n  const ariaRowIndex = ctrl.getAriaRowIndex();\n  const className = ctrl.getHeaderRowClass();\n  const [height, setHeight] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => rowHeight + \"px\");\n  const [top, setTop] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => topOffset + \"px\");\n  const cellCtrlsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const prevCellCtrlsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const [cellCtrls, setCellCtrls] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => ctrl.getHeaderCtrls());\n  const compBean = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const eGui = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eGui.current = eRef;\n    compBean.current = eRef ? context.createBean(new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._EmptyBean()) : context.destroyBean(compBean.current);\n    if (!eRef) {\n      return;\n    }\n    const compProxy = {\n      setHeight: (height2) => setHeight(height2),\n      setTop: (top2) => setTop(top2),\n      setHeaderCtrls: (ctrls, forceOrder, afterScroll) => {\n        prevCellCtrlsRef.current = cellCtrlsRef.current;\n        cellCtrlsRef.current = ctrls;\n        const next = getNextValueIfDifferent(prevCellCtrlsRef.current, ctrls, forceOrder);\n        if (next !== prevCellCtrlsRef.current) {\n          agFlushSync(afterScroll, () => setCellCtrls(next));\n        }\n      },\n      setWidth: (width) => {\n        if (eGui.current) {\n          eGui.current.style.width = width;\n        }\n      }\n    };\n    ctrl.setComp(compProxy, compBean.current, false);\n  }, []);\n  const style = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => ({\n      height,\n      top\n    }),\n    [height, top]\n  );\n  const createCellJsx = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((cellCtrl) => {\n    switch (ctrl.getType()) {\n      case ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.HeaderRowType.COLUMN_GROUP:\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(headerGroupCellComp_default, { ctrl: cellCtrl, key: cellCtrl.instanceId });\n      case ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.HeaderRowType.FLOATING_FILTER:\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(headerFilterCellComp_default, { ctrl: cellCtrl, key: cellCtrl.instanceId });\n      default:\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(headerCellComp_default, { ctrl: cellCtrl, key: cellCtrl.instanceId });\n    }\n  }, []);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: setRef2, className, role: \"row\", style, \"aria-rowindex\": ariaRowIndex }, cellCtrls.map(createCellJsx));\n};\nvar headerRowComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(HeaderRowComp);\n\n// packages/ag-grid-react/src/reactUi/header/headerRowContainerComp.tsx\nvar HeaderRowContainerComp = ({ pinned }) => {\n  const [displayed, setDisplayed] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [headerRowCtrls, setHeaderRowCtrls] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const { context } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const eGui = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eCenterContainer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const headerRowCtrlRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const pinnedLeft = pinned === \"left\";\n  const pinnedRight = pinned === \"right\";\n  const centre = !pinnedLeft && !pinnedRight;\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eGui.current = eRef;\n    headerRowCtrlRef.current = eRef ? context.createBean(new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.HeaderRowContainerCtrl(pinned)) : context.destroyBean(headerRowCtrlRef.current);\n    if (!eRef) {\n      return;\n    }\n    const compProxy = {\n      setDisplayed,\n      setCtrls: (ctrls) => setHeaderRowCtrls(ctrls),\n      // centre only\n      setCenterWidth: (width) => {\n        if (eCenterContainer.current) {\n          eCenterContainer.current.style.width = width;\n        }\n      },\n      setViewportScrollLeft: (left) => {\n        if (eGui.current) {\n          eGui.current.scrollLeft = left;\n        }\n      },\n      // pinned only\n      setPinnedContainerWidth: (width) => {\n        if (eGui.current) {\n          eGui.current.style.width = width;\n          eGui.current.style.minWidth = width;\n          eGui.current.style.maxWidth = width;\n        }\n      }\n    };\n    headerRowCtrlRef.current.setComp(compProxy, eGui.current);\n  }, []);\n  const className = !displayed ? \"ag-hidden\" : \"\";\n  const insertRowsJsx = () => headerRowCtrls.map((ctrl) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(headerRowComp_default, { ctrl, key: ctrl.instanceId }));\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, pinnedLeft && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    \"div\",\n    {\n      ref: setRef2,\n      className: \"ag-pinned-left-header \" + className,\n      \"aria-hidden\": !displayed,\n      role: \"rowgroup\"\n    },\n    insertRowsJsx()\n  ), pinnedRight && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    \"div\",\n    {\n      ref: setRef2,\n      className: \"ag-pinned-right-header \" + className,\n      \"aria-hidden\": !displayed,\n      role: \"rowgroup\"\n    },\n    insertRowsJsx()\n  ), centre && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: setRef2, className: \"ag-header-viewport \" + className, role: \"presentation\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: eCenterContainer, className: \"ag-header-container\", role: \"rowgroup\" }, insertRowsJsx())));\n};\nvar headerRowContainerComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(HeaderRowContainerComp);\n\n// packages/ag-grid-react/src/reactUi/header/gridHeaderComp.tsx\nvar GridHeaderComp = () => {\n  const [cssClasses, setCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new CssClasses());\n  const [height, setHeight] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const { context } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const eGui = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const gridCtrlRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eGui.current = eRef;\n    gridCtrlRef.current = eRef ? context.createBean(new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.GridHeaderCtrl()) : context.destroyBean(gridCtrlRef.current);\n    if (!eRef)\n      return;\n    const compProxy = {\n      addOrRemoveCssClass: (name, on) => setCssClasses((prev) => prev.setClass(name, on)),\n      setHeightAndMinHeight: (height2) => setHeight(height2)\n    };\n    gridCtrlRef.current.setComp(compProxy, eRef, eRef);\n  }, []);\n  const className = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const res = cssClasses.toString();\n    return \"ag-header \" + res;\n  }, [cssClasses]);\n  const style = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => ({\n      height,\n      minHeight: height\n    }),\n    [height]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: setRef2, className, style, role: \"presentation\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(headerRowContainerComp_default, { pinned: \"left\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(headerRowContainerComp_default, { pinned: null }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(headerRowContainerComp_default, { pinned: \"right\" }));\n};\nvar gridHeaderComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(GridHeaderComp);\n\n// packages/ag-grid-react/src/reactUi/reactComment.tsx\n\nvar useReactCommentEffect = (comment, eForCommentRef) => {\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const eForComment = eForCommentRef.current;\n    if (eForComment) {\n      const eParent = eForComment.parentElement;\n      if (eParent) {\n        const eComment = document.createComment(comment);\n        eParent.insertBefore(eComment, eForComment);\n        return () => {\n          eParent.removeChild(eComment);\n        };\n      }\n    }\n  }, [comment]);\n};\nvar reactComment_default = useReactCommentEffect;\n\n// packages/ag-grid-react/src/reactUi/rows/rowContainerComp.tsx\n\n\n\n// packages/ag-grid-react/src/reactUi/rows/rowComp.tsx\n\n\n\n// packages/ag-grid-react/src/reactUi/cells/cellComp.tsx\n\n\n\n// packages/ag-grid-react/src/shared/customComp/cellEditorComponentProxy.ts\n\nvar CellEditorComponentProxy = class {\n  constructor(cellEditorParams, refreshProps) {\n    this.cellEditorParams = cellEditorParams;\n    this.refreshProps = refreshProps;\n    this.instanceCreated = new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.AgPromise((resolve) => {\n      this.resolveInstanceCreated = resolve;\n    });\n    this.onValueChange = (value) => this.updateValue(value);\n    this.value = cellEditorParams.value;\n  }\n  getProps() {\n    return {\n      ...this.cellEditorParams,\n      initialValue: this.cellEditorParams.value,\n      value: this.value,\n      onValueChange: this.onValueChange\n    };\n  }\n  getValue() {\n    return this.value;\n  }\n  refresh(params) {\n    this.cellEditorParams = params;\n    this.refreshProps();\n  }\n  setMethods(methods) {\n    addOptionalMethods(this.getOptionalMethods(), methods, this);\n  }\n  getInstance() {\n    return this.instanceCreated.then(() => this.componentInstance);\n  }\n  setRef(componentInstance) {\n    this.componentInstance = componentInstance;\n    this.resolveInstanceCreated?.();\n    this.resolveInstanceCreated = void 0;\n  }\n  getOptionalMethods() {\n    return [\"isCancelBeforeStart\", \"isCancelAfterEnd\", \"focusIn\", \"focusOut\", \"afterGuiAttached\"];\n  }\n  updateValue(value) {\n    this.value = value;\n    this.refreshProps();\n  }\n};\n\n// packages/ag-grid-react/src/reactUi/cells/popupEditorComp.tsx\n\n\n\n// packages/ag-grid-react/src/reactUi/useEffectOnce.tsx\n\nvar useEffectOnce = (effect) => {\n  const effectFn = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(effect);\n  const destroyFn = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const effectCalled = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  const rendered = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  const [, setVal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  if (effectCalled.current) {\n    rendered.current = true;\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!effectCalled.current) {\n      destroyFn.current = effectFn.current();\n      effectCalled.current = true;\n    }\n    setVal((val) => val + 1);\n    return () => {\n      if (!rendered.current) {\n        return;\n      }\n      destroyFn.current?.();\n    };\n  }, []);\n};\n\n// packages/ag-grid-react/src/reactUi/cells/popupEditorComp.tsx\nvar PopupEditorComp = (props) => {\n  const [popupEditorWrapper, setPopupEditorWrapper] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const { context, popupService, localeService, gos, editService } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  useEffectOnce(() => {\n    const { editDetails, cellCtrl, eParentCell } = props;\n    const { compDetails } = editDetails;\n    const useModelPopup = gos.get(\"stopEditingWhenCellsLoseFocus\");\n    const wrapper = context.createBean(editService.createPopupEditorWrapper(compDetails.params));\n    const ePopupGui = wrapper.getGui();\n    if (props.jsChildComp) {\n      const eChildGui = props.jsChildComp.getGui();\n      if (eChildGui) {\n        ePopupGui.appendChild(eChildGui);\n      }\n    }\n    const positionParams = {\n      column: cellCtrl.getColumn(),\n      rowNode: cellCtrl.getRowNode(),\n      type: \"popupCellEditor\",\n      eventSource: eParentCell,\n      ePopup: ePopupGui,\n      position: editDetails.popupPosition,\n      keepWithinBounds: true\n    };\n    const positionCallback = popupService.positionPopupByComponent.bind(popupService, positionParams);\n    const translate = localeService.getLocaleTextFunc();\n    const addPopupRes = popupService.addPopup({\n      modal: useModelPopup,\n      eChild: ePopupGui,\n      closeOnEsc: true,\n      closedCallback: () => {\n        cellCtrl.onPopupEditorClosed();\n      },\n      anchorToElement: eParentCell,\n      positionCallback,\n      ariaLabel: translate(\"ariaLabelCellEditor\", \"Cell Editor\")\n    });\n    const hideEditorPopup = addPopupRes ? addPopupRes.hideFunc : void 0;\n    setPopupEditorWrapper(wrapper);\n    props.jsChildComp?.afterGuiAttached?.();\n    return () => {\n      hideEditorPopup?.();\n      context.destroyBean(wrapper);\n    };\n  });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, popupEditorWrapper && props.wrappedContent && (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(props.wrappedContent, popupEditorWrapper.getGui()));\n};\nvar popupEditorComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(PopupEditorComp);\n\n// packages/ag-grid-react/src/reactUi/cells/showJsRenderer.tsx\n\nvar useJsCellRenderer = (showDetails, showTools, eCellValue, cellValueVersion, jsCellRendererRef, eGui) => {\n  const { context } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const destroyCellRenderer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    const comp = jsCellRendererRef.current;\n    if (!comp) {\n      return;\n    }\n    const compGui = comp.getGui();\n    if (compGui && compGui.parentElement) {\n      compGui.parentElement.removeChild(compGui);\n    }\n    context.destroyBean(comp);\n    jsCellRendererRef.current = void 0;\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const showValue = showDetails != null;\n    const jsCompDetails = showDetails?.compDetails && !showDetails.compDetails.componentFromFramework;\n    const waitingForToolsSetup = showTools && eCellValue == null;\n    const showComp = showValue && jsCompDetails && !waitingForToolsSetup;\n    if (!showComp) {\n      destroyCellRenderer();\n      return;\n    }\n    const compDetails = showDetails.compDetails;\n    if (jsCellRendererRef.current) {\n      const comp = jsCellRendererRef.current;\n      const attemptRefresh = comp.refresh != null && showDetails.force == false;\n      const refreshResult = attemptRefresh ? comp.refresh(compDetails.params) : false;\n      const refreshWorked = refreshResult === true || refreshResult === void 0;\n      if (refreshWorked) {\n        return;\n      }\n      destroyCellRenderer();\n    }\n    const promise = compDetails.newAgStackInstance();\n    if (promise == null) {\n      return;\n    }\n    promise.then((comp) => {\n      if (!comp) {\n        return;\n      }\n      const compGui = comp.getGui();\n      if (!compGui) {\n        return;\n      }\n      const parent = showTools ? eCellValue : eGui.current;\n      parent.appendChild(compGui);\n      jsCellRendererRef.current = comp;\n    });\n  }, [showDetails, showTools, cellValueVersion]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    return destroyCellRenderer;\n  }, []);\n};\nvar showJsRenderer_default = useJsCellRenderer;\n\n// packages/ag-grid-react/src/reactUi/cells/cellComp.tsx\nvar jsxEditorProxy = (editDetails, CellEditorClass, setRef2) => {\n  const { compProxy } = editDetails;\n  setRef2(compProxy);\n  const props = compProxy.getProps();\n  const isStateless = isComponentStateless(CellEditorClass);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    CustomContext.Provider,\n    {\n      value: {\n        setMethods: (methods) => compProxy.setMethods(methods)\n      }\n    },\n    isStateless ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(CellEditorClass, { ...props }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(CellEditorClass, { ...props, ref: (ref) => compProxy.setRef(ref) })\n  );\n};\nvar jsxEditor = (editDetails, CellEditorClass, setRef2) => {\n  const newFormat = editDetails.compProxy;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, newFormat ? jsxEditorProxy(editDetails, CellEditorClass, setRef2) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(CellEditorClass, { ...editDetails.compDetails.params, ref: setRef2 }));\n};\nvar jsxEditValue = (editDetails, setCellEditorRef, eGui, cellCtrl, jsEditorComp) => {\n  const compDetails = editDetails.compDetails;\n  const CellEditorClass = compDetails.componentClass;\n  const reactInlineEditor = compDetails.componentFromFramework && !editDetails.popup;\n  const reactPopupEditor = compDetails.componentFromFramework && editDetails.popup;\n  const jsPopupEditor = !compDetails.componentFromFramework && editDetails.popup;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, reactInlineEditor && jsxEditor(editDetails, CellEditorClass, setCellEditorRef), reactPopupEditor && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    popupEditorComp_default,\n    {\n      editDetails,\n      cellCtrl,\n      eParentCell: eGui,\n      wrappedContent: jsxEditor(editDetails, CellEditorClass, setCellEditorRef)\n    }\n  ), jsPopupEditor && jsEditorComp && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    popupEditorComp_default,\n    {\n      editDetails,\n      cellCtrl,\n      eParentCell: eGui,\n      jsChildComp: jsEditorComp\n    }\n  ));\n};\nvar jsxShowValue = (showDetails, key, parentId, cellRendererRef, showCellWrapper, reactCellRendererStateless, setECellValue) => {\n  const { compDetails, value } = showDetails;\n  const noCellRenderer = !compDetails;\n  const reactCellRenderer = compDetails && compDetails.componentFromFramework;\n  const CellRendererClass = compDetails && compDetails.componentClass;\n  const valueForNoCellRenderer = value?.toString ? value.toString() : value;\n  const bodyJsxFunc = () => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, noCellRenderer && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, valueForNoCellRenderer), reactCellRenderer && !reactCellRendererStateless && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(CellRendererClass, { ...compDetails.params, key, ref: cellRendererRef }), reactCellRenderer && reactCellRendererStateless && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(CellRendererClass, { ...compDetails.params, key }));\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, showCellWrapper ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", { role: \"presentation\", id: `cell-${parentId}`, className: \"ag-cell-value\", ref: setECellValue }, bodyJsxFunc()) : bodyJsxFunc());\n};\nvar CellComp = ({\n  cellCtrl,\n  printLayout,\n  editingRow\n}) => {\n  const { context } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const { colIdSanitised, instanceId } = cellCtrl;\n  const compBean = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const [renderDetails, setRenderDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    () => cellCtrl.isCellRenderer() ? void 0 : { compDetails: void 0, value: cellCtrl.getValueToDisplay(), force: false }\n  );\n  const [editDetails, setEditDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [renderKey, setRenderKey] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1);\n  const [userStyles, setUserStyles] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [includeSelection, setIncludeSelection] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [includeRowDrag, setIncludeRowDrag] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [includeDndSource, setIncludeDndSource] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [jsEditorComp, setJsEditorComp] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const forceWrapper = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => cellCtrl.isForceWrapper(), [cellCtrl]);\n  const cellAriaRole = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => cellCtrl.getCellAriaRole(), [cellCtrl]);\n  const eGui = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const cellRendererRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const jsCellRendererRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const cellEditorRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const eCellWrapper = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const cellWrapperDestroyFuncs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  const eCellValue = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const [cellValueVersion, setCellValueVersion] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const setCellValueRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((ref) => {\n    eCellValue.current = ref;\n    setCellValueVersion((v) => v + 1);\n  }, []);\n  const showTools = renderDetails != null && (includeSelection || includeDndSource || includeRowDrag);\n  const showCellWrapper = forceWrapper || showTools;\n  const setCellEditorRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (cellEditor) => {\n      cellEditorRef.current = cellEditor;\n      if (cellEditor) {\n        const editingCancelledByUserComp = cellEditor.isCancelBeforeStart && cellEditor.isCancelBeforeStart();\n        setTimeout(() => {\n          if (editingCancelledByUserComp) {\n            cellCtrl.stopEditing(true);\n            cellCtrl.focusCell(true);\n          } else {\n            cellCtrl.cellEditorAttached();\n          }\n        });\n      }\n    },\n    [cellCtrl]\n  );\n  const cssClassManager = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  if (!cssClassManager.current) {\n    cssClassManager.current = new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.CssClassManager(() => eGui.current);\n  }\n  showJsRenderer_default(renderDetails, showCellWrapper, eCellValue.current, cellValueVersion, jsCellRendererRef, eGui);\n  const lastRenderDetails = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(() => {\n    const oldDetails = lastRenderDetails.current;\n    const newDetails = renderDetails;\n    lastRenderDetails.current = renderDetails;\n    if (oldDetails == null || oldDetails.compDetails == null || newDetails == null || newDetails.compDetails == null) {\n      return;\n    }\n    const oldCompDetails = oldDetails.compDetails;\n    const newCompDetails = newDetails.compDetails;\n    if (oldCompDetails.componentClass != newCompDetails.componentClass) {\n      return;\n    }\n    if (cellRendererRef.current?.refresh == null) {\n      return;\n    }\n    const result = cellRendererRef.current.refresh(newCompDetails.params);\n    if (result != true) {\n      setRenderKey((prev) => prev + 1);\n    }\n  }, [renderDetails]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(() => {\n    const doingJsEditor = editDetails && !editDetails.compDetails.componentFromFramework;\n    if (!doingJsEditor) {\n      return;\n    }\n    const compDetails = editDetails.compDetails;\n    const isPopup = editDetails.popup === true;\n    const cellEditorPromise = compDetails.newAgStackInstance();\n    cellEditorPromise.then((cellEditor) => {\n      if (!cellEditor) {\n        return;\n      }\n      const compGui = cellEditor.getGui();\n      setCellEditorRef(cellEditor);\n      if (!isPopup) {\n        const parentEl = (forceWrapper ? eCellWrapper : eGui).current;\n        parentEl?.appendChild(compGui);\n        cellEditor.afterGuiAttached && cellEditor.afterGuiAttached();\n      }\n      setJsEditorComp(cellEditor);\n    });\n    return () => {\n      cellEditorPromise.then((cellEditor) => {\n        const compGui = cellEditor.getGui();\n        context.destroyBean(cellEditor);\n        setCellEditorRef(void 0);\n        setJsEditorComp(void 0);\n        compGui?.parentElement?.removeChild(compGui);\n      });\n    };\n  }, [editDetails]);\n  const setCellWrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (eRef) => {\n      eCellWrapper.current = eRef;\n      if (!eRef) {\n        cellWrapperDestroyFuncs.current.forEach((f) => f());\n        cellWrapperDestroyFuncs.current = [];\n        return;\n      }\n      const addComp = (comp) => {\n        if (comp) {\n          const eGui2 = comp.getGui();\n          eRef.insertAdjacentElement(\"afterbegin\", eGui2);\n          cellWrapperDestroyFuncs.current.push(() => {\n            context.destroyBean(comp);\n            (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._removeFromParent)(eGui2);\n          });\n        }\n        return comp;\n      };\n      if (includeSelection) {\n        const checkboxSelectionComp = cellCtrl.createSelectionCheckbox();\n        addComp(checkboxSelectionComp);\n      }\n      if (includeDndSource) {\n        addComp(cellCtrl.createDndSource());\n      }\n      if (includeRowDrag) {\n        addComp(cellCtrl.createRowDragComp());\n      }\n    },\n    [cellCtrl, context, includeDndSource, includeRowDrag, includeSelection]\n  );\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eGui.current = eRef;\n    compBean.current = eRef ? context.createBean(new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._EmptyBean()) : context.destroyBean(compBean.current);\n    if (!eRef || !cellCtrl) {\n      return;\n    }\n    const compProxy = {\n      addOrRemoveCssClass: (name, on) => cssClassManager.current.addOrRemoveCssClass(name, on),\n      setUserStyles: (styles) => setUserStyles(styles),\n      getFocusableElement: () => eGui.current,\n      setIncludeSelection: (include) => setIncludeSelection(include),\n      setIncludeRowDrag: (include) => setIncludeRowDrag(include),\n      setIncludeDndSource: (include) => setIncludeDndSource(include),\n      getCellEditor: () => cellEditorRef.current || null,\n      getCellRenderer: () => cellRendererRef.current ?? jsCellRendererRef.current,\n      getParentOfValue: () => eCellValue.current ?? eCellWrapper.current ?? eGui.current,\n      setRenderDetails: (compDetails, value, force) => {\n        setRenderDetails((prev) => {\n          if (prev?.compDetails !== compDetails || prev?.value !== value || prev?.force !== force) {\n            return {\n              value,\n              compDetails,\n              force\n            };\n          } else {\n            return prev;\n          }\n        });\n      },\n      setEditDetails: (compDetails, popup, popupPosition, reactiveCustomComponents) => {\n        if (compDetails) {\n          let compProxy2 = void 0;\n          if (reactiveCustomComponents) {\n            compProxy2 = new CellEditorComponentProxy(\n              compDetails.params,\n              () => setRenderKey((prev) => prev + 1)\n            );\n          } else if (compDetails.componentFromFramework) {\n            warnReactiveCustomComponents();\n          }\n          setEditDetails({\n            compDetails,\n            popup,\n            popupPosition,\n            compProxy: compProxy2\n          });\n          if (!popup) {\n            setRenderDetails(void 0);\n          }\n        } else {\n          setEditDetails((editDetails2) => {\n            if (editDetails2?.compProxy) {\n              cellEditorRef.current = void 0;\n            }\n            return void 0;\n          });\n        }\n      }\n    };\n    const cellWrapperOrUndefined = eCellWrapper.current || void 0;\n    cellCtrl.setComp(compProxy, eRef, cellWrapperOrUndefined, printLayout, editingRow, compBean.current);\n  }, []);\n  const reactCellRendererStateless = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const res = renderDetails?.compDetails?.componentFromFramework && isComponentStateless(renderDetails.compDetails.componentClass);\n    return !!res;\n  }, [renderDetails]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(() => {\n    if (!eGui.current) {\n      return;\n    }\n    cssClassManager.current.addOrRemoveCssClass(\"ag-cell-value\", !showCellWrapper);\n    cssClassManager.current.addOrRemoveCssClass(\"ag-cell-inline-editing\", !!editDetails && !editDetails.popup);\n    cssClassManager.current.addOrRemoveCssClass(\"ag-cell-popup-editing\", !!editDetails && !!editDetails.popup);\n    cssClassManager.current.addOrRemoveCssClass(\"ag-cell-not-inline-editing\", !editDetails || !!editDetails.popup);\n    cellCtrl.getRowCtrl()?.setInlineEditingCss();\n    if (cellCtrl.shouldRestoreFocus() && !cellCtrl.isEditing()) {\n      eGui.current.focus({ preventScroll: true });\n    }\n  });\n  const showContents = () => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, renderDetails != null && jsxShowValue(\n    renderDetails,\n    renderKey,\n    instanceId,\n    cellRendererRef,\n    showCellWrapper,\n    reactCellRendererStateless,\n    setCellValueRef\n  ), editDetails != null && jsxEditValue(editDetails, setCellEditorRef, eGui.current, cellCtrl, jsEditorComp));\n  const onBlur = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => cellCtrl.onFocusOut(), []);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: setRef2, style: userStyles, role: cellAriaRole, \"col-id\": colIdSanitised, onBlur }, showCellWrapper ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"ag-cell-wrapper\", role: \"presentation\", ref: setCellWrapperRef }, showContents()) : showContents());\n};\nvar cellComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(CellComp);\n\n// packages/ag-grid-react/src/reactUi/rows/rowComp.tsx\nvar RowComp = ({ rowCtrl, containerType }) => {\n  const { context, gos } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const compBean = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const domOrderRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(rowCtrl.getDomOrder());\n  const isFullWidth = rowCtrl.isFullWidth();\n  const isDisplayed = rowCtrl.getRowNode().displayed;\n  const [rowIndex, setRowIndex] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => isDisplayed ? rowCtrl.getRowIndex() : null);\n  const [rowId, setRowId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => rowCtrl.getRowId());\n  const [rowBusinessKey, setRowBusinessKey] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => rowCtrl.getBusinessKey());\n  const [userStyles, setUserStyles] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => rowCtrl.getRowStyles());\n  const cellCtrlsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const prevCellCtrlsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const [cellCtrls, setCellCtrls] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => null);\n  const [fullWidthCompDetails, setFullWidthCompDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [top, setTop] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    () => isDisplayed ? rowCtrl.getInitialRowTop(containerType) : void 0\n  );\n  const [transform, setTransform] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    () => isDisplayed ? rowCtrl.getInitialTransform(containerType) : void 0\n  );\n  const eGui = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const fullWidthCompRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const autoHeightSetup = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  const [autoHeightSetupAttempt, setAutoHeightSetupAttempt] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (autoHeightSetup.current || !fullWidthCompDetails || autoHeightSetupAttempt > 10) {\n      return;\n    }\n    const eChild = eGui.current?.firstChild;\n    if (eChild) {\n      rowCtrl.setupDetailRowAutoHeight(eChild);\n      autoHeightSetup.current = true;\n    } else {\n      setAutoHeightSetupAttempt((prev) => prev + 1);\n    }\n  }, [fullWidthCompDetails, autoHeightSetupAttempt]);\n  const cssClassManager = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  if (!cssClassManager.current) {\n    cssClassManager.current = new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.CssClassManager(() => eGui.current);\n  }\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eGui.current = eRef;\n    compBean.current = eRef ? context.createBean(new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._EmptyBean()) : context.destroyBean(compBean.current);\n    if (!eRef) {\n      rowCtrl.unsetComp(containerType);\n      return;\n    }\n    if (!rowCtrl.isAlive()) {\n      return;\n    }\n    const compProxy = {\n      // the rowTop is managed by state, instead of direct style manipulation by rowCtrl (like all the other styles)\n      // as we need to have an initial value when it's placed into he DOM for the first time, for animation to work.\n      setTop,\n      setTransform,\n      // i found using React for managing classes at the row level was to slow, as modifying classes caused a lot of\n      // React code to execute, so avoiding React for managing CSS Classes made the grid go much faster.\n      addOrRemoveCssClass: (name, on) => cssClassManager.current.addOrRemoveCssClass(name, on),\n      setDomOrder: (domOrder) => domOrderRef.current = domOrder,\n      setRowIndex,\n      setRowId,\n      setRowBusinessKey,\n      setUserStyles,\n      // if we don't maintain the order, then cols will be ripped out and into the dom\n      // when cols reordered, which would stop the CSS transitions from working\n      setCellCtrls: (next, useFlushSync) => {\n        prevCellCtrlsRef.current = cellCtrlsRef.current;\n        cellCtrlsRef.current = next;\n        const nextCells = getNextValueIfDifferent(prevCellCtrlsRef.current, next, domOrderRef.current);\n        if (nextCells !== prevCellCtrlsRef.current) {\n          agFlushSync(useFlushSync, () => setCellCtrls(nextCells));\n        }\n      },\n      showFullWidth: (compDetails) => setFullWidthCompDetails(compDetails),\n      getFullWidthCellRenderer: () => fullWidthCompRef.current,\n      refreshFullWidth: (getUpdatedParams) => {\n        if (canRefreshFullWidthRef.current) {\n          setFullWidthCompDetails((prevFullWidthCompDetails) => ({\n            ...prevFullWidthCompDetails,\n            params: getUpdatedParams()\n          }));\n          return true;\n        } else {\n          if (!fullWidthCompRef.current || !fullWidthCompRef.current.refresh) {\n            return false;\n          }\n          return fullWidthCompRef.current.refresh(getUpdatedParams());\n        }\n      }\n    };\n    rowCtrl.setComp(compProxy, eRef, containerType, compBean.current);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(\n    () => showJsComp(fullWidthCompDetails, context, eGui.current, fullWidthCompRef),\n    [fullWidthCompDetails]\n  );\n  const rowStyles = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const res = { top, transform };\n    Object.assign(res, userStyles);\n    return res;\n  }, [top, transform, userStyles]);\n  const showFullWidthFramework = isFullWidth && fullWidthCompDetails?.componentFromFramework;\n  const showCells = !isFullWidth && cellCtrls != null;\n  const reactFullWidthCellRendererStateless = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const res = fullWidthCompDetails?.componentFromFramework && isComponentStateless(fullWidthCompDetails.componentClass);\n    return !!res;\n  }, [fullWidthCompDetails]);\n  const canRefreshFullWidthRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    canRefreshFullWidthRef.current = reactFullWidthCellRendererStateless && !!fullWidthCompDetails && !!gos.get(\"reactiveCustomComponents\");\n  }, [reactFullWidthCellRendererStateless, fullWidthCompDetails]);\n  const showCellsJsx = () => cellCtrls?.map((cellCtrl) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    cellComp_default,\n    {\n      cellCtrl,\n      editingRow: rowCtrl.isEditing(),\n      printLayout: rowCtrl.isPrintLayout(),\n      key: cellCtrl.instanceId\n    }\n  ));\n  const showFullWidthFrameworkJsx = () => {\n    const FullWidthComp = fullWidthCompDetails.componentClass;\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, reactFullWidthCellRendererStateless ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(FullWidthComp, { ...fullWidthCompDetails.params }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(FullWidthComp, { ...fullWidthCompDetails.params, ref: fullWidthCompRef }));\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    \"div\",\n    {\n      ref: setRef2,\n      role: \"row\",\n      style: rowStyles,\n      \"row-index\": rowIndex,\n      \"row-id\": rowId,\n      \"row-business-key\": rowBusinessKey\n    },\n    showCells && showCellsJsx(),\n    showFullWidthFramework && showFullWidthFrameworkJsx()\n  );\n};\nvar rowComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(RowComp);\n\n// packages/ag-grid-react/src/reactUi/rows/rowContainerComp.tsx\nvar RowContainerComp = ({ name }) => {\n  const { context } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const containerOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._getRowContainerOptions)(name), [name]);\n  const eViewport = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eContainer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const rowCtrlsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  const prevRowCtrlsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  const [rowCtrlsOrdered, setRowCtrlsOrdered] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => []);\n  const domOrderRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  const rowContainerCtrlRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const viewportClasses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => classesList(containerOptions.viewport), [containerOptions]);\n  const containerClasses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => classesList(containerOptions.container), [containerOptions]);\n  const isCenter = containerOptions.type === \"center\";\n  const topLevelRef = isCenter ? eViewport : eContainer;\n  reactComment_default(\" AG Row Container \" + name + \" \", topLevelRef);\n  const areElementsReady = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    if (isCenter) {\n      return eViewport.current != null && eContainer.current != null;\n    }\n    return eContainer.current != null;\n  }, []);\n  const areElementsRemoved = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    if (isCenter) {\n      return eViewport.current == null && eContainer.current == null;\n    }\n    return eContainer.current == null;\n  }, []);\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    if (areElementsRemoved()) {\n      rowContainerCtrlRef.current = context.destroyBean(rowContainerCtrlRef.current);\n    }\n    if (areElementsReady()) {\n      const updateRowCtrlsOrdered = (useFlushSync) => {\n        const next = getNextValueIfDifferent(\n          prevRowCtrlsRef.current,\n          rowCtrlsRef.current,\n          domOrderRef.current\n        );\n        if (next !== prevRowCtrlsRef.current) {\n          prevRowCtrlsRef.current = next;\n          agFlushSync(useFlushSync, () => setRowCtrlsOrdered(next));\n        }\n      };\n      const compProxy = {\n        setHorizontalScroll: (offset) => {\n          if (eViewport.current) {\n            eViewport.current.scrollLeft = offset;\n          }\n        },\n        setViewportHeight: (height) => {\n          if (eViewport.current) {\n            eViewport.current.style.height = height;\n          }\n        },\n        setRowCtrls: ({ rowCtrls, useFlushSync }) => {\n          const useFlush = !!useFlushSync && rowCtrlsRef.current.length > 0 && rowCtrls.length > 0;\n          rowCtrlsRef.current = rowCtrls;\n          updateRowCtrlsOrdered(useFlush);\n        },\n        setDomOrder: (domOrder) => {\n          if (domOrderRef.current != domOrder) {\n            domOrderRef.current = domOrder;\n            updateRowCtrlsOrdered(false);\n          }\n        },\n        setContainerWidth: (width) => {\n          if (eContainer.current) {\n            eContainer.current.style.width = width;\n          }\n        },\n        setOffsetTop: (offset) => {\n          if (eContainer.current) {\n            eContainer.current.style.transform = `translateY(${offset})`;\n          }\n        }\n      };\n      rowContainerCtrlRef.current = context.createBean(new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.RowContainerCtrl(name));\n      rowContainerCtrlRef.current.setComp(compProxy, eContainer.current, eViewport.current);\n    }\n  }, [areElementsReady, areElementsRemoved]);\n  const setContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (e) => {\n      eContainer.current = e;\n      setRef2();\n    },\n    [setRef2]\n  );\n  const setViewportRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (e) => {\n      eViewport.current = e;\n      setRef2();\n    },\n    [setRef2]\n  );\n  const buildContainer = () => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: containerClasses, ref: setContainerRef, role: \"rowgroup\" }, rowCtrlsOrdered.map((rowCtrl) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(rowComp_default, { rowCtrl, containerType: containerOptions.type, key: rowCtrl.instanceId })));\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, isCenter ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: viewportClasses, ref: setViewportRef, role: \"presentation\" }, buildContainer()) : buildContainer());\n};\nvar rowContainerComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(RowContainerComp);\n\n// packages/ag-grid-react/src/reactUi/gridBodyComp.tsx\nvar GridBodyComp = () => {\n  const { context, resizeObserverService } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const [rowAnimationClass, setRowAnimationClass] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n  const [topHeight, setTopHeight] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [bottomHeight, setBottomHeight] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [stickyTopHeight, setStickyTopHeight] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"0px\");\n  const [stickyTopTop, setStickyTopTop] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"0px\");\n  const [stickyTopWidth, setStickyTopWidth] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"100%\");\n  const [stickyBottomHeight, setStickyBottomHeight] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"0px\");\n  const [stickyBottomBottom, setStickyBottomBottom] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"0px\");\n  const [stickyBottomWidth, setStickyBottomWidth] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"100%\");\n  const [topDisplay, setTopDisplay] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n  const [bottomDisplay, setBottomDisplay] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n  const [forceVerticalScrollClass, setForceVerticalScrollClass] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [topAndBottomOverflowY, setTopAndBottomOverflowY] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n  const [cellSelectableCss, setCellSelectableCss] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [layoutClass, setLayoutClass] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"ag-layout-normal\");\n  const cssClassManager = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  if (!cssClassManager.current) {\n    cssClassManager.current = new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.CssClassManager(() => eRoot.current);\n  }\n  const eRoot = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eTop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eStickyTop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eStickyBottom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eBody = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eBodyViewport = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const eBottom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const beansToDestroy = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  const destroyFuncs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  reactComment_default(\" AG Grid Body \", eRoot);\n  reactComment_default(\" AG Pinned Top \", eTop);\n  reactComment_default(\" AG Sticky Top \", eStickyTop);\n  reactComment_default(\" AG Middle \", eBodyViewport);\n  reactComment_default(\" AG Pinned Bottom \", eBottom);\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eRoot.current = eRef;\n    if (!eRef) {\n      beansToDestroy.current = context.destroyBeans(beansToDestroy.current);\n      destroyFuncs.current.forEach((f) => f());\n      destroyFuncs.current = [];\n      return;\n    }\n    if (!context) {\n      return;\n    }\n    const attachToDom = (eParent, eChild) => {\n      eParent.appendChild(eChild);\n      destroyFuncs.current.push(() => eParent.removeChild(eChild));\n    };\n    const newComp = (compClass) => {\n      const comp = context.createBean(new compClass());\n      beansToDestroy.current.push(comp);\n      return comp;\n    };\n    const addComp = (eParent, compClass, comment) => {\n      attachToDom(eParent, document.createComment(comment));\n      attachToDom(eParent, newComp(compClass).getGui());\n    };\n    addComp(eRef, ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.FakeHScrollComp, \" AG Fake Horizontal Scroll \");\n    addComp(eRef, ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.OverlayWrapperComponent, \" AG Overlay Wrapper \");\n    if (eBody.current) {\n      addComp(eBody.current, ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.FakeVScrollComp, \" AG Fake Vertical Scroll \");\n    }\n    const compProxy = {\n      setRowAnimationCssOnBodyViewport: setRowAnimationClass,\n      setColumnCount: (count) => {\n        if (eRoot.current) {\n          (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._setAriaColCount)(eRoot.current, count);\n        }\n      },\n      setRowCount: (count) => {\n        if (eRoot.current) {\n          (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._setAriaRowCount)(eRoot.current, count);\n        }\n      },\n      setTopHeight,\n      setBottomHeight,\n      setStickyTopHeight,\n      setStickyTopTop,\n      setStickyTopWidth,\n      setTopDisplay,\n      setBottomDisplay,\n      setColumnMovingCss: (cssClass, flag) => cssClassManager.current.addOrRemoveCssClass(cssClass, flag),\n      updateLayoutClasses: setLayoutClass,\n      setAlwaysVerticalScrollClass: setForceVerticalScrollClass,\n      setPinnedTopBottomOverflowY: setTopAndBottomOverflowY,\n      setCellSelectableCss: (cssClass, flag) => setCellSelectableCss(flag ? cssClass : null),\n      setBodyViewportWidth: (width) => {\n        if (eBodyViewport.current) {\n          eBodyViewport.current.style.width = width;\n        }\n      },\n      registerBodyViewportResizeListener: (listener) => {\n        if (eBodyViewport.current) {\n          const unsubscribeFromResize = resizeObserverService.observeResize(eBodyViewport.current, listener);\n          destroyFuncs.current.push(() => unsubscribeFromResize());\n        }\n      },\n      setStickyBottomHeight,\n      setStickyBottomBottom,\n      setStickyBottomWidth\n    };\n    const ctrl = context.createBean(new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.GridBodyCtrl());\n    beansToDestroy.current.push(ctrl);\n    ctrl.setComp(\n      compProxy,\n      eRef,\n      eBodyViewport.current,\n      eTop.current,\n      eBottom.current,\n      eStickyTop.current,\n      eStickyBottom.current\n    );\n  }, []);\n  const rootClasses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => classesList(\"ag-root\", \"ag-unselectable\", layoutClass), [layoutClass]);\n  const bodyViewportClasses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => classesList(\n      \"ag-body-viewport\",\n      rowAnimationClass,\n      layoutClass,\n      forceVerticalScrollClass,\n      cellSelectableCss\n    ),\n    [rowAnimationClass, layoutClass, forceVerticalScrollClass, cellSelectableCss]\n  );\n  const bodyClasses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => classesList(\"ag-body\", layoutClass), [layoutClass]);\n  const topClasses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => classesList(\"ag-floating-top\", cellSelectableCss), [cellSelectableCss]);\n  const stickyTopClasses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => classesList(\"ag-sticky-top\", cellSelectableCss), [cellSelectableCss]);\n  const stickyBottomClasses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => classesList(\"ag-sticky-bottom\", stickyBottomHeight === \"0px\" ? \"ag-hidden\" : null, cellSelectableCss),\n    [cellSelectableCss, stickyBottomHeight]\n  );\n  const bottomClasses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => classesList(\"ag-floating-bottom\", cellSelectableCss), [cellSelectableCss]);\n  const topStyle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => ({\n      height: topHeight,\n      minHeight: topHeight,\n      display: topDisplay,\n      overflowY: topAndBottomOverflowY\n    }),\n    [topHeight, topDisplay, topAndBottomOverflowY]\n  );\n  const stickyTopStyle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => ({\n      height: stickyTopHeight,\n      top: stickyTopTop,\n      width: stickyTopWidth\n    }),\n    [stickyTopHeight, stickyTopTop, stickyTopWidth]\n  );\n  const stickyBottomStyle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => ({\n      height: stickyBottomHeight,\n      bottom: stickyBottomBottom,\n      width: stickyBottomWidth\n    }),\n    [stickyBottomHeight, stickyBottomBottom, stickyBottomWidth]\n  );\n  const bottomStyle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => ({\n      height: bottomHeight,\n      minHeight: bottomHeight,\n      display: bottomDisplay,\n      overflowY: topAndBottomOverflowY\n    }),\n    [bottomHeight, bottomDisplay, topAndBottomOverflowY]\n  );\n  const createRowContainer = (container) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(rowContainerComp_default, { name: container, key: `${container}-container` });\n  const createSection = ({\n    section,\n    children,\n    className,\n    style\n  }) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: section, className, role: \"presentation\", style }, children.map(createRowContainer));\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: setRef2, className: rootClasses, role: \"treegrid\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(gridHeaderComp_default, null), createSection({\n    section: eTop,\n    className: topClasses,\n    style: topStyle,\n    children: [\"topLeft\", \"topCenter\", \"topRight\", \"topFullWidth\"]\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: bodyClasses, ref: eBody, role: \"presentation\" }, createSection({\n    section: eBodyViewport,\n    className: bodyViewportClasses,\n    children: [\"left\", \"center\", \"right\", \"fullWidth\"]\n  })), createSection({\n    section: eStickyTop,\n    className: stickyTopClasses,\n    style: stickyTopStyle,\n    children: [\"stickyTopLeft\", \"stickyTopCenter\", \"stickyTopRight\", \"stickyTopFullWidth\"]\n  }), createSection({\n    section: eStickyBottom,\n    className: stickyBottomClasses,\n    style: stickyBottomStyle,\n    children: [\"stickyBottomLeft\", \"stickyBottomCenter\", \"stickyBottomRight\", \"stickyBottomFullWidth\"]\n  }), createSection({\n    section: eBottom,\n    className: bottomClasses,\n    style: bottomStyle,\n    children: [\"bottomLeft\", \"bottomCenter\", \"bottomRight\", \"bottomFullWidth\"]\n  }));\n};\nvar gridBodyComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(GridBodyComp);\n\n// packages/ag-grid-react/src/reactUi/tabGuardComp.tsx\n\n\nvar TabGuardCompRef = (props, forwardRef4) => {\n  const { children, eFocusableElement, onTabKeyDown, gridCtrl, forceFocusOutWhenTabGuardsAreEmpty } = props;\n  const { context } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const topTabGuardRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const bottomTabGuardRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const tabGuardCtrlRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const setTabIndex = (value) => {\n    const processedValue = value == null ? void 0 : parseInt(value, 10).toString();\n    [topTabGuardRef, bottomTabGuardRef].forEach((tabGuard) => {\n      if (processedValue === void 0) {\n        tabGuard.current?.removeAttribute(\"tabindex\");\n      } else {\n        tabGuard.current?.setAttribute(\"tabindex\", processedValue);\n      }\n    });\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(forwardRef4, () => ({\n    forceFocusOutOfContainer(up) {\n      tabGuardCtrlRef.current?.forceFocusOutOfContainer(up);\n    }\n  }));\n  const setupCtrl = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    const topTabGuard = topTabGuardRef.current;\n    const bottomTabGuard = bottomTabGuardRef.current;\n    if (!topTabGuard && !bottomTabGuard) {\n      tabGuardCtrlRef.current = context.destroyBean(tabGuardCtrlRef.current);\n      return;\n    }\n    if (topTabGuard && bottomTabGuard) {\n      const compProxy = {\n        setTabIndex\n      };\n      tabGuardCtrlRef.current = context.createBean(\n        new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.TabGuardCtrl({\n          comp: compProxy,\n          eTopGuard: topTabGuard,\n          eBottomGuard: bottomTabGuard,\n          eFocusableElement,\n          onTabKeyDown,\n          forceFocusOutWhenTabGuardsAreEmpty,\n          focusInnerElement: (fromBottom) => gridCtrl.focusInnerElement(fromBottom)\n        })\n      );\n    }\n  }, []);\n  const setTopRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (e) => {\n      topTabGuardRef.current = e;\n      setupCtrl();\n    },\n    [setupCtrl]\n  );\n  const setBottomRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (e) => {\n      bottomTabGuardRef.current = e;\n      setupCtrl();\n    },\n    [setupCtrl]\n  );\n  const createTabGuard = (side) => {\n    const className = side === \"top\" ? ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.TabGuardClassNames.TAB_GUARD_TOP : ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.TabGuardClassNames.TAB_GUARD_BOTTOM;\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      \"div\",\n      {\n        className: `${ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.TabGuardClassNames.TAB_GUARD} ${className}`,\n        role: \"presentation\",\n        ref: side === \"top\" ? setTopRef : setBottomRef\n      }\n    );\n  };\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, createTabGuard(\"top\"), children, createTabGuard(\"bottom\"));\n};\nvar TabGuardComp = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(TabGuardCompRef);\nvar tabGuardComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(TabGuardComp);\n\n// packages/ag-grid-react/src/reactUi/gridComp.tsx\nvar GridComp = ({ context }) => {\n  const [rtlClass, setRtlClass] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n  const [gridThemeClass, setGridThemeClass] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n  const [layoutClass, setLayoutClass] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n  const [cursor, setCursor] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [userSelect, setUserSelect] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [initialised, setInitialised] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [tabGuardReady, setTabGuardReady] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const gridCtrlRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const eRootWrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const tabGuardRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const [eGridBodyParent, setGridBodyParent] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const focusInnerElementRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(() => void 0);\n  const paginationCompRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const focusableContainersRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  const onTabKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => void 0, []);\n  const beans = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (context.isDestroyed()) {\n      return null;\n    }\n    return context.getBeans();\n  }, [context]);\n  reactComment_default(\" AG Grid \", eRootWrapperRef);\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eRootWrapperRef.current = eRef;\n    gridCtrlRef.current = eRef ? context.createBean(new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.GridCtrl()) : context.destroyBean(gridCtrlRef.current);\n    if (!eRef || context.isDestroyed()) {\n      return;\n    }\n    const gridCtrl = gridCtrlRef.current;\n    focusInnerElementRef.current = gridCtrl.focusInnerElement.bind(gridCtrl);\n    const compProxy = {\n      destroyGridUi: () => {\n      },\n      // do nothing, as framework users destroy grid by removing the comp\n      setRtlClass,\n      setGridThemeClass,\n      forceFocusOutOfContainer: (up) => {\n        if (!up && paginationCompRef.current?.isDisplayed()) {\n          paginationCompRef.current.forceFocusOutOfContainer(up);\n          return;\n        }\n        tabGuardRef.current?.forceFocusOutOfContainer(up);\n      },\n      updateLayoutClasses: setLayoutClass,\n      getFocusableContainers: () => {\n        const comps = [];\n        const gridBodyCompEl = eRootWrapperRef.current?.querySelector(\".ag-root\");\n        if (gridBodyCompEl) {\n          comps.push({ getGui: () => gridBodyCompEl });\n        }\n        focusableContainersRef.current.forEach((comp) => {\n          if (comp.isDisplayed()) {\n            comps.push(comp);\n          }\n        });\n        return comps;\n      },\n      setCursor,\n      setUserSelect\n    };\n    gridCtrl.setComp(compProxy, eRef, eRef);\n    setInitialised(true);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const gridCtrl = gridCtrlRef.current;\n    const eRootWrapper = eRootWrapperRef.current;\n    if (!tabGuardReady || !beans || !gridCtrl || !eGridBodyParent || !eRootWrapper) {\n      return;\n    }\n    const beansToDestroy = [];\n    const {\n      watermarkSelector,\n      paginationSelector,\n      sideBarSelector,\n      statusBarSelector,\n      gridHeaderDropZonesSelector\n    } = gridCtrl.getOptionalSelectors();\n    const additionalEls = [];\n    if (gridHeaderDropZonesSelector) {\n      const headerDropZonesComp = context.createBean(new gridHeaderDropZonesSelector.component());\n      const eGui = headerDropZonesComp.getGui();\n      eRootWrapper.insertAdjacentElement(\"afterbegin\", eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(headerDropZonesComp);\n    }\n    if (sideBarSelector) {\n      const sideBarComp = context.createBean(new sideBarSelector.component());\n      const eGui = sideBarComp.getGui();\n      const bottomTabGuard = eGridBodyParent.querySelector(\".ag-tab-guard-bottom\");\n      if (bottomTabGuard) {\n        bottomTabGuard.insertAdjacentElement(\"beforebegin\", eGui);\n        additionalEls.push(eGui);\n      }\n      beansToDestroy.push(sideBarComp);\n      focusableContainersRef.current.push(sideBarComp);\n    }\n    const addComponentToDom = (component) => {\n      const comp = context.createBean(new component());\n      const eGui = comp.getGui();\n      eRootWrapper.insertAdjacentElement(\"beforeend\", eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(comp);\n      return comp;\n    };\n    if (statusBarSelector) {\n      addComponentToDom(statusBarSelector.component);\n    }\n    if (paginationSelector) {\n      const paginationComp = addComponentToDom(paginationSelector.component);\n      paginationCompRef.current = paginationComp;\n      focusableContainersRef.current.push(paginationComp);\n    }\n    if (watermarkSelector) {\n      addComponentToDom(watermarkSelector.component);\n    }\n    return () => {\n      context.destroyBeans(beansToDestroy);\n      additionalEls.forEach((el) => {\n        el.parentElement?.removeChild(el);\n      });\n    };\n  }, [tabGuardReady, eGridBodyParent, beans]);\n  const rootWrapperClasses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => classesList(\"ag-root-wrapper\", rtlClass, gridThemeClass, layoutClass),\n    [rtlClass, gridThemeClass, layoutClass]\n  );\n  const rootWrapperBodyClasses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => classesList(\"ag-root-wrapper-body\", \"ag-focus-managed\", layoutClass),\n    [layoutClass]\n  );\n  const topStyle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => ({\n      userSelect: userSelect != null ? userSelect : \"\",\n      WebkitUserSelect: userSelect != null ? userSelect : \"\",\n      cursor: cursor != null ? cursor : \"\"\n    }),\n    [userSelect, cursor]\n  );\n  const setTabGuardCompRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((ref) => {\n    tabGuardRef.current = ref;\n    setTabGuardReady(ref !== null);\n  }, []);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: setRef2, className: rootWrapperClasses, style: topStyle, role: \"presentation\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: rootWrapperBodyClasses, ref: setGridBodyParent, role: \"presentation\" }, initialised && eGridBodyParent && beans && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BeansContext.Provider, { value: beans }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    tabGuardComp_default,\n    {\n      ref: setTabGuardCompRef,\n      eFocusableElement: eGridBodyParent,\n      onTabKeyDown,\n      gridCtrl: gridCtrlRef.current,\n      forceFocusOutWhenTabGuardsAreEmpty: true\n    },\n    // we wait for initialised before rending the children, so GridComp has created and registered with it's\n    // GridCtrl before we create the child GridBodyComp. Otherwise the GridBodyComp would initialise first,\n    // before we have set the the Layout CSS classes, causing the GridBodyComp to render rows to a grid that\n    // doesn't have it's height specified, which would result if all the rows getting rendered (and if many rows,\n    // hangs the UI)\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(gridBodyComp_default, null)\n  ))));\n};\nvar gridComp_default = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(GridComp);\n\n// packages/ag-grid-react/src/reactUi/renderStatusService.tsx\n\nvar RenderStatusService = class extends ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.BeanStub {\n  wireBeans(beans) {\n    this.ctrlsService = beans.ctrlsService;\n  }\n  areHeaderCellsRendered() {\n    return this.ctrlsService.getHeaderRowContainerCtrls().every((container) => container.getAllCtrls().every((ctrl) => ctrl.areCellsRendered()));\n  }\n};\n\n// packages/ag-grid-react/src/reactUi/agGridReactUi.tsx\nvar AgGridReactUi = (props) => {\n  const apiRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const eGui = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const portalManager = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const destroyFuncs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  const whenReadyFuncs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  const prevProps = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(props);\n  const frameworkOverridesRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const gridIdRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const ready = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  const [context, setContext] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0);\n  const [, setPortalRefresher] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eGui.current = eRef;\n    if (!eRef) {\n      destroyFuncs.current.forEach((f) => f());\n      destroyFuncs.current.length = 0;\n      return;\n    }\n    const modules = props.modules || [];\n    if (!portalManager.current) {\n      portalManager.current = new PortalManager(\n        () => setPortalRefresher((prev) => prev + 1),\n        props.componentWrappingElement,\n        props.maxComponentCreationTimeMs\n      );\n      destroyFuncs.current.push(() => {\n        portalManager.current?.destroy();\n        portalManager.current = null;\n      });\n    }\n    const mergedGridOps = (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._combineAttributesAndGridOptions)(props.gridOptions, props);\n    const processQueuedUpdates = () => {\n      if (ready.current) {\n        const getFn = () => frameworkOverridesRef.current?.shouldQueueUpdates() ? void 0 : whenReadyFuncs.current.shift();\n        let fn = getFn();\n        while (fn) {\n          fn();\n          fn = getFn();\n        }\n      }\n    };\n    const frameworkOverrides = new ReactFrameworkOverrides(processQueuedUpdates);\n    frameworkOverridesRef.current = frameworkOverrides;\n    const renderStatusService = new RenderStatusService();\n    const gridParams = {\n      providedBeanInstances: {\n        frameworkComponentWrapper: new ReactFrameworkComponentWrapper(\n          portalManager.current,\n          mergedGridOps.reactiveCustomComponents ?? (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._getGlobalGridOption)(\"reactiveCustomComponents\") ?? true\n        ),\n        renderStatusService\n      },\n      modules,\n      frameworkOverrides\n    };\n    const createUiCallback = (context2) => {\n      setContext(context2);\n      context2.createBean(renderStatusService);\n      destroyFuncs.current.push(() => {\n        context2.destroy();\n      });\n      context2.getBean(\"ctrlsService\").whenReady(\n        {\n          addDestroyFunc: (func) => {\n            destroyFuncs.current.push(func);\n          }\n        },\n        () => {\n          if (context2.isDestroyed()) {\n            return;\n          }\n          const api = apiRef.current;\n          if (api) {\n            props.setGridApi?.(api);\n          }\n        }\n      );\n    };\n    const acceptChangesCallback = (context2) => {\n      context2.getBean(\"ctrlsService\").whenReady(\n        {\n          addDestroyFunc: (func) => {\n            destroyFuncs.current.push(func);\n          }\n        },\n        () => {\n          whenReadyFuncs.current.forEach((f) => f());\n          whenReadyFuncs.current.length = 0;\n          ready.current = true;\n        }\n      );\n    };\n    const gridCoreCreator = new ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.GridCoreCreator();\n    mergedGridOps.gridId ?? (mergedGridOps.gridId = gridIdRef.current);\n    apiRef.current = gridCoreCreator.create(\n      eRef,\n      mergedGridOps,\n      createUiCallback,\n      acceptChangesCallback,\n      gridParams\n    );\n    destroyFuncs.current.push(() => {\n      apiRef.current = void 0;\n    });\n    if (apiRef.current) {\n      gridIdRef.current = apiRef.current.getGridId();\n    }\n  }, []);\n  const style = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return {\n      height: \"100%\",\n      ...props.containerStyle || {}\n    };\n  }, [props.containerStyle]);\n  const processWhenReady = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((func) => {\n    if (ready.current && !frameworkOverridesRef.current?.shouldQueueUpdates()) {\n      func();\n    } else {\n      whenReadyFuncs.current.push(func);\n    }\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const changes = extractGridPropertyChanges(prevProps.current, props);\n    prevProps.current = props;\n    processWhenReady(() => {\n      if (apiRef.current) {\n        (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._processOnChange)(changes, apiRef.current);\n      }\n    });\n  }, [props]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { style, className: props.className, ref: setRef2 }, context && !context.isDestroyed() ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(gridComp_default, { context }) : null, portalManager.current?.getPortals() ?? null);\n};\nfunction extractGridPropertyChanges(prevProps, nextProps) {\n  const changes = {};\n  Object.keys(nextProps).forEach((propKey) => {\n    const propValue = nextProps[propKey];\n    if (prevProps[propKey] !== propValue) {\n      changes[propKey] = propValue;\n    }\n  });\n  return changes;\n}\nvar ReactFrameworkComponentWrapper = class extends ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.BaseComponentWrapper {\n  constructor(parent, reactiveCustomComponents) {\n    super();\n    this.parent = parent;\n    this.reactiveCustomComponents = reactiveCustomComponents;\n  }\n  createWrapper(UserReactComponent, componentType) {\n    if (this.reactiveCustomComponents) {\n      const getComponentClass = (propertyName) => {\n        switch (propertyName) {\n          case \"filter\":\n            return FilterComponentWrapper;\n          case \"floatingFilterComponent\":\n            return FloatingFilterComponentWrapper;\n          case \"dateComponent\":\n            return DateComponentWrapper;\n          case \"dragAndDropImageComponent\":\n            return DragAndDropImageComponentWrapper;\n          case \"loadingOverlayComponent\":\n            return LoadingOverlayComponentWrapper;\n          case \"noRowsOverlayComponent\":\n            return NoRowsOverlayComponentWrapper;\n          case \"statusPanel\":\n            return StatusPanelComponentWrapper;\n          case \"toolPanel\":\n            return ToolPanelComponentWrapper;\n          case \"menuItem\":\n            return MenuItemComponentWrapper;\n          case \"cellRenderer\":\n            return CellRendererComponentWrapper;\n        }\n      };\n      const ComponentClass = getComponentClass(componentType.propertyName);\n      if (ComponentClass) {\n        return new ComponentClass(UserReactComponent, this.parent, componentType);\n      }\n    } else {\n      switch (componentType.propertyName) {\n        case \"filter\":\n        case \"floatingFilterComponent\":\n        case \"dateComponent\":\n        case \"dragAndDropImageComponent\":\n        case \"loadingOverlayComponent\":\n        case \"noRowsOverlayComponent\":\n        case \"statusPanel\":\n        case \"toolPanel\":\n        case \"menuItem\":\n        case \"cellRenderer\":\n          warnReactiveCustomComponents();\n          break;\n      }\n    }\n    const suppressFallbackMethods = !componentType.cellRenderer && componentType.propertyName !== \"toolPanel\";\n    return new ReactComponent(UserReactComponent, this.parent, componentType, suppressFallbackMethods);\n  }\n};\nvar DetailCellRenderer = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((props, ref) => {\n  const { ctrlsFactory, context, gos, resizeObserverService, rowModel } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BeansContext);\n  const [cssClasses, setCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new CssClasses());\n  const [gridCssClasses, setGridCssClasses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new CssClasses());\n  const [detailGridOptions, setDetailGridOptions] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const [detailRowData, setDetailRowData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const ctrlRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const eGuiRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const resizeObserverDestroyFunc = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const parentModules = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.ModuleRegistry.__getGridRegisteredModules(props.api.getGridId()), [props]);\n  const topClassName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => cssClasses.toString() + \" ag-details-row\", [cssClasses]);\n  const gridClassName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => gridCssClasses.toString() + \" ag-details-grid\", [gridCssClasses]);\n  if (ref) {\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref, () => ({\n      refresh() {\n        return ctrlRef.current?.refresh() ?? false;\n      }\n    }));\n  }\n  if (props.template) {\n    (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._warnOnce)(\n      \"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/\"\n    );\n  }\n  const setRef2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eRef) => {\n    eGuiRef.current = eRef;\n    if (!eRef) {\n      ctrlRef.current = context.destroyBean(ctrlRef.current);\n      resizeObserverDestroyFunc.current?.();\n      return;\n    }\n    const compProxy = {\n      addOrRemoveCssClass: (name, on) => setCssClasses((prev) => prev.setClass(name, on)),\n      addOrRemoveDetailGridCssClass: (name, on) => setGridCssClasses((prev) => prev.setClass(name, on)),\n      setDetailGrid: (gridOptions) => setDetailGridOptions(gridOptions),\n      setRowData: (rowData) => setDetailRowData(rowData),\n      getGui: () => eGuiRef.current\n    };\n    const ctrl = ctrlsFactory.getInstance(\"detailCellRenderer\");\n    if (!ctrl) {\n      return;\n    }\n    context.createBean(ctrl);\n    ctrl.init(compProxy, props);\n    ctrlRef.current = ctrl;\n    if (gos.get(\"detailRowAutoHeight\")) {\n      const checkRowSizeFunc = () => {\n        if (eGuiRef.current == null) {\n          return;\n        }\n        const clientHeight = eGuiRef.current.clientHeight;\n        if (clientHeight != null && clientHeight > 0) {\n          const updateRowHeightFunc = () => {\n            props.node.setRowHeight(clientHeight);\n            if ((0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._isClientSideRowModel)(gos) || (0,ag_grid_community__WEBPACK_IMPORTED_MODULE_1__._isServerSideRowModel)(gos)) {\n              rowModel.onRowHeightChanged();\n            }\n          };\n          setTimeout(updateRowHeightFunc, 0);\n        }\n      };\n      resizeObserverDestroyFunc.current = resizeObserverService.observeResize(eRef, checkRowSizeFunc);\n      checkRowSizeFunc();\n    }\n  }, []);\n  const setGridApi = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((api) => {\n    ctrlRef.current?.registerDetailWithMaster(api);\n  }, []);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: topClassName, ref: setRef2 }, detailGridOptions && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    AgGridReactUi,\n    {\n      className: gridClassName,\n      ...detailGridOptions,\n      modules: parentModules,\n      rowData: detailRowData,\n      setGridApi\n    }\n  ));\n});\nvar ReactFrameworkOverrides = class extends ag_grid_community__WEBPACK_IMPORTED_MODULE_1__.VanillaFrameworkOverrides {\n  constructor(processQueuedUpdates) {\n    super(\"react\");\n    this.processQueuedUpdates = processQueuedUpdates;\n    this.queueUpdates = false;\n    this.frameworkComponents = {\n      agGroupCellRenderer: groupCellRenderer_default,\n      agGroupRowRenderer: groupCellRenderer_default,\n      agDetailCellRenderer: DetailCellRenderer\n    };\n    this.wrapIncoming = (callback, source) => {\n      if (source === \"ensureVisible\") {\n        return runWithoutFlushSync(callback);\n      }\n      return callback();\n    };\n    this.renderingEngine = \"react\";\n  }\n  frameworkComponent(name) {\n    return this.frameworkComponents[name];\n  }\n  isFrameworkComponent(comp) {\n    if (!comp) {\n      return false;\n    }\n    const prototype = comp.prototype;\n    const isJsComp = prototype && \"getGui\" in prototype;\n    return !isJsComp;\n  }\n  getLockOnRefresh() {\n    this.queueUpdates = true;\n  }\n  releaseLockOnRefresh() {\n    this.queueUpdates = false;\n    this.processQueuedUpdates();\n  }\n  shouldQueueUpdates() {\n    return this.queueUpdates;\n  }\n  runWhenReadyAsync() {\n    return isReact19();\n  }\n};\n\n// packages/ag-grid-react/src/agGridReact.tsx\nvar AgGridReact = class extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor() {\n    super(...arguments);\n    this.apiListeners = [];\n    this.setGridApi = (api) => {\n      this.api = api;\n      this.apiListeners.forEach((listener) => listener(api));\n    };\n  }\n  registerApiListener(listener) {\n    this.apiListeners.push(listener);\n  }\n  componentWillUnmount() {\n    this.apiListeners.length = 0;\n  }\n  render() {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(AgGridReactUi, { ...this.props, setGridApi: this.setGridApi });\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/interfaces.ts\n\nfunction useGridCustomComponent(methods) {\n  const { setMethods } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(CustomContext);\n  setMethods(methods);\n}\nfunction useGridCellEditor(callbacks) {\n  useGridCustomComponent(callbacks);\n}\nfunction useGridDate(callbacks) {\n  return useGridCustomComponent(callbacks);\n}\nfunction useGridFilter(callbacks) {\n  return useGridCustomComponent(callbacks);\n}\nfunction useGridFloatingFilter(callbacks) {\n  useGridCustomComponent(callbacks);\n}\nfunction useGridMenuItem(callbacks) {\n  useGridCustomComponent(callbacks);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWctZ3JpZC1yZWFjdC9kaXN0L3BhY2thZ2UvaW5kZXguZXNtLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQzJDOztBQUUzQztBQVkyQjtBQVVaOztBQUVmO0FBQ2tEO0FBVW5DOztBQUVmO0FBQzBCO0FBQzFCLG1CQUFtQiwwREFBbUIsR0FBRzs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkI7QUFDTTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsb0RBQWM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksMERBQWtCO0FBQ3RCLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlCQUFpQjtBQUNuQztBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUJBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpQkFBaUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QixpREFBVTtBQUNsQyxVQUFVLHdCQUF3QixFQUFFLGlEQUFVO0FBQzlDLGVBQWUsNkNBQU07QUFDckIsb0JBQW9CLDZDQUFNO0FBQzFCLHVCQUF1Qiw2Q0FBTTtBQUM3Qix1QkFBdUIsNkNBQU07QUFDN0IseUJBQXlCLDZDQUFNO0FBQy9CLGtCQUFrQiw2Q0FBTTtBQUN4QixrREFBa0QsK0NBQVE7QUFDMUQsc0NBQXNDLCtDQUFRO0FBQzlDLDRCQUE0QiwrQ0FBUTtBQUNwQyxzQ0FBc0MsK0NBQVE7QUFDOUMsc0RBQXNELCtDQUFRO0FBQzlELDBEQUEwRCwrQ0FBUTtBQUNsRSxzREFBc0QsK0NBQVE7QUFDOUQsRUFBRSwwREFBbUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsc0RBQWU7QUFDakI7QUFDQSxHQUFHO0FBQ0gsa0JBQWtCLGtEQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxvQkFBb0IsOENBQU8sMEJBQTBCLHNCQUFzQjtBQUMzRSw0QkFBNEIsOENBQU8sNEJBQTRCLDhCQUE4QjtBQUM3Riw4QkFBOEIsOENBQU87QUFDckMsaUNBQWlDLGdDQUFnQztBQUNqRTtBQUNBO0FBQ0EsNEJBQTRCLDhDQUFPLDRCQUE0Qiw4QkFBOEI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdFQUFhO0FBQ3BDLHlCQUF5QiwwREFBb0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMkNBQTJDO0FBQ3RFLEtBQUs7QUFDTCxvQkFBb0IsMERBQW9CLFdBQVcsaURBQWlEO0FBQ3BHLG9CQUFvQiwwREFBb0IsV0FBVyxxREFBcUQ7QUFDeEcsb0JBQW9CLDBEQUFvQixXQUFXLGlEQUFpRDtBQUNwRyxvQkFBb0IsMERBQW9CLFdBQVcsNkNBQTZDLDhCQUE4QiwwREFBb0IsQ0FBQyx1REFBZSx3REFBd0QsMERBQW9CLGVBQWUsNEJBQTRCO0FBQ3pSLG9CQUFvQiwwREFBb0IsV0FBVyxtQ0FBbUM7QUFDdEY7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDNEQ7O0FBRTVEO0FBQ3VFOztBQUV2RTtBQUNzQztBQUN0QyxvQkFBb0Isb0RBQWE7QUFDakM7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLFVBQVUsb0VBQW9FO0FBQzlFLFdBQVcsZUFBZSxjQUFjLCtDQUFTO0FBQ2pELEVBQUUsZ0RBQVM7QUFDWDtBQUNBLEdBQUc7QUFDSCx5QkFBeUIsMERBQW9CLDJCQUEyQixTQUFTLGNBQWMsa0JBQWtCLDBEQUFvQix5QkFBeUIsZUFBZTtBQUM3SztBQUNBLGdDQUFnQywyQ0FBSTs7QUFFcEM7QUFDeUQ7QUFDbkI7QUFDRzs7QUFFekM7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFVBQVU7QUFDbEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELHdEQUFTLHNCQUFzQix3REFBUztBQUNqRztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDREQUFTO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sNERBQVM7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3REFBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLDBCQUEwQjtBQUM1RixrQkFBa0IsdURBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG9EQUFhO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsS0FBSztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLEtBQUs7QUFDaEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHdEQUFVO0FBQzdDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHdEQUFVO0FBQy9CO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsd0RBQVU7QUFDekI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzREO0FBQzVEO0FBQ0E7QUFDQSxpQ0FBaUMsd0RBQVU7QUFDM0M7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxRjtBQUNyRjtBQUNBLHVEQUF1RCx3REFBVTtBQUNqRTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDREQUFVO0FBQ1o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTtBQUNBLENBQUM7QUFDRCw0Q0FBNEMsd0VBQXlCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdDQUFnQyw0Q0FBUztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMERBQXFCLGtCQUFrQiw0Q0FBNEM7QUFDOUc7QUFDQTs7QUFFQTtBQUNtRDtBQUNuRDtBQUNBLFVBQVUsYUFBYSxFQUFFLGlEQUFZO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXRSIsInNvdXJjZXMiOlsid2VicGFjazovL0xpc3Rlbi8uL25vZGVfbW9kdWxlcy9hZy1ncmlkLXJlYWN0L2Rpc3QvcGFja2FnZS9pbmRleC5lc20ubWpzPzM5MmEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvYWdHcmlkUmVhY3QudHN4XG5pbXBvcnQgUmVhY3QxOSwgeyBDb21wb25lbnQgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9hZ0dyaWRSZWFjdFVpLnRzeFxuaW1wb3J0IHtcbiAgQmFzZUNvbXBvbmVudFdyYXBwZXIsXG4gIEdyaWRDb3JlQ3JlYXRvcixcbiAgTW9kdWxlUmVnaXN0cnksXG4gIFZhbmlsbGFGcmFtZXdvcmtPdmVycmlkZXMsXG4gIF9jb21iaW5lQXR0cmlidXRlc0FuZEdyaWRPcHRpb25zLFxuICBfZ2V0R2xvYmFsR3JpZE9wdGlvbixcbiAgX2lzQ2xpZW50U2lkZVJvd01vZGVsLFxuICBfaXNTZXJ2ZXJTaWRlUm93TW9kZWwsXG4gIF9wcm9jZXNzT25DaGFuZ2UsXG4gIF93YXJuT25jZSBhcyBfd2Fybk9uY2UzXG59IGZyb20gXCJhZy1ncmlkLWNvbW11bml0eVwiO1xuaW1wb3J0IFJlYWN0MTgsIHtcbiAgZm9yd2FyZFJlZiBhcyBmb3J3YXJkUmVmMyxcbiAgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2sxNSxcbiAgdXNlQ29udGV4dCBhcyB1c2VDb250ZXh0MTUsXG4gIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3Q5LFxuICB1c2VJbXBlcmF0aXZlSGFuZGxlIGFzIHVzZUltcGVyYXRpdmVIYW5kbGUzLFxuICB1c2VNZW1vIGFzIHVzZU1lbW8xMixcbiAgdXNlUmVmIGFzIHVzZVJlZjE1LFxuICB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTE2XG59IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9yZWFjdFVpL2NlbGxSZW5kZXJlci9ncm91cENlbGxSZW5kZXJlci50c3hcbmltcG9ydCB7IF9lc2NhcGVTdHJpbmcgfSBmcm9tIFwiYWctZ3JpZC1jb21tdW5pdHlcIjtcbmltcG9ydCBSZWFjdDMsIHtcbiAgZm9yd2FyZFJlZixcbiAgdXNlQ2FsbGJhY2ssXG4gIHVzZUNvbnRleHQsXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUsXG4gIHVzZUxheW91dEVmZmVjdCxcbiAgdXNlTWVtbyxcbiAgdXNlUmVmLFxuICB1c2VTdGF0ZVxufSBmcm9tIFwicmVhY3RcIjtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9iZWFuc0NvbnRleHQudHN4XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG52YXIgQmVhbnNDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7fSk7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvanNDb21wLnRzeFxudmFyIHNob3dKc0NvbXAgPSAoY29tcERldGFpbHMsIGNvbnRleHQsIGVQYXJlbnQsIHJlZikgPT4ge1xuICBjb25zdCBkb05vdGhpbmcgPSAhY29tcERldGFpbHMgfHwgY29tcERldGFpbHMuY29tcG9uZW50RnJvbUZyYW1ld29yayB8fCBjb250ZXh0LmlzRGVzdHJveWVkKCk7XG4gIGlmIChkb05vdGhpbmcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgcHJvbWlzZSA9IGNvbXBEZXRhaWxzLm5ld0FnU3RhY2tJbnN0YW5jZSgpO1xuICBpZiAocHJvbWlzZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBjb21wO1xuICBsZXQgY29tcEd1aTtcbiAgbGV0IGRlc3Ryb3llZCA9IGZhbHNlO1xuICBwcm9taXNlLnRoZW4oKGMpID0+IHtcbiAgICBpZiAoZGVzdHJveWVkKSB7XG4gICAgICBjb250ZXh0LmRlc3Ryb3lCZWFuKGMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb21wID0gYztcbiAgICBjb21wR3VpID0gY29tcC5nZXRHdWkoKTtcbiAgICBlUGFyZW50LmFwcGVuZENoaWxkKGNvbXBHdWkpO1xuICAgIHNldFJlZihyZWYsIGNvbXApO1xuICB9KTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBkZXN0cm95ZWQgPSB0cnVlO1xuICAgIGlmICghY29tcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb21wR3VpPy5wYXJlbnRFbGVtZW50Py5yZW1vdmVDaGlsZChjb21wR3VpKTtcbiAgICBjb250ZXh0LmRlc3Ryb3lCZWFuKGNvbXApO1xuICAgIGlmIChyZWYpIHtcbiAgICAgIHNldFJlZihyZWYsIHZvaWQgMCk7XG4gICAgfVxuICB9O1xufTtcbnZhciBzZXRSZWYgPSAocmVmLCB2YWx1ZSkgPT4ge1xuICBpZiAoIXJlZikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAocmVmIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICBjb25zdCByZWZDYWxsYmFjayA9IHJlZjtcbiAgICByZWZDYWxsYmFjayh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcmVmT2JqID0gcmVmO1xuICAgIHJlZk9iai5jdXJyZW50ID0gdmFsdWU7XG4gIH1cbn07XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvdXRpbHMudHN4XG5pbXBvcnQgUmVhY3QyIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbnZhciBjbGFzc2VzTGlzdCA9ICguLi5saXN0KSA9PiB7XG4gIGNvbnN0IGZpbHRlcmVkID0gbGlzdC5maWx0ZXIoKHMpID0+IHMgIT0gbnVsbCAmJiBzICE9PSBcIlwiKTtcbiAgcmV0dXJuIGZpbHRlcmVkLmpvaW4oXCIgXCIpO1xufTtcbnZhciBDc3NDbGFzc2VzID0gY2xhc3MgX0Nzc0NsYXNzZXMge1xuICBjb25zdHJ1Y3RvciguLi5pbml0aWFsQ2xhc3Nlcykge1xuICAgIHRoaXMuY2xhc3Nlc01hcCA9IHt9O1xuICAgIGluaXRpYWxDbGFzc2VzLmZvckVhY2goKGNsYXNzTmFtZSkgPT4ge1xuICAgICAgdGhpcy5jbGFzc2VzTWFwW2NsYXNzTmFtZV0gPSB0cnVlO1xuICAgIH0pO1xuICB9XG4gIHNldENsYXNzKGNsYXNzTmFtZSwgb24pIHtcbiAgICBjb25zdCBub3RoaW5nSGFzQ2hhbmdlZCA9ICEhdGhpcy5jbGFzc2VzTWFwW2NsYXNzTmFtZV0gPT0gb247XG4gICAgaWYgKG5vdGhpbmdIYXNDaGFuZ2VkKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY29uc3QgcmVzID0gbmV3IF9Dc3NDbGFzc2VzKCk7XG4gICAgcmVzLmNsYXNzZXNNYXAgPSB7IC4uLnRoaXMuY2xhc3Nlc01hcCB9O1xuICAgIHJlcy5jbGFzc2VzTWFwW2NsYXNzTmFtZV0gPSBvbjtcbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIHRvU3RyaW5nKCkge1xuICAgIGNvbnN0IHJlcyA9IE9iamVjdC5rZXlzKHRoaXMuY2xhc3Nlc01hcCkuZmlsdGVyKChrZXkpID0+IHRoaXMuY2xhc3Nlc01hcFtrZXldKS5qb2luKFwiIFwiKTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG59O1xudmFyIGlzQ29tcG9uZW50U3RhdGVsZXNzID0gKENvbXBvbmVudDIpID0+IHtcbiAgY29uc3QgaGFzU3ltYm9sID0gKCkgPT4gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5mb3I7XG4gIGNvbnN0IGdldE1lbW9UeXBlID0gKCkgPT4gaGFzU3ltYm9sKCkgPyBTeW1ib2wuZm9yKFwicmVhY3QubWVtb1wiKSA6IDYwMTE1O1xuICByZXR1cm4gdHlwZW9mIENvbXBvbmVudDIgPT09IFwiZnVuY3Rpb25cIiAmJiAhKENvbXBvbmVudDIucHJvdG90eXBlICYmIENvbXBvbmVudDIucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQpIHx8IHR5cGVvZiBDb21wb25lbnQyID09PSBcIm9iamVjdFwiICYmIENvbXBvbmVudDIuJCR0eXBlb2YgPT09IGdldE1lbW9UeXBlKCk7XG59O1xudmFyIHJlYWN0VmVyc2lvbiA9IFJlYWN0Mi52ZXJzaW9uPy5zcGxpdChcIi5cIilbMF07XG52YXIgaXNSZWFjdFZlcnNpb24xN01pbnVzID0gcmVhY3RWZXJzaW9uID09PSBcIjE2XCIgfHwgcmVhY3RWZXJzaW9uID09PSBcIjE3XCI7XG5mdW5jdGlvbiBpc1JlYWN0MTkoKSB7XG4gIHJldHVybiByZWFjdFZlcnNpb24gPT09IFwiMTlcIjtcbn1cbnZhciBkaXNhYmxlRmx1c2hTeW5jID0gZmFsc2U7XG5mdW5jdGlvbiBydW5XaXRob3V0Rmx1c2hTeW5jKGZ1bmMpIHtcbiAgaWYgKCFkaXNhYmxlRmx1c2hTeW5jKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiBkaXNhYmxlRmx1c2hTeW5jID0gZmFsc2UsIDApO1xuICB9XG4gIGRpc2FibGVGbHVzaFN5bmMgPSB0cnVlO1xuICByZXR1cm4gZnVuYygpO1xufVxudmFyIGFnRmx1c2hTeW5jID0gKHVzZUZsdXNoU3luYywgZm4pID0+IHtcbiAgaWYgKCFpc1JlYWN0VmVyc2lvbjE3TWludXMgJiYgdXNlRmx1c2hTeW5jICYmICFkaXNhYmxlRmx1c2hTeW5jKSB7XG4gICAgUmVhY3RET00uZmx1c2hTeW5jKGZuKTtcbiAgfSBlbHNlIHtcbiAgICBmbigpO1xuICB9XG59O1xuZnVuY3Rpb24gZ2V0TmV4dFZhbHVlSWZEaWZmZXJlbnQocHJldiwgbmV4dCwgbWFpbnRhaW5PcmRlcikge1xuICBpZiAobmV4dCA9PSBudWxsIHx8IHByZXYgPT0gbnVsbCkge1xuICAgIHJldHVybiBuZXh0O1xuICB9XG4gIGlmIChwcmV2ID09PSBuZXh0IHx8IG5leHQubGVuZ3RoID09PSAwICYmIHByZXYubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHByZXY7XG4gIH1cbiAgaWYgKG1haW50YWluT3JkZXIgfHwgcHJldi5sZW5ndGggPT09IDAgJiYgbmV4dC5sZW5ndGggPiAwIHx8IHByZXYubGVuZ3RoID4gMCAmJiBuZXh0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBuZXh0O1xuICB9XG4gIGNvbnN0IG9sZFZhbHVlcyA9IFtdO1xuICBjb25zdCBuZXdWYWx1ZXMgPSBbXTtcbiAgY29uc3QgcHJldk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGNvbnN0IG5leHRNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG5leHQubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjID0gbmV4dFtpXTtcbiAgICBuZXh0TWFwLnNldChjLmluc3RhbmNlSWQsIGMpO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJldi5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGMgPSBwcmV2W2ldO1xuICAgIHByZXZNYXAuc2V0KGMuaW5zdGFuY2VJZCwgYyk7XG4gICAgaWYgKG5leHRNYXAuaGFzKGMuaW5zdGFuY2VJZCkpIHtcbiAgICAgIG9sZFZhbHVlcy5wdXNoKGMpO1xuICAgIH1cbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IG5leHQubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjID0gbmV4dFtpXTtcbiAgICBjb25zdCBpbnN0YW5jZUlkID0gYy5pbnN0YW5jZUlkO1xuICAgIGlmICghcHJldk1hcC5oYXMoaW5zdGFuY2VJZCkpIHtcbiAgICAgIG5ld1ZhbHVlcy5wdXNoKGMpO1xuICAgIH1cbiAgfVxuICBpZiAob2xkVmFsdWVzLmxlbmd0aCA9PT0gcHJldi5sZW5ndGggJiYgbmV3VmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBwcmV2O1xuICB9XG4gIGlmIChvbGRWYWx1ZXMubGVuZ3RoID09PSAwICYmIG5ld1ZhbHVlcy5sZW5ndGggPT09IG5leHQubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG5leHQ7XG4gIH1cbiAgaWYgKG9sZFZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbmV3VmFsdWVzO1xuICB9XG4gIGlmIChuZXdWYWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG9sZFZhbHVlcztcbiAgfVxuICByZXR1cm4gWy4uLm9sZFZhbHVlcywgLi4ubmV3VmFsdWVzXTtcbn1cblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9jZWxsUmVuZGVyZXIvZ3JvdXBDZWxsUmVuZGVyZXIudHN4XG52YXIgR3JvdXBDZWxsUmVuZGVyZXIgPSBmb3J3YXJkUmVmKChwcm9wcywgcmVmKSA9PiB7XG4gIGNvbnN0IHsgY3RybHNGYWN0b3J5LCBjb250ZXh0IH0gPSB1c2VDb250ZXh0KEJlYW5zQ29udGV4dCk7XG4gIGNvbnN0IGVHdWkgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGVWYWx1ZVJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgZUNoZWNrYm94UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBlRXhwYW5kZWRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGVDb250cmFjdGVkUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBjdHJsUmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IFtpbm5lckNvbXBEZXRhaWxzLCBzZXRJbm5lckNvbXBEZXRhaWxzXSA9IHVzZVN0YXRlKCk7XG4gIGNvbnN0IFtjaGlsZENvdW50LCBzZXRDaGlsZENvdW50XSA9IHVzZVN0YXRlKCk7XG4gIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdXNlU3RhdGUoKTtcbiAgY29uc3QgW2Nzc0NsYXNzZXMsIHNldENzc0NsYXNzZXNdID0gdXNlU3RhdGUoKCkgPT4gbmV3IENzc0NsYXNzZXMoKSk7XG4gIGNvbnN0IFtleHBhbmRlZENzc0NsYXNzZXMsIHNldEV4cGFuZGVkQ3NzQ2xhc3Nlc10gPSB1c2VTdGF0ZSgoKSA9PiBuZXcgQ3NzQ2xhc3NlcyhcImFnLWhpZGRlblwiKSk7XG4gIGNvbnN0IFtjb250cmFjdGVkQ3NzQ2xhc3Nlcywgc2V0Q29udHJhY3RlZENzc0NsYXNzZXNdID0gdXNlU3RhdGUoKCkgPT4gbmV3IENzc0NsYXNzZXMoXCJhZy1oaWRkZW5cIikpO1xuICBjb25zdCBbY2hlY2tib3hDc3NDbGFzc2VzLCBzZXRDaGVja2JveENzc0NsYXNzZXNdID0gdXNlU3RhdGUoKCkgPT4gbmV3IENzc0NsYXNzZXMoXCJhZy1pbnZpc2libGVcIikpO1xuICB1c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBmb3JjZSBuZXcgaW5zdGFuY2Ugd2hlbiBncmlkIHRyaWVzIHRvIHJlZnJlc2hcbiAgICAgIHJlZnJlc2goKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gc2hvd0pzQ29tcChpbm5lckNvbXBEZXRhaWxzLCBjb250ZXh0LCBlVmFsdWVSZWYuY3VycmVudCk7XG4gIH0sIFtpbm5lckNvbXBEZXRhaWxzXSk7XG4gIGNvbnN0IHNldFJlZjIgPSB1c2VDYWxsYmFjaygoZVJlZikgPT4ge1xuICAgIGVHdWkuY3VycmVudCA9IGVSZWY7XG4gICAgaWYgKCFlUmVmKSB7XG4gICAgICBjdHJsUmVmLmN1cnJlbnQgPSBjb250ZXh0LmRlc3Ryb3lCZWFuKGN0cmxSZWYuY3VycmVudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbXBQcm94eSA9IHtcbiAgICAgIHNldElubmVyUmVuZGVyZXI6IChkZXRhaWxzLCB2YWx1ZVRvRGlzcGxheSkgPT4ge1xuICAgICAgICBzZXRJbm5lckNvbXBEZXRhaWxzKGRldGFpbHMpO1xuICAgICAgICBzZXRWYWx1ZSh2YWx1ZVRvRGlzcGxheSk7XG4gICAgICB9LFxuICAgICAgc2V0Q2hpbGRDb3VudDogKGNvdW50KSA9PiBzZXRDaGlsZENvdW50KGNvdW50KSxcbiAgICAgIGFkZE9yUmVtb3ZlQ3NzQ2xhc3M6IChuYW1lLCBvbikgPT4gc2V0Q3NzQ2xhc3NlcygocHJldikgPT4gcHJldi5zZXRDbGFzcyhuYW1lLCBvbikpLFxuICAgICAgc2V0Q29udHJhY3RlZERpc3BsYXllZDogKGRpc3BsYXllZCkgPT4gc2V0Q29udHJhY3RlZENzc0NsYXNzZXMoKHByZXYpID0+IHByZXYuc2V0Q2xhc3MoXCJhZy1oaWRkZW5cIiwgIWRpc3BsYXllZCkpLFxuICAgICAgc2V0RXhwYW5kZWREaXNwbGF5ZWQ6IChkaXNwbGF5ZWQpID0+IHNldEV4cGFuZGVkQ3NzQ2xhc3NlcygocHJldikgPT4gcHJldi5zZXRDbGFzcyhcImFnLWhpZGRlblwiLCAhZGlzcGxheWVkKSksXG4gICAgICBzZXRDaGVja2JveFZpc2libGU6ICh2aXNpYmxlKSA9PiBzZXRDaGVja2JveENzc0NsYXNzZXMoKHByZXYpID0+IHByZXYuc2V0Q2xhc3MoXCJhZy1pbnZpc2libGVcIiwgIXZpc2libGUpKVxuICAgIH07XG4gICAgY29uc3QgZ3JvdXBDZWxsUmVuZGVyZXJDdHJsID0gY3RybHNGYWN0b3J5LmdldEluc3RhbmNlKFwiZ3JvdXBDZWxsUmVuZGVyZXJDdHJsXCIpO1xuICAgIGlmIChncm91cENlbGxSZW5kZXJlckN0cmwpIHtcbiAgICAgIGN0cmxSZWYuY3VycmVudCA9IGNvbnRleHQuY3JlYXRlQmVhbihncm91cENlbGxSZW5kZXJlckN0cmwpO1xuICAgICAgY3RybFJlZi5jdXJyZW50LmluaXQoXG4gICAgICAgIGNvbXBQcm94eSxcbiAgICAgICAgZVJlZixcbiAgICAgICAgZUNoZWNrYm94UmVmLmN1cnJlbnQsXG4gICAgICAgIGVFeHBhbmRlZFJlZi5jdXJyZW50LFxuICAgICAgICBlQ29udHJhY3RlZFJlZi5jdXJyZW50LFxuICAgICAgICBHcm91cENlbGxSZW5kZXJlcixcbiAgICAgICAgcHJvcHNcbiAgICAgICk7XG4gICAgfVxuICB9LCBbXSk7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IHVzZU1lbW8oKCkgPT4gYGFnLWNlbGwtd3JhcHBlciAke2Nzc0NsYXNzZXMudG9TdHJpbmcoKX1gLCBbY3NzQ2xhc3Nlc10pO1xuICBjb25zdCBleHBhbmRlZENsYXNzTmFtZSA9IHVzZU1lbW8oKCkgPT4gYGFnLWdyb3VwLWV4cGFuZGVkICR7ZXhwYW5kZWRDc3NDbGFzc2VzLnRvU3RyaW5nKCl9YCwgW2V4cGFuZGVkQ3NzQ2xhc3Nlc10pO1xuICBjb25zdCBjb250cmFjdGVkQ2xhc3NOYW1lID0gdXNlTWVtbyhcbiAgICAoKSA9PiBgYWctZ3JvdXAtY29udHJhY3RlZCAke2NvbnRyYWN0ZWRDc3NDbGFzc2VzLnRvU3RyaW5nKCl9YCxcbiAgICBbY29udHJhY3RlZENzc0NsYXNzZXNdXG4gICk7XG4gIGNvbnN0IGNoZWNrYm94Q2xhc3NOYW1lID0gdXNlTWVtbygoKSA9PiBgYWctZ3JvdXAtY2hlY2tib3ggJHtjaGVja2JveENzc0NsYXNzZXMudG9TdHJpbmcoKX1gLCBbY2hlY2tib3hDc3NDbGFzc2VzXSk7XG4gIGNvbnN0IHVzZUZ3UmVuZGVyZXIgPSBpbm5lckNvbXBEZXRhaWxzICYmIGlubmVyQ29tcERldGFpbHMuY29tcG9uZW50RnJvbUZyYW1ld29yaztcbiAgY29uc3QgRndSZW5kZXJlciA9IHVzZUZ3UmVuZGVyZXIgPyBpbm5lckNvbXBEZXRhaWxzLmNvbXBvbmVudENsYXNzIDogdm9pZCAwO1xuICBjb25zdCB1c2VWYWx1ZSA9IGlubmVyQ29tcERldGFpbHMgPT0gbnVsbCAmJiB2YWx1ZSAhPSBudWxsO1xuICBjb25zdCBlc2NhcGVkVmFsdWUgPSBfZXNjYXBlU3RyaW5nKHZhbHVlLCB0cnVlKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDMuY3JlYXRlRWxlbWVudChcbiAgICBcInNwYW5cIixcbiAgICB7XG4gICAgICBjbGFzc05hbWUsXG4gICAgICByZWY6IHNldFJlZjIsXG4gICAgICAuLi4hcHJvcHMuY29sRGVmID8geyByb2xlOiBjdHJsUmVmLmN1cnJlbnQ/LmdldENlbGxBcmlhUm9sZSgpIH0gOiB7fVxuICAgIH0sXG4gICAgLyogQF9fUFVSRV9fICovIFJlYWN0My5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogZXhwYW5kZWRDbGFzc05hbWUsIHJlZjogZUV4cGFuZGVkUmVmIH0pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDMuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNvbnRyYWN0ZWRDbGFzc05hbWUsIHJlZjogZUNvbnRyYWN0ZWRSZWYgfSksXG4gICAgLyogQF9fUFVSRV9fICovIFJlYWN0My5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogY2hlY2tib3hDbGFzc05hbWUsIHJlZjogZUNoZWNrYm94UmVmIH0pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDMuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiYWctZ3JvdXAtdmFsdWVcIiwgcmVmOiBlVmFsdWVSZWYgfSwgdXNlVmFsdWUgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0My5jcmVhdGVFbGVtZW50KFJlYWN0My5GcmFnbWVudCwgbnVsbCwgZXNjYXBlZFZhbHVlKSwgdXNlRndSZW5kZXJlciAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QzLmNyZWF0ZUVsZW1lbnQoRndSZW5kZXJlciwgeyAuLi5pbm5lckNvbXBEZXRhaWxzLnBhcmFtcyB9KSksXG4gICAgLyogQF9fUFVSRV9fICovIFJlYWN0My5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJhZy1ncm91cC1jaGlsZC1jb3VudFwiIH0sIGNoaWxkQ291bnQpXG4gICk7XG59KTtcbnZhciBncm91cENlbGxSZW5kZXJlcl9kZWZhdWx0ID0gR3JvdXBDZWxsUmVuZGVyZXI7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3NoYXJlZC9jdXN0b21Db21wL2N1c3RvbUNvbXBvbmVudFdyYXBwZXIudHNcbmltcG9ydCB7IEFnUHJvbWlzZSBhcyBBZ1Byb21pc2UyIH0gZnJvbSBcImFnLWdyaWQtY29tbXVuaXR5XCI7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvY3VzdG9tQ29tcC9jdXN0b21XcmFwcGVyQ29tcC50c3hcbmltcG9ydCBSZWFjdDQsIHsgbWVtbywgdXNlRWZmZWN0LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTIgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvc2hhcmVkL2N1c3RvbUNvbXAvY3VzdG9tQ29udGV4dC50c1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCB9IGZyb20gXCJyZWFjdFwiO1xudmFyIEN1c3RvbUNvbnRleHQgPSBjcmVhdGVDb250ZXh0KHtcbiAgc2V0TWV0aG9kczogKCkgPT4ge1xuICB9XG59KTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9jdXN0b21Db21wL2N1c3RvbVdyYXBwZXJDb21wLnRzeFxudmFyIEN1c3RvbVdyYXBwZXJDb21wID0gKHBhcmFtcykgPT4ge1xuICBjb25zdCB7IGluaXRpYWxQcm9wcywgYWRkVXBkYXRlQ2FsbGJhY2ssIEN1c3RvbUNvbXBvbmVudENsYXNzLCBzZXRNZXRob2RzIH0gPSBwYXJhbXM7XG4gIGNvbnN0IFt7IGtleSwgLi4ucHJvcHMgfSwgc2V0UHJvcHNdID0gdXNlU3RhdGUyKGluaXRpYWxQcm9wcyk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgYWRkVXBkYXRlQ2FsbGJhY2soKG5ld1Byb3BzKSA9PiBzZXRQcm9wcyhuZXdQcm9wcykpO1xuICB9LCBbXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q0LmNyZWF0ZUVsZW1lbnQoQ3VzdG9tQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogeyBzZXRNZXRob2RzIH0gfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NC5jcmVhdGVFbGVtZW50KEN1c3RvbUNvbXBvbmVudENsYXNzLCB7IGtleSwgLi4ucHJvcHMgfSkpO1xufTtcbnZhciBjdXN0b21XcmFwcGVyQ29tcF9kZWZhdWx0ID0gbWVtbyhDdXN0b21XcmFwcGVyQ29tcCk7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3NoYXJlZC9yZWFjdENvbXBvbmVudC50c1xuaW1wb3J0IHsgQWdQcm9taXNlLCBfd2Fybk9uY2UgfSBmcm9tIFwiYWctZ3JpZC1jb21tdW5pdHlcIjtcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNyZWF0ZVBvcnRhbCB9IGZyb20gXCJyZWFjdC1kb21cIjtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvc2hhcmVkL2tleUdlbmVyYXRvci50c1xudmFyIGNvdW50ZXIgPSAwO1xuZnVuY3Rpb24gZ2VuZXJhdGVOZXdLZXkoKSB7XG4gIHJldHVybiBgYWdQb3J0YWxLZXlfJHsrK2NvdW50ZXJ9YDtcbn1cblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvc2hhcmVkL3JlYWN0Q29tcG9uZW50LnRzXG52YXIgUmVhY3RDb21wb25lbnQgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlYWN0Q29tcG9uZW50LCBwb3J0YWxNYW5hZ2VyLCBjb21wb25lbnRUeXBlLCBzdXBwcmVzc0ZhbGxiYWNrTWV0aG9kcykge1xuICAgIHRoaXMucG9ydGFsID0gbnVsbDtcbiAgICB0aGlzLm9sZFBvcnRhbCA9IG51bGw7XG4gICAgdGhpcy5yZWFjdENvbXBvbmVudCA9IHJlYWN0Q29tcG9uZW50O1xuICAgIHRoaXMucG9ydGFsTWFuYWdlciA9IHBvcnRhbE1hbmFnZXI7XG4gICAgdGhpcy5jb21wb25lbnRUeXBlID0gY29tcG9uZW50VHlwZTtcbiAgICB0aGlzLnN1cHByZXNzRmFsbGJhY2tNZXRob2RzID0gISFzdXBwcmVzc0ZhbGxiYWNrTWV0aG9kcztcbiAgICB0aGlzLnN0YXRlbGVzc0NvbXBvbmVudCA9IHRoaXMuaXNTdGF0ZWxlc3ModGhpcy5yZWFjdENvbXBvbmVudCk7XG4gICAgdGhpcy5rZXkgPSBnZW5lcmF0ZU5ld0tleSgpO1xuICAgIHRoaXMucG9ydGFsS2V5ID0gZ2VuZXJhdGVOZXdLZXkoKTtcbiAgICB0aGlzLmluc3RhbmNlQ3JlYXRlZCA9IHRoaXMuaXNTdGF0ZWxlc3NDb21wb25lbnQoKSA/IEFnUHJvbWlzZS5yZXNvbHZlKGZhbHNlKSA6IG5ldyBBZ1Byb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMucmVzb2x2ZUluc3RhbmNlQ3JlYXRlZCA9IHJlc29sdmU7XG4gICAgfSk7XG4gIH1cbiAgZ2V0R3VpKCkge1xuICAgIHJldHVybiB0aGlzLmVQYXJlbnRFbGVtZW50O1xuICB9XG4gIC8qKiBgZ2V0R3VpKClgIHJldHVybnMgdGhlIHBhcmVudCBlbGVtZW50LiBUaGlzIHJldHVybnMgdGhlIGFjdHVhbCByb290IGVsZW1lbnQuICovXG4gIGdldFJvb3RFbGVtZW50KCkge1xuICAgIGNvbnN0IGZpcnN0Q2hpbGQgPSB0aGlzLmVQYXJlbnRFbGVtZW50LmZpcnN0Q2hpbGQ7XG4gICAgcmV0dXJuIGZpcnN0Q2hpbGQ7XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5jb21wb25lbnRJbnN0YW5jZSAmJiB0eXBlb2YgdGhpcy5jb21wb25lbnRJbnN0YW5jZS5kZXN0cm95ID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5jb21wb25lbnRJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgfVxuICAgIGNvbnN0IHBvcnRhbCA9IHRoaXMucG9ydGFsO1xuICAgIGlmIChwb3J0YWwpIHtcbiAgICAgIHRoaXMucG9ydGFsTWFuYWdlci5kZXN0cm95UG9ydGFsKHBvcnRhbCk7XG4gICAgfVxuICB9XG4gIGNyZWF0ZVBhcmVudEVsZW1lbnQocGFyYW1zKSB7XG4gICAgY29uc3QgY29tcG9uZW50V3JhcHBpbmdFbGVtZW50ID0gdGhpcy5wb3J0YWxNYW5hZ2VyLmdldENvbXBvbmVudFdyYXBwaW5nRWxlbWVudCgpO1xuICAgIGNvbnN0IGVQYXJlbnRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChjb21wb25lbnRXcmFwcGluZ0VsZW1lbnQgfHwgXCJkaXZcIik7XG4gICAgZVBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFnLXJlYWN0LWNvbnRhaW5lclwiKTtcbiAgICBwYXJhbXMucmVhY3RDb250YWluZXIgPSBlUGFyZW50RWxlbWVudDtcbiAgICByZXR1cm4gZVBhcmVudEVsZW1lbnQ7XG4gIH1cbiAgYWRkUGFyZW50Q29udGFpbmVyU3R5bGVBbmRDbGFzc2VzKCkge1xuICAgIGlmICghdGhpcy5jb21wb25lbnRJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5jb21wb25lbnRJbnN0YW5jZS5nZXRSZWFjdENvbnRhaW5lclN0eWxlICYmIHRoaXMuY29tcG9uZW50SW5zdGFuY2UuZ2V0UmVhY3RDb250YWluZXJTdHlsZSgpKSB7XG4gICAgICBfd2Fybk9uY2UoXG4gICAgICAgICdTaW5jZSB2MzEuMSBcImdldFJlYWN0Q29udGFpbmVyU3R5bGVcIiBpcyBkZXByZWNhdGVkLiBBcHBseSBzdHlsaW5nIGRpcmVjdGx5IHRvIFwiLmFnLXJlYWN0LWNvbnRhaW5lclwiIGlmIG5lZWRlZC4nXG4gICAgICApO1xuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmVQYXJlbnRFbGVtZW50LnN0eWxlLCB0aGlzLmNvbXBvbmVudEluc3RhbmNlLmdldFJlYWN0Q29udGFpbmVyU3R5bGUoKSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbXBvbmVudEluc3RhbmNlLmdldFJlYWN0Q29udGFpbmVyQ2xhc3NlcyAmJiB0aGlzLmNvbXBvbmVudEluc3RhbmNlLmdldFJlYWN0Q29udGFpbmVyQ2xhc3NlcygpKSB7XG4gICAgICBfd2Fybk9uY2UoXG4gICAgICAgICdTaW5jZSB2MzEuMSBcImdldFJlYWN0Q29udGFpbmVyQ2xhc3Nlc1wiIGlzIGRlcHJlY2F0ZWQuIEFwcGx5IHN0eWxpbmcgZGlyZWN0bHkgdG8gXCIuYWctcmVhY3QtY29udGFpbmVyXCIgaWYgbmVlZGVkLidcbiAgICAgICk7XG4gICAgICBjb25zdCBwYXJlbnRDb250YWluZXJDbGFzc2VzID0gdGhpcy5jb21wb25lbnRJbnN0YW5jZS5nZXRSZWFjdENvbnRhaW5lckNsYXNzZXMoKTtcbiAgICAgIHBhcmVudENvbnRhaW5lckNsYXNzZXMuZm9yRWFjaCgoY2xhc3NOYW1lKSA9PiB0aGlzLmVQYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKSk7XG4gICAgfVxuICB9XG4gIHN0YXRlbGVzc0NvbXBvbmVudFJlbmRlcmVkKCkge1xuICAgIHJldHVybiB0aGlzLmVQYXJlbnRFbGVtZW50LmNoaWxkRWxlbWVudENvdW50ID4gMCB8fCB0aGlzLmVQYXJlbnRFbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoID4gMDtcbiAgfVxuICBnZXRGcmFtZXdvcmtDb21wb25lbnRJbnN0YW5jZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZTtcbiAgfVxuICBpc1N0YXRlbGVzc0NvbXBvbmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZWxlc3NDb21wb25lbnQ7XG4gIH1cbiAgZ2V0UmVhY3RDb21wb25lbnROYW1lKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWN0Q29tcG9uZW50Lm5hbWU7XG4gIH1cbiAgZ2V0TWVtb1R5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzU3ltYm9sKCkgPyBTeW1ib2wuZm9yKFwicmVhY3QubWVtb1wiKSA6IDYwMTE1O1xuICB9XG4gIGhhc1N5bWJvbCgpIHtcbiAgICByZXR1cm4gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5mb3I7XG4gIH1cbiAgaXNTdGF0ZWxlc3MoQ29tcG9uZW50Mikge1xuICAgIHJldHVybiB0eXBlb2YgQ29tcG9uZW50MiA9PT0gXCJmdW5jdGlvblwiICYmICEoQ29tcG9uZW50Mi5wcm90b3R5cGUgJiYgQ29tcG9uZW50Mi5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCkgfHwgdHlwZW9mIENvbXBvbmVudDIgPT09IFwib2JqZWN0XCIgJiYgQ29tcG9uZW50Mi4kJHR5cGVvZiA9PT0gdGhpcy5nZXRNZW1vVHlwZSgpO1xuICB9XG4gIGhhc01ldGhvZChuYW1lKSB7XG4gICAgY29uc3QgZnJhbWV3b3JrQ29tcG9uZW50SW5zdGFuY2UgPSB0aGlzLmdldEZyYW1ld29ya0NvbXBvbmVudEluc3RhbmNlKCk7XG4gICAgcmV0dXJuICEhZnJhbWV3b3JrQ29tcG9uZW50SW5zdGFuY2UgJiYgZnJhbWV3b3JrQ29tcG9uZW50SW5zdGFuY2VbbmFtZV0gIT0gbnVsbCB8fCB0aGlzLmZhbGxiYWNrTWV0aG9kQXZhaWxhYmxlKG5hbWUpO1xuICB9XG4gIGNhbGxNZXRob2QobmFtZSwgYXJncykge1xuICAgIGNvbnN0IGZyYW1ld29ya0NvbXBvbmVudEluc3RhbmNlID0gdGhpcy5nZXRGcmFtZXdvcmtDb21wb25lbnRJbnN0YW5jZSgpO1xuICAgIGlmICh0aGlzLmlzU3RhdGVsZXNzQ29tcG9uZW50KCkpIHtcbiAgICAgIHJldHVybiB0aGlzLmZhbGxiYWNrTWV0aG9kKG5hbWUsICEhYXJncyAmJiBhcmdzWzBdID8gYXJnc1swXSA6IHt9KTtcbiAgICB9IGVsc2UgaWYgKCFmcmFtZXdvcmtDb21wb25lbnRJbnN0YW5jZSkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmNhbGxNZXRob2QobmFtZSwgYXJncykpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSBmcmFtZXdvcmtDb21wb25lbnRJbnN0YW5jZVtuYW1lXTtcbiAgICBpZiAobWV0aG9kKSB7XG4gICAgICByZXR1cm4gbWV0aG9kLmFwcGx5KGZyYW1ld29ya0NvbXBvbmVudEluc3RhbmNlLCBhcmdzKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZmFsbGJhY2tNZXRob2RBdmFpbGFibGUobmFtZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmZhbGxiYWNrTWV0aG9kKG5hbWUsICEhYXJncyAmJiBhcmdzWzBdID8gYXJnc1swXSA6IHt9KTtcbiAgICB9XG4gIH1cbiAgYWRkTWV0aG9kKG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdGhpc1tuYW1lXSA9IGNhbGxiYWNrO1xuICB9XG4gIGluaXQocGFyYW1zKSB7XG4gICAgdGhpcy5lUGFyZW50RWxlbWVudCA9IHRoaXMuY3JlYXRlUGFyZW50RWxlbWVudChwYXJhbXMpO1xuICAgIHRoaXMuY3JlYXRlT3JVcGRhdGVQb3J0YWwocGFyYW1zKTtcbiAgICByZXR1cm4gbmV3IEFnUHJvbWlzZSgocmVzb2x2ZSkgPT4gdGhpcy5jcmVhdGVSZWFjdENvbXBvbmVudChyZXNvbHZlKSk7XG4gIH1cbiAgY3JlYXRlT3JVcGRhdGVQb3J0YWwocGFyYW1zKSB7XG4gICAgaWYgKCF0aGlzLmlzU3RhdGVsZXNzQ29tcG9uZW50KCkpIHtcbiAgICAgIHRoaXMucmVmID0gKGVsZW1lbnQpID0+IHtcbiAgICAgICAgdGhpcy5jb21wb25lbnRJbnN0YW5jZSA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuYWRkUGFyZW50Q29udGFpbmVyU3R5bGVBbmRDbGFzc2VzKCk7XG4gICAgICAgIHRoaXMucmVzb2x2ZUluc3RhbmNlQ3JlYXRlZD8uKHRydWUpO1xuICAgICAgICB0aGlzLnJlc29sdmVJbnN0YW5jZUNyZWF0ZWQgPSB2b2lkIDA7XG4gICAgICB9O1xuICAgICAgcGFyYW1zLnJlZiA9IHRoaXMucmVmO1xuICAgIH1cbiAgICB0aGlzLnJlYWN0RWxlbWVudCA9IHRoaXMuY3JlYXRlRWxlbWVudCh0aGlzLnJlYWN0Q29tcG9uZW50LCB7IC4uLnBhcmFtcywga2V5OiB0aGlzLmtleSB9KTtcbiAgICB0aGlzLnBvcnRhbCA9IGNyZWF0ZVBvcnRhbChcbiAgICAgIHRoaXMucmVhY3RFbGVtZW50LFxuICAgICAgdGhpcy5lUGFyZW50RWxlbWVudCxcbiAgICAgIHRoaXMucG9ydGFsS2V5XG4gICAgICAvLyBmaXhlZCBkZWx0YVJvd01vZGVSZWZyZXNoQ29tcFJlbmRlcmVyXG4gICAgKTtcbiAgfVxuICBjcmVhdGVFbGVtZW50KHJlYWN0Q29tcG9uZW50LCBwcm9wcykge1xuICAgIHJldHVybiBjcmVhdGVFbGVtZW50KHJlYWN0Q29tcG9uZW50LCBwcm9wcyk7XG4gIH1cbiAgY3JlYXRlUmVhY3RDb21wb25lbnQocmVzb2x2ZSkge1xuICAgIHRoaXMucG9ydGFsTWFuYWdlci5tb3VudFJlYWN0UG9ydGFsKHRoaXMucG9ydGFsLCB0aGlzLCByZXNvbHZlKTtcbiAgfVxuICByZW5kZXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1N0YXRlbGVzc0NvbXBvbmVudCgpICYmIHRoaXMuc3RhdGVsZXNzQ29tcG9uZW50UmVuZGVyZWQoKSB8fCAhISghdGhpcy5pc1N0YXRlbGVzc0NvbXBvbmVudCgpICYmIHRoaXMuZ2V0RnJhbWV3b3JrQ29tcG9uZW50SW5zdGFuY2UoKSk7XG4gIH1cbiAgLypcbiAgICogZmFsbGJhY2sgbWV0aG9kcyAtIHRoZXNlIHdpbGwgYmUgaW52b2tlZCBpZiBhIGNvcnJlc3BvbmRpbmcgaW5zdGFuY2UgbWV0aG9kIGlzIG5vdCBwcmVzZW50XG4gICAqIGZvciBleGFtcGxlIGlmIHJlZnJlc2ggaXMgY2FsbGVkIGFuZCBpcyBub3QgYXZhaWxhYmxlIG9uIHRoZSBjb21wb25lbnQgaW5zdGFuY2UsIHRoZW4gcmVmcmVzaENvbXBvbmVudCBvbiB0aGlzXG4gICAqIGNsYXNzIHdpbGwgYmUgaW52b2tlZCBpbnN0ZWFkXG4gICAqXG4gICAqIEN1cnJlbnRseSBvbmx5IHJlZnJlc2ggaXMgc3VwcG9ydGVkXG4gICAqL1xuICByZWZyZXNoQ29tcG9uZW50KGFyZ3MpIHtcbiAgICB0aGlzLm9sZFBvcnRhbCA9IHRoaXMucG9ydGFsO1xuICAgIHRoaXMuY3JlYXRlT3JVcGRhdGVQb3J0YWwoYXJncyk7XG4gICAgdGhpcy5wb3J0YWxNYW5hZ2VyLnVwZGF0ZVJlYWN0UG9ydGFsKHRoaXMub2xkUG9ydGFsLCB0aGlzLnBvcnRhbCk7XG4gIH1cbiAgZmFsbGJhY2tNZXRob2QobmFtZSwgcGFyYW1zKSB7XG4gICAgY29uc3QgbWV0aG9kID0gdGhpc1tgJHtuYW1lfUNvbXBvbmVudGBdO1xuICAgIGlmICghdGhpcy5zdXBwcmVzc0ZhbGxiYWNrTWV0aG9kcyAmJiAhIW1ldGhvZCkge1xuICAgICAgcmV0dXJuIG1ldGhvZC5iaW5kKHRoaXMpKHBhcmFtcyk7XG4gICAgfVxuICB9XG4gIGZhbGxiYWNrTWV0aG9kQXZhaWxhYmxlKG5hbWUpIHtcbiAgICBpZiAodGhpcy5zdXBwcmVzc0ZhbGxiYWNrTWV0aG9kcykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSB0aGlzW2Ake25hbWV9Q29tcG9uZW50YF07XG4gICAgcmV0dXJuICEhbWV0aG9kO1xuICB9XG59O1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9zaGFyZWQvY3VzdG9tQ29tcC9jdXN0b21Db21wb25lbnRXcmFwcGVyLnRzXG5mdW5jdGlvbiBhZGRPcHRpb25hbE1ldGhvZHMob3B0aW9uYWxNZXRob2ROYW1lcywgcHJvdmlkZWRNZXRob2RzLCBjb21wb25lbnQpIHtcbiAgb3B0aW9uYWxNZXRob2ROYW1lcy5mb3JFYWNoKChtZXRob2ROYW1lKSA9PiB7XG4gICAgY29uc3QgcHJvdmlkZWRNZXRob2QgPSBwcm92aWRlZE1ldGhvZHNbbWV0aG9kTmFtZV07XG4gICAgaWYgKHByb3ZpZGVkTWV0aG9kKSB7XG4gICAgICBjb21wb25lbnRbbWV0aG9kTmFtZV0gPSBwcm92aWRlZE1ldGhvZDtcbiAgICB9XG4gIH0pO1xufVxudmFyIEN1c3RvbUNvbXBvbmVudFdyYXBwZXIgPSBjbGFzcyBleHRlbmRzIFJlYWN0Q29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLmF3YWl0VXBkYXRlQ2FsbGJhY2sgPSBuZXcgQWdQcm9taXNlMigocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5yZXNvbHZlVXBkYXRlQ2FsbGJhY2sgPSByZXNvbHZlO1xuICAgIH0pO1xuICAgIHRoaXMud3JhcHBlckNvbXBvbmVudCA9IGN1c3RvbVdyYXBwZXJDb21wX2RlZmF1bHQ7XG4gIH1cbiAgaW5pdChwYXJhbXMpIHtcbiAgICB0aGlzLnNvdXJjZVBhcmFtcyA9IHBhcmFtcztcbiAgICByZXR1cm4gc3VwZXIuaW5pdCh0aGlzLmdldFByb3BzKCkpO1xuICB9XG4gIGFkZE1ldGhvZCgpIHtcbiAgfVxuICBnZXRJbnN0YW5jZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUNyZWF0ZWQudGhlbigoKSA9PiB0aGlzLmNvbXBvbmVudEluc3RhbmNlKTtcbiAgfVxuICBnZXRGcmFtZXdvcmtDb21wb25lbnRJbnN0YW5jZSgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBjcmVhdGVFbGVtZW50KHJlYWN0Q29tcG9uZW50LCBwcm9wcykge1xuICAgIHJldHVybiBzdXBlci5jcmVhdGVFbGVtZW50KHRoaXMud3JhcHBlckNvbXBvbmVudCwge1xuICAgICAgaW5pdGlhbFByb3BzOiBwcm9wcyxcbiAgICAgIEN1c3RvbUNvbXBvbmVudENsYXNzOiByZWFjdENvbXBvbmVudCxcbiAgICAgIHNldE1ldGhvZHM6IChtZXRob2RzKSA9PiB0aGlzLnNldE1ldGhvZHMobWV0aG9kcyksXG4gICAgICBhZGRVcGRhdGVDYWxsYmFjazogKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgY2FsbGJhY2sodGhpcy5nZXRQcm9wcygpKTtcbiAgICAgICAgICByZXR1cm4gbmV3IEFnUHJvbWlzZTIoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZXNvbHZlVXBkYXRlQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBzZXRNZXRob2RzKG1ldGhvZHMpIHtcbiAgICB0aGlzLnByb3ZpZGVkTWV0aG9kcyA9IG1ldGhvZHM7XG4gICAgYWRkT3B0aW9uYWxNZXRob2RzKHRoaXMuZ2V0T3B0aW9uYWxNZXRob2RzKCksIHRoaXMucHJvdmlkZWRNZXRob2RzLCB0aGlzKTtcbiAgfVxuICBnZXRPcHRpb25hbE1ldGhvZHMoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGdldFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLnNvdXJjZVBhcmFtcyxcbiAgICAgIGtleTogdGhpcy5rZXksXG4gICAgICByZWY6IHRoaXMucmVmXG4gICAgfTtcbiAgfVxuICByZWZyZXNoUHJvcHMoKSB7XG4gICAgaWYgKHRoaXMudXBkYXRlQ2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUNhbGxiYWNrKCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQWdQcm9taXNlMihcbiAgICAgIChyZXNvbHZlKSA9PiB0aGlzLmF3YWl0VXBkYXRlQ2FsbGJhY2sudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FsbGJhY2soKS50aGVuKCgpID0+IHJlc29sdmUoKSk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cbn07XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3NoYXJlZC9jdXN0b21Db21wL2NlbGxSZW5kZXJlckNvbXBvbmVudFdyYXBwZXIudHNcbnZhciBDZWxsUmVuZGVyZXJDb21wb25lbnRXcmFwcGVyID0gY2xhc3MgZXh0ZW5kcyBDdXN0b21Db21wb25lbnRXcmFwcGVyIHtcbiAgcmVmcmVzaChwYXJhbXMpIHtcbiAgICB0aGlzLnNvdXJjZVBhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLnJlZnJlc2hQcm9wcygpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9zaGFyZWQvY3VzdG9tQ29tcC9kYXRlQ29tcG9uZW50V3JhcHBlci50c1xudmFyIERhdGVDb21wb25lbnRXcmFwcGVyID0gY2xhc3MgZXh0ZW5kcyBDdXN0b21Db21wb25lbnRXcmFwcGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLmRhdGUgPSBudWxsO1xuICAgIHRoaXMub25EYXRlQ2hhbmdlID0gKGRhdGUpID0+IHRoaXMudXBkYXRlRGF0ZShkYXRlKTtcbiAgfVxuICBnZXREYXRlKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGU7XG4gIH1cbiAgc2V0RGF0ZShkYXRlKSB7XG4gICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgICB0aGlzLnJlZnJlc2hQcm9wcygpO1xuICB9XG4gIHJlZnJlc2gocGFyYW1zKSB7XG4gICAgdGhpcy5zb3VyY2VQYXJhbXMgPSBwYXJhbXM7XG4gICAgdGhpcy5yZWZyZXNoUHJvcHMoKTtcbiAgfVxuICBnZXRPcHRpb25hbE1ldGhvZHMoKSB7XG4gICAgcmV0dXJuIFtcImFmdGVyR3VpQXR0YWNoZWRcIiwgXCJzZXRJbnB1dFBsYWNlaG9sZGVyXCIsIFwic2V0SW5wdXRBcmlhTGFiZWxcIiwgXCJzZXREaXNhYmxlZFwiXTtcbiAgfVxuICB1cGRhdGVEYXRlKGRhdGUpIHtcbiAgICB0aGlzLnNldERhdGUoZGF0ZSk7XG4gICAgdGhpcy5zb3VyY2VQYXJhbXMub25EYXRlQ2hhbmdlZCgpO1xuICB9XG4gIGdldFByb3BzKCkge1xuICAgIGNvbnN0IHByb3BzID0gc3VwZXIuZ2V0UHJvcHMoKTtcbiAgICBwcm9wcy5kYXRlID0gdGhpcy5kYXRlO1xuICAgIHByb3BzLm9uRGF0ZUNoYW5nZSA9IHRoaXMub25EYXRlQ2hhbmdlO1xuICAgIGRlbGV0ZSBwcm9wcy5vbkRhdGVDaGFuZ2VkO1xuICAgIHJldHVybiBwcm9wcztcbiAgfVxufTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvc2hhcmVkL2N1c3RvbUNvbXAvZHJhZ0FuZERyb3BJbWFnZUNvbXBvbmVudFdyYXBwZXIudHNcbnZhciBEcmFnQW5kRHJvcEltYWdlQ29tcG9uZW50V3JhcHBlciA9IGNsYXNzIGV4dGVuZHMgQ3VzdG9tQ29tcG9uZW50V3JhcHBlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgdGhpcy5sYWJlbCA9IFwiXCI7XG4gICAgdGhpcy5pY29uID0gbnVsbDtcbiAgICB0aGlzLnNoYWtlID0gZmFsc2U7XG4gIH1cbiAgc2V0SWNvbihpY29uTmFtZSwgc2hha2UpIHtcbiAgICB0aGlzLmljb24gPSBpY29uTmFtZTtcbiAgICB0aGlzLnNoYWtlID0gc2hha2U7XG4gICAgdGhpcy5yZWZyZXNoUHJvcHMoKTtcbiAgfVxuICBzZXRMYWJlbChsYWJlbCkge1xuICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcbiAgICB0aGlzLnJlZnJlc2hQcm9wcygpO1xuICB9XG4gIGdldFByb3BzKCkge1xuICAgIGNvbnN0IHByb3BzID0gc3VwZXIuZ2V0UHJvcHMoKTtcbiAgICBjb25zdCB7IGxhYmVsLCBpY29uLCBzaGFrZSB9ID0gdGhpcztcbiAgICBwcm9wcy5sYWJlbCA9IGxhYmVsO1xuICAgIHByb3BzLmljb24gPSBpY29uO1xuICAgIHByb3BzLnNoYWtlID0gc2hha2U7XG4gICAgcmV0dXJuIHByb3BzO1xuICB9XG59O1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9zaGFyZWQvY3VzdG9tQ29tcC9maWx0ZXJDb21wb25lbnRXcmFwcGVyLnRzXG52YXIgRmlsdGVyQ29tcG9uZW50V3JhcHBlciA9IGNsYXNzIGV4dGVuZHMgQ3VzdG9tQ29tcG9uZW50V3JhcHBlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgdGhpcy5tb2RlbCA9IG51bGw7XG4gICAgdGhpcy5vbk1vZGVsQ2hhbmdlID0gKG1vZGVsKSA9PiB0aGlzLnVwZGF0ZU1vZGVsKG1vZGVsKTtcbiAgICB0aGlzLm9uVWlDaGFuZ2UgPSAoKSA9PiB0aGlzLnNvdXJjZVBhcmFtcy5maWx0ZXJDaGFuZ2VkQ2FsbGJhY2soKTtcbiAgICB0aGlzLmV4cGVjdGluZ05ld01ldGhvZHMgPSB0cnVlO1xuICAgIHRoaXMuaGFzQmVlbkFjdGl2ZSA9IGZhbHNlO1xuICB9XG4gIGlzRmlsdGVyQWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLm1vZGVsICE9IG51bGw7XG4gIH1cbiAgZG9lc0ZpbHRlclBhc3MocGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvdmlkZWRNZXRob2RzLmRvZXNGaWx0ZXJQYXNzKHBhcmFtcyk7XG4gIH1cbiAgZ2V0TW9kZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZWw7XG4gIH1cbiAgc2V0TW9kZWwobW9kZWwpIHtcbiAgICB0aGlzLmV4cGVjdGluZ05ld01ldGhvZHMgPSB0cnVlO1xuICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICB0aGlzLmhhc0JlZW5BY3RpdmUgfHwgKHRoaXMuaGFzQmVlbkFjdGl2ZSA9IHRoaXMuaXNGaWx0ZXJBY3RpdmUoKSk7XG4gICAgcmV0dXJuIHRoaXMucmVmcmVzaFByb3BzKCk7XG4gIH1cbiAgcmVmcmVzaChuZXdQYXJhbXMpIHtcbiAgICB0aGlzLnNvdXJjZVBhcmFtcyA9IG5ld1BhcmFtcztcbiAgICB0aGlzLnJlZnJlc2hQcm9wcygpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGdldE9wdGlvbmFsTWV0aG9kcygpIHtcbiAgICByZXR1cm4gW1wiYWZ0ZXJHdWlBdHRhY2hlZFwiLCBcImFmdGVyR3VpRGV0YWNoZWRcIiwgXCJvbk5ld1Jvd3NMb2FkZWRcIiwgXCJnZXRNb2RlbEFzU3RyaW5nXCIsIFwib25BbnlGaWx0ZXJDaGFuZ2VkXCJdO1xuICB9XG4gIHNldE1ldGhvZHMobWV0aG9kcykge1xuICAgIGlmICh0aGlzLmV4cGVjdGluZ05ld01ldGhvZHMgPT09IGZhbHNlICYmIHRoaXMuaGFzQmVlbkFjdGl2ZSAmJiB0aGlzLnByb3ZpZGVkTWV0aG9kcz8uZG9lc0ZpbHRlclBhc3MgIT09IG1ldGhvZHM/LmRvZXNGaWx0ZXJQYXNzKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5zb3VyY2VQYXJhbXMuZmlsdGVyQ2hhbmdlZENhbGxiYWNrKCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5leHBlY3RpbmdOZXdNZXRob2RzID0gZmFsc2U7XG4gICAgc3VwZXIuc2V0TWV0aG9kcyhtZXRob2RzKTtcbiAgfVxuICB1cGRhdGVNb2RlbChtb2RlbCkge1xuICAgIHRoaXMuc2V0TW9kZWwobW9kZWwpLnRoZW4oKCkgPT4gdGhpcy5zb3VyY2VQYXJhbXMuZmlsdGVyQ2hhbmdlZENhbGxiYWNrKCkpO1xuICB9XG4gIGdldFByb3BzKCkge1xuICAgIGNvbnN0IHByb3BzID0gc3VwZXIuZ2V0UHJvcHMoKTtcbiAgICBwcm9wcy5tb2RlbCA9IHRoaXMubW9kZWw7XG4gICAgcHJvcHMub25Nb2RlbENoYW5nZSA9IHRoaXMub25Nb2RlbENoYW5nZTtcbiAgICBwcm9wcy5vblVpQ2hhbmdlID0gdGhpcy5vblVpQ2hhbmdlO1xuICAgIGRlbGV0ZSBwcm9wcy5maWx0ZXJDaGFuZ2VkQ2FsbGJhY2s7XG4gICAgZGVsZXRlIHByb3BzLmZpbHRlck1vZGlmaWVkQ2FsbGJhY2s7XG4gICAgZGVsZXRlIHByb3BzLnZhbHVlR2V0dGVyO1xuICAgIHJldHVybiBwcm9wcztcbiAgfVxufTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvc2hhcmVkL2N1c3RvbUNvbXAvZmxvYXRpbmdGaWx0ZXJDb21wb25lbnRQcm94eS50c1xuaW1wb3J0IHsgQWdQcm9taXNlIGFzIEFnUHJvbWlzZTMgfSBmcm9tIFwiYWctZ3JpZC1jb21tdW5pdHlcIjtcbmZ1bmN0aW9uIHVwZGF0ZUZsb2F0aW5nRmlsdGVyUGFyZW50KHBhcmFtcywgbW9kZWwpIHtcbiAgcGFyYW1zLnBhcmVudEZpbHRlckluc3RhbmNlKChpbnN0YW5jZSkgPT4ge1xuICAgIChpbnN0YW5jZS5zZXRNb2RlbChtb2RlbCkgfHwgQWdQcm9taXNlMy5yZXNvbHZlKCkpLnRoZW4oKCkgPT4ge1xuICAgICAgcGFyYW1zLmZpbHRlclBhcmFtcy5maWx0ZXJDaGFuZ2VkQ2FsbGJhY2soKTtcbiAgICB9KTtcbiAgfSk7XG59XG52YXIgRmxvYXRpbmdGaWx0ZXJDb21wb25lbnRQcm94eSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoZmxvYXRpbmdGaWx0ZXJQYXJhbXMsIHJlZnJlc2hQcm9wcykge1xuICAgIHRoaXMuZmxvYXRpbmdGaWx0ZXJQYXJhbXMgPSBmbG9hdGluZ0ZpbHRlclBhcmFtcztcbiAgICB0aGlzLnJlZnJlc2hQcm9wcyA9IHJlZnJlc2hQcm9wcztcbiAgICB0aGlzLm1vZGVsID0gbnVsbDtcbiAgICB0aGlzLm9uTW9kZWxDaGFuZ2UgPSAobW9kZWwpID0+IHRoaXMudXBkYXRlTW9kZWwobW9kZWwpO1xuICB9XG4gIGdldFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLmZsb2F0aW5nRmlsdGVyUGFyYW1zLFxuICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICBvbk1vZGVsQ2hhbmdlOiB0aGlzLm9uTW9kZWxDaGFuZ2VcbiAgICB9O1xuICB9XG4gIG9uUGFyZW50TW9kZWxDaGFuZ2VkKHBhcmVudE1vZGVsKSB7XG4gICAgdGhpcy5tb2RlbCA9IHBhcmVudE1vZGVsO1xuICAgIHRoaXMucmVmcmVzaFByb3BzKCk7XG4gIH1cbiAgcmVmcmVzaChwYXJhbXMpIHtcbiAgICB0aGlzLmZsb2F0aW5nRmlsdGVyUGFyYW1zID0gcGFyYW1zO1xuICAgIHRoaXMucmVmcmVzaFByb3BzKCk7XG4gIH1cbiAgc2V0TWV0aG9kcyhtZXRob2RzKSB7XG4gICAgYWRkT3B0aW9uYWxNZXRob2RzKHRoaXMuZ2V0T3B0aW9uYWxNZXRob2RzKCksIG1ldGhvZHMsIHRoaXMpO1xuICB9XG4gIGdldE9wdGlvbmFsTWV0aG9kcygpIHtcbiAgICByZXR1cm4gW1wiYWZ0ZXJHdWlBdHRhY2hlZFwiXTtcbiAgfVxuICB1cGRhdGVNb2RlbChtb2RlbCkge1xuICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICB0aGlzLnJlZnJlc2hQcm9wcygpO1xuICAgIHVwZGF0ZUZsb2F0aW5nRmlsdGVyUGFyZW50KHRoaXMuZmxvYXRpbmdGaWx0ZXJQYXJhbXMsIG1vZGVsKTtcbiAgfVxufTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvc2hhcmVkL2N1c3RvbUNvbXAvZmxvYXRpbmdGaWx0ZXJDb21wb25lbnRXcmFwcGVyLnRzXG52YXIgRmxvYXRpbmdGaWx0ZXJDb21wb25lbnRXcmFwcGVyID0gY2xhc3MgZXh0ZW5kcyBDdXN0b21Db21wb25lbnRXcmFwcGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLm1vZGVsID0gbnVsbDtcbiAgICB0aGlzLm9uTW9kZWxDaGFuZ2UgPSAobW9kZWwpID0+IHRoaXMudXBkYXRlTW9kZWwobW9kZWwpO1xuICB9XG4gIG9uUGFyZW50TW9kZWxDaGFuZ2VkKHBhcmVudE1vZGVsKSB7XG4gICAgdGhpcy5tb2RlbCA9IHBhcmVudE1vZGVsO1xuICAgIHRoaXMucmVmcmVzaFByb3BzKCk7XG4gIH1cbiAgcmVmcmVzaChuZXdQYXJhbXMpIHtcbiAgICB0aGlzLnNvdXJjZVBhcmFtcyA9IG5ld1BhcmFtcztcbiAgICB0aGlzLnJlZnJlc2hQcm9wcygpO1xuICB9XG4gIGdldE9wdGlvbmFsTWV0aG9kcygpIHtcbiAgICByZXR1cm4gW1wiYWZ0ZXJHdWlBdHRhY2hlZFwiXTtcbiAgfVxuICB1cGRhdGVNb2RlbChtb2RlbCkge1xuICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICB0aGlzLnJlZnJlc2hQcm9wcygpO1xuICAgIHVwZGF0ZUZsb2F0aW5nRmlsdGVyUGFyZW50KHRoaXMuc291cmNlUGFyYW1zLCBtb2RlbCk7XG4gIH1cbiAgZ2V0UHJvcHMoKSB7XG4gICAgY29uc3QgcHJvcHMgPSBzdXBlci5nZXRQcm9wcygpO1xuICAgIHByb3BzLm1vZGVsID0gdGhpcy5tb2RlbDtcbiAgICBwcm9wcy5vbk1vZGVsQ2hhbmdlID0gdGhpcy5vbk1vZGVsQ2hhbmdlO1xuICAgIHJldHVybiBwcm9wcztcbiAgfVxufTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvc2hhcmVkL2N1c3RvbUNvbXAvbG9hZGluZ092ZXJsYXlDb21wb25lbnRXcmFwcGVyLnRzXG52YXIgTG9hZGluZ092ZXJsYXlDb21wb25lbnRXcmFwcGVyID0gY2xhc3MgZXh0ZW5kcyBDdXN0b21Db21wb25lbnRXcmFwcGVyIHtcbiAgcmVmcmVzaChwYXJhbXMpIHtcbiAgICB0aGlzLnNvdXJjZVBhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLnJlZnJlc2hQcm9wcygpO1xuICB9XG59O1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9zaGFyZWQvY3VzdG9tQ29tcC9tZW51SXRlbUNvbXBvbmVudFdyYXBwZXIudHNcbnZhciBNZW51SXRlbUNvbXBvbmVudFdyYXBwZXIgPSBjbGFzcyBleHRlbmRzIEN1c3RvbUNvbXBvbmVudFdyYXBwZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5leHBhbmRlZCA9IGZhbHNlO1xuICAgIHRoaXMub25BY3RpdmVDaGFuZ2UgPSAoYWN0aXZlKSA9PiB0aGlzLnVwZGF0ZUFjdGl2ZShhY3RpdmUpO1xuICB9XG4gIHNldEFjdGl2ZShhY3RpdmUpIHtcbiAgICB0aGlzLmF3YWl0U2V0QWN0aXZlKGFjdGl2ZSk7XG4gIH1cbiAgc2V0RXhwYW5kZWQoZXhwYW5kZWQpIHtcbiAgICB0aGlzLmV4cGFuZGVkID0gZXhwYW5kZWQ7XG4gICAgdGhpcy5yZWZyZXNoUHJvcHMoKTtcbiAgfVxuICBnZXRPcHRpb25hbE1ldGhvZHMoKSB7XG4gICAgcmV0dXJuIFtcInNlbGVjdFwiLCBcImNvbmZpZ3VyZURlZmF1bHRzXCJdO1xuICB9XG4gIGF3YWl0U2V0QWN0aXZlKGFjdGl2ZSkge1xuICAgIHRoaXMuYWN0aXZlID0gYWN0aXZlO1xuICAgIHJldHVybiB0aGlzLnJlZnJlc2hQcm9wcygpO1xuICB9XG4gIHVwZGF0ZUFjdGl2ZShhY3RpdmUpIHtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmF3YWl0U2V0QWN0aXZlKGFjdGl2ZSk7XG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgcmVzdWx0LnRoZW4oKCkgPT4gdGhpcy5zb3VyY2VQYXJhbXMub25JdGVtQWN0aXZhdGVkKCkpO1xuICAgIH1cbiAgfVxuICBnZXRQcm9wcygpIHtcbiAgICBjb25zdCBwcm9wcyA9IHN1cGVyLmdldFByb3BzKCk7XG4gICAgcHJvcHMuYWN0aXZlID0gdGhpcy5hY3RpdmU7XG4gICAgcHJvcHMuZXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkO1xuICAgIHByb3BzLm9uQWN0aXZlQ2hhbmdlID0gdGhpcy5vbkFjdGl2ZUNoYW5nZTtcbiAgICBkZWxldGUgcHJvcHMub25JdGVtQWN0aXZhdGVkO1xuICAgIHJldHVybiBwcm9wcztcbiAgfVxufTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvc2hhcmVkL2N1c3RvbUNvbXAvbm9Sb3dzT3ZlcmxheUNvbXBvbmVudFdyYXBwZXIudHNcbnZhciBOb1Jvd3NPdmVybGF5Q29tcG9uZW50V3JhcHBlciA9IGNsYXNzIGV4dGVuZHMgQ3VzdG9tQ29tcG9uZW50V3JhcHBlciB7XG4gIHJlZnJlc2gocGFyYW1zKSB7XG4gICAgdGhpcy5zb3VyY2VQYXJhbXMgPSBwYXJhbXM7XG4gICAgdGhpcy5yZWZyZXNoUHJvcHMoKTtcbiAgfVxufTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvc2hhcmVkL2N1c3RvbUNvbXAvc3RhdHVzUGFuZWxDb21wb25lbnRXcmFwcGVyLnRzXG52YXIgU3RhdHVzUGFuZWxDb21wb25lbnRXcmFwcGVyID0gY2xhc3MgZXh0ZW5kcyBDdXN0b21Db21wb25lbnRXcmFwcGVyIHtcbiAgcmVmcmVzaChwYXJhbXMpIHtcbiAgICB0aGlzLnNvdXJjZVBhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLnJlZnJlc2hQcm9wcygpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9zaGFyZWQvY3VzdG9tQ29tcC90b29sUGFuZWxDb21wb25lbnRXcmFwcGVyLnRzXG52YXIgVG9vbFBhbmVsQ29tcG9uZW50V3JhcHBlciA9IGNsYXNzIGV4dGVuZHMgQ3VzdG9tQ29tcG9uZW50V3JhcHBlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgdGhpcy5vblN0YXRlQ2hhbmdlID0gKHN0YXRlKSA9PiB0aGlzLnVwZGF0ZVN0YXRlKHN0YXRlKTtcbiAgfVxuICByZWZyZXNoKHBhcmFtcykge1xuICAgIHRoaXMuc291cmNlUGFyYW1zID0gcGFyYW1zO1xuICAgIHRoaXMucmVmcmVzaFByb3BzKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH1cbiAgdXBkYXRlU3RhdGUoc3RhdGUpIHtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5yZWZyZXNoUHJvcHMoKTtcbiAgICB0aGlzLnNvdXJjZVBhcmFtcy5vblN0YXRlVXBkYXRlZCgpO1xuICB9XG4gIGdldFByb3BzKCkge1xuICAgIGNvbnN0IHByb3BzID0gc3VwZXIuZ2V0UHJvcHMoKTtcbiAgICBwcm9wcy5zdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgcHJvcHMub25TdGF0ZUNoYW5nZSA9IHRoaXMub25TdGF0ZUNoYW5nZTtcbiAgICByZXR1cm4gcHJvcHM7XG4gIH1cbn07XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3NoYXJlZC9jdXN0b21Db21wL3V0aWwudHNcbmltcG9ydCB7IEFnUHJvbWlzZSBhcyBBZ1Byb21pc2U0LCBfd2Fybk9uY2UgYXMgX3dhcm5PbmNlMiB9IGZyb20gXCJhZy1ncmlkLWNvbW11bml0eVwiO1xuZnVuY3Rpb24gZ2V0SW5zdGFuY2Uod3JhcHBlckNvbXBvbmVudCwgY2FsbGJhY2spIHtcbiAgY29uc3QgcHJvbWlzZSA9IHdyYXBwZXJDb21wb25lbnQ/LmdldEluc3RhbmNlPy4oKSA/PyBBZ1Byb21pc2U0LnJlc29sdmUodm9pZCAwKTtcbiAgcHJvbWlzZS50aGVuKChjb21wKSA9PiBjYWxsYmFjayhjb21wKSk7XG59XG5mdW5jdGlvbiB3YXJuUmVhY3RpdmVDdXN0b21Db21wb25lbnRzKCkge1xuICBfd2Fybk9uY2UyKFwiQXMgb2YgdjMyLCB1c2luZyBjdXN0b20gY29tcG9uZW50cyB3aXRoIGByZWFjdGl2ZUN1c3RvbUNvbXBvbmVudHMgPSBmYWxzZWAgaXMgZGVwcmVjYXRlZC5cIik7XG59XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3NoYXJlZC9wb3J0YWxNYW5hZ2VyLnRzXG52YXIgTUFYX0NPTVBPTkVOVF9DUkVBVElPTl9USU1FX0lOX01TID0gMWUzO1xudmFyIFBvcnRhbE1hbmFnZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlZnJlc2hlciwgd3JhcHBpbmdFbGVtZW50LCBtYXhDb21wb25lbnRDcmVhdGlvblRpbWVNcykge1xuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgdGhpcy5wb3J0YWxzID0gW107XG4gICAgdGhpcy5oYXNQZW5kaW5nUG9ydGFsVXBkYXRlID0gZmFsc2U7XG4gICAgdGhpcy53cmFwcGluZ0VsZW1lbnQgPSB3cmFwcGluZ0VsZW1lbnQgPyB3cmFwcGluZ0VsZW1lbnQgOiBcImRpdlwiO1xuICAgIHRoaXMucmVmcmVzaGVyID0gcmVmcmVzaGVyO1xuICAgIHRoaXMubWF4Q29tcG9uZW50Q3JlYXRpb25UaW1lTXMgPSBtYXhDb21wb25lbnRDcmVhdGlvblRpbWVNcyA/IG1heENvbXBvbmVudENyZWF0aW9uVGltZU1zIDogTUFYX0NPTVBPTkVOVF9DUkVBVElPTl9USU1FX0lOX01TO1xuICB9XG4gIGdldFBvcnRhbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMucG9ydGFscztcbiAgfVxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcbiAgfVxuICBkZXN0cm95UG9ydGFsKHBvcnRhbCkge1xuICAgIHRoaXMucG9ydGFscyA9IHRoaXMucG9ydGFscy5maWx0ZXIoKGN1clBvcnRhbCkgPT4gY3VyUG9ydGFsICE9PSBwb3J0YWwpO1xuICAgIHRoaXMuYmF0Y2hVcGRhdGUoKTtcbiAgfVxuICBnZXRDb21wb25lbnRXcmFwcGluZ0VsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMud3JhcHBpbmdFbGVtZW50O1xuICB9XG4gIG1vdW50UmVhY3RQb3J0YWwocG9ydGFsLCByZWFjdENvbXBvbmVudCwgcmVzb2x2ZSkge1xuICAgIHRoaXMucG9ydGFscyA9IFsuLi50aGlzLnBvcnRhbHMsIHBvcnRhbF07XG4gICAgdGhpcy53YWl0Rm9ySW5zdGFuY2UocmVhY3RDb21wb25lbnQsIHJlc29sdmUpO1xuICAgIHRoaXMuYmF0Y2hVcGRhdGUoKTtcbiAgfVxuICB1cGRhdGVSZWFjdFBvcnRhbChvbGRQb3J0YWwsIG5ld1BvcnRhbCkge1xuICAgIHRoaXMucG9ydGFsc1t0aGlzLnBvcnRhbHMuaW5kZXhPZihvbGRQb3J0YWwpXSA9IG5ld1BvcnRhbDtcbiAgICB0aGlzLmJhdGNoVXBkYXRlKCk7XG4gIH1cbiAgYmF0Y2hVcGRhdGUoKSB7XG4gICAgaWYgKHRoaXMuaGFzUGVuZGluZ1BvcnRhbFVwZGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghdGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgdGhpcy5yZWZyZXNoZXIoKTtcbiAgICAgICAgdGhpcy5oYXNQZW5kaW5nUG9ydGFsVXBkYXRlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5oYXNQZW5kaW5nUG9ydGFsVXBkYXRlID0gdHJ1ZTtcbiAgfVxuICB3YWl0Rm9ySW5zdGFuY2UocmVhY3RDb21wb25lbnQsIHJlc29sdmUsIHN0YXJ0VGltZSA9IERhdGUubm93KCkpIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChyZWFjdENvbXBvbmVudC5yZW5kZXJlZCgpKSB7XG4gICAgICByZXNvbHZlKHJlYWN0Q29tcG9uZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKERhdGUubm93KCkgLSBzdGFydFRpbWUgPj0gdGhpcy5tYXhDb21wb25lbnRDcmVhdGlvblRpbWVNcyAmJiAhdGhpcy5oYXNQZW5kaW5nUG9ydGFsVXBkYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy53YWl0Rm9ySW5zdGFuY2UocmVhY3RDb21wb25lbnQsIHJlc29sdmUsIHN0YXJ0VGltZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvZ3JpZENvbXAudHN4XG5pbXBvcnQgeyBHcmlkQ3RybCB9IGZyb20gXCJhZy1ncmlkLWNvbW11bml0eVwiO1xuaW1wb3J0IFJlYWN0MTcsIHsgbWVtbyBhcyBtZW1vMTQsIHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrMTQsIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3Q4LCB1c2VNZW1vIGFzIHVzZU1lbW8xMSwgdXNlUmVmIGFzIHVzZVJlZjE0LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTE1IH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvZ3JpZEJvZHlDb21wLnRzeFxuaW1wb3J0IHtcbiAgQ3NzQ2xhc3NNYW5hZ2VyIGFzIENzc0NsYXNzTWFuYWdlcjQsXG4gIEZha2VIU2Nyb2xsQ29tcCxcbiAgRmFrZVZTY3JvbGxDb21wLFxuICBHcmlkQm9keUN0cmwsXG4gIE92ZXJsYXlXcmFwcGVyQ29tcG9uZW50LFxuICBfc2V0QXJpYUNvbENvdW50LFxuICBfc2V0QXJpYVJvd0NvdW50XG59IGZyb20gXCJhZy1ncmlkLWNvbW11bml0eVwiO1xuaW1wb3J0IFJlYWN0MTUsIHsgbWVtbyBhcyBtZW1vMTIsIHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrMTIsIHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDEzLCB1c2VNZW1vIGFzIHVzZU1lbW8xMCwgdXNlUmVmIGFzIHVzZVJlZjEyLCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTE0IH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvaGVhZGVyL2dyaWRIZWFkZXJDb21wLnRzeFxuaW1wb3J0IHsgR3JpZEhlYWRlckN0cmwgfSBmcm9tIFwiYWctZ3JpZC1jb21tdW5pdHlcIjtcbmltcG9ydCBSZWFjdDEwLCB7IG1lbW8gYXMgbWVtbzcsIHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrNywgdXNlQ29udGV4dCBhcyB1c2VDb250ZXh0NywgdXNlTWVtbyBhcyB1c2VNZW1vNiwgdXNlUmVmIGFzIHVzZVJlZjcsIHVzZVN0YXRlIGFzIHVzZVN0YXRlOCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9yZWFjdFVpL2hlYWRlci9oZWFkZXJSb3dDb250YWluZXJDb21wLnRzeFxuaW1wb3J0IHsgSGVhZGVyUm93Q29udGFpbmVyQ3RybCB9IGZyb20gXCJhZy1ncmlkLWNvbW11bml0eVwiO1xuaW1wb3J0IFJlYWN0OSwgeyBtZW1vIGFzIG1lbW82LCB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazYsIHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDYsIHVzZVJlZiBhcyB1c2VSZWY2LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTcgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9oZWFkZXIvaGVhZGVyUm93Q29tcC50c3hcbmltcG9ydCB7IEhlYWRlclJvd1R5cGUsIF9FbXB0eUJlYW4gYXMgX0VtcHR5QmVhbjQgfSBmcm9tIFwiYWctZ3JpZC1jb21tdW5pdHlcIjtcbmltcG9ydCBSZWFjdDgsIHsgbWVtbyBhcyBtZW1vNSwgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2s1LCB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQ1LCB1c2VNZW1vIGFzIHVzZU1lbW81LCB1c2VSZWYgYXMgdXNlUmVmNSwgdXNlU3RhdGUgYXMgdXNlU3RhdGU2IH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvaGVhZGVyL2hlYWRlckNlbGxDb21wLnRzeFxuaW1wb3J0IHsgQ3NzQ2xhc3NNYW5hZ2VyLCBfRW1wdHlCZWFuLCBfcmVtb3ZlQXJpYVNvcnQsIF9zZXRBcmlhU29ydCB9IGZyb20gXCJhZy1ncmlkLWNvbW11bml0eVwiO1xuaW1wb3J0IFJlYWN0NSwgeyBtZW1vIGFzIG1lbW8yLCB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazIsIHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDIsIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QyLCB1c2VMYXlvdXRFZmZlY3QgYXMgdXNlTGF5b3V0RWZmZWN0MiwgdXNlTWVtbyBhcyB1c2VNZW1vMiwgdXNlUmVmIGFzIHVzZVJlZjIsIHVzZVN0YXRlIGFzIHVzZVN0YXRlMyB9IGZyb20gXCJyZWFjdFwiO1xudmFyIEhlYWRlckNlbGxDb21wID0gKHsgY3RybCB9KSA9PiB7XG4gIGNvbnN0IGlzQWxpdmUgPSBjdHJsLmlzQWxpdmUoKTtcbiAgY29uc3QgeyBjb250ZXh0IH0gPSB1c2VDb250ZXh0MihCZWFuc0NvbnRleHQpO1xuICBjb25zdCBjb2xJZCA9IGlzQWxpdmUgPyBjdHJsLmdldENvbElkKCkgOiB2b2lkIDA7XG4gIGNvbnN0IFt1c2VyQ29tcERldGFpbHMsIHNldFVzZXJDb21wRGV0YWlsc10gPSB1c2VTdGF0ZTMoKTtcbiAgY29uc3QgY29tcEJlYW4gPSB1c2VSZWYyKCk7XG4gIGNvbnN0IGVHdWkgPSB1c2VSZWYyKG51bGwpO1xuICBjb25zdCBlUmVzaXplID0gdXNlUmVmMihudWxsKTtcbiAgY29uc3QgZUhlYWRlckNvbXBXcmFwcGVyID0gdXNlUmVmMihudWxsKTtcbiAgY29uc3QgdXNlckNvbXBSZWYgPSB1c2VSZWYyKCk7XG4gIGNvbnN0IGNzc0NsYXNzTWFuYWdlciA9IHVzZVJlZjIoKTtcbiAgaWYgKGlzQWxpdmUgJiYgIWNzc0NsYXNzTWFuYWdlci5jdXJyZW50KSB7XG4gICAgY3NzQ2xhc3NNYW5hZ2VyLmN1cnJlbnQgPSBuZXcgQ3NzQ2xhc3NNYW5hZ2VyKCgpID0+IGVHdWkuY3VycmVudCk7XG4gIH1cbiAgY29uc3Qgc2V0UmVmMiA9IHVzZUNhbGxiYWNrMigoZVJlZikgPT4ge1xuICAgIGVHdWkuY3VycmVudCA9IGVSZWY7XG4gICAgY29tcEJlYW4uY3VycmVudCA9IGVSZWYgPyBjb250ZXh0LmNyZWF0ZUJlYW4obmV3IF9FbXB0eUJlYW4oKSkgOiBjb250ZXh0LmRlc3Ryb3lCZWFuKGNvbXBCZWFuLmN1cnJlbnQpO1xuICAgIGlmICghZVJlZiB8fCAhaXNBbGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb21wUHJveHkgPSB7XG4gICAgICBzZXRXaWR0aDogKHdpZHRoKSA9PiB7XG4gICAgICAgIGlmIChlR3VpLmN1cnJlbnQpIHtcbiAgICAgICAgICBlR3VpLmN1cnJlbnQuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFkZE9yUmVtb3ZlQ3NzQ2xhc3M6IChuYW1lLCBvbikgPT4gY3NzQ2xhc3NNYW5hZ2VyLmN1cnJlbnQuYWRkT3JSZW1vdmVDc3NDbGFzcyhuYW1lLCBvbiksXG4gICAgICBzZXRBcmlhU29ydDogKHNvcnQpID0+IHtcbiAgICAgICAgaWYgKGVHdWkuY3VycmVudCkge1xuICAgICAgICAgIHNvcnQgPyBfc2V0QXJpYVNvcnQoZUd1aS5jdXJyZW50LCBzb3J0KSA6IF9yZW1vdmVBcmlhU29ydChlR3VpLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0VXNlckNvbXBEZXRhaWxzOiAoY29tcERldGFpbHMpID0+IHNldFVzZXJDb21wRGV0YWlscyhjb21wRGV0YWlscyksXG4gICAgICBnZXRVc2VyQ29tcEluc3RhbmNlOiAoKSA9PiB1c2VyQ29tcFJlZi5jdXJyZW50IHx8IHZvaWQgMFxuICAgIH07XG4gICAgY3RybC5zZXRDb21wKGNvbXBQcm94eSwgZVJlZiwgZVJlc2l6ZS5jdXJyZW50LCBlSGVhZGVyQ29tcFdyYXBwZXIuY3VycmVudCwgY29tcEJlYW4uY3VycmVudCk7XG4gICAgY29uc3Qgc2VsZWN0QWxsR3VpID0gY3RybC5nZXRTZWxlY3RBbGxHdWkoKTtcbiAgICBlUmVzaXplLmN1cnJlbnQ/Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsIHNlbGVjdEFsbEd1aSk7XG4gICAgY29tcEJlYW4uY3VycmVudC5hZGREZXN0cm95RnVuYygoKSA9PiBzZWxlY3RBbGxHdWkucmVtb3ZlKCkpO1xuICB9LCBbXSk7XG4gIHVzZUxheW91dEVmZmVjdDIoXG4gICAgKCkgPT4gc2hvd0pzQ29tcCh1c2VyQ29tcERldGFpbHMsIGNvbnRleHQsIGVIZWFkZXJDb21wV3JhcHBlci5jdXJyZW50LCB1c2VyQ29tcFJlZiksXG4gICAgW3VzZXJDb21wRGV0YWlsc11cbiAgKTtcbiAgdXNlRWZmZWN0MigoKSA9PiB7XG4gICAgY3RybC5zZXREcmFnU291cmNlKGVHdWkuY3VycmVudCk7XG4gIH0sIFt1c2VyQ29tcERldGFpbHNdKTtcbiAgY29uc3QgdXNlckNvbXBTdGF0ZWxlc3MgPSB1c2VNZW1vMigoKSA9PiB7XG4gICAgY29uc3QgcmVzID0gdXNlckNvbXBEZXRhaWxzPy5jb21wb25lbnRGcm9tRnJhbWV3b3JrICYmIGlzQ29tcG9uZW50U3RhdGVsZXNzKHVzZXJDb21wRGV0YWlscy5jb21wb25lbnRDbGFzcyk7XG4gICAgcmV0dXJuICEhcmVzO1xuICB9LCBbdXNlckNvbXBEZXRhaWxzXSk7XG4gIGNvbnN0IHJlYWN0VXNlckNvbXAgPSB1c2VyQ29tcERldGFpbHMgJiYgdXNlckNvbXBEZXRhaWxzLmNvbXBvbmVudEZyb21GcmFtZXdvcms7XG4gIGNvbnN0IFVzZXJDb21wQ2xhc3MgPSB1c2VyQ29tcERldGFpbHMgJiYgdXNlckNvbXBEZXRhaWxzLmNvbXBvbmVudENsYXNzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBzZXRSZWYyLCBjbGFzc05hbWU6IFwiYWctaGVhZGVyLWNlbGxcIiwgXCJjb2wtaWRcIjogY29sSWQsIHJvbGU6IFwiY29sdW1uaGVhZGVyXCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBlUmVzaXplLCBjbGFzc05hbWU6IFwiYWctaGVhZGVyLWNlbGwtcmVzaXplXCIsIHJvbGU6IFwicHJlc2VudGF0aW9uXCIgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogZUhlYWRlckNvbXBXcmFwcGVyLCBjbGFzc05hbWU6IFwiYWctaGVhZGVyLWNlbGwtY29tcC13cmFwcGVyXCIsIHJvbGU6IFwicHJlc2VudGF0aW9uXCIgfSwgcmVhY3RVc2VyQ29tcCAmJiB1c2VyQ29tcFN0YXRlbGVzcyAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoVXNlckNvbXBDbGFzcywgeyAuLi51c2VyQ29tcERldGFpbHMucGFyYW1zIH0pLCByZWFjdFVzZXJDb21wICYmICF1c2VyQ29tcFN0YXRlbGVzcyAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1LmNyZWF0ZUVsZW1lbnQoVXNlckNvbXBDbGFzcywgeyAuLi51c2VyQ29tcERldGFpbHMucGFyYW1zLCByZWY6IHVzZXJDb21wUmVmIH0pKSk7XG59O1xudmFyIGhlYWRlckNlbGxDb21wX2RlZmF1bHQgPSBtZW1vMihIZWFkZXJDZWxsQ29tcCk7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvaGVhZGVyL2hlYWRlckZpbHRlckNlbGxDb21wLnRzeFxuaW1wb3J0IHsgQWdQcm9taXNlIGFzIEFnUHJvbWlzZTUsIF9FbXB0eUJlYW4gYXMgX0VtcHR5QmVhbjIgfSBmcm9tIFwiYWctZ3JpZC1jb21tdW5pdHlcIjtcbmltcG9ydCBSZWFjdDYsIHsgbWVtbyBhcyBtZW1vMywgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2szLCB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQzLCB1c2VMYXlvdXRFZmZlY3QgYXMgdXNlTGF5b3V0RWZmZWN0MywgdXNlTWVtbyBhcyB1c2VNZW1vMywgdXNlUmVmIGFzIHVzZVJlZjMsIHVzZVN0YXRlIGFzIHVzZVN0YXRlNCB9IGZyb20gXCJyZWFjdFwiO1xudmFyIEhlYWRlckZpbHRlckNlbGxDb21wID0gKHsgY3RybCB9KSA9PiB7XG4gIGNvbnN0IHsgY29udGV4dCwgZ29zIH0gPSB1c2VDb250ZXh0MyhCZWFuc0NvbnRleHQpO1xuICBjb25zdCBbY3NzQ2xhc3Nlcywgc2V0Q3NzQ2xhc3Nlc10gPSB1c2VTdGF0ZTQoXG4gICAgKCkgPT4gbmV3IENzc0NsYXNzZXMoXCJhZy1oZWFkZXItY2VsbFwiLCBcImFnLWZsb2F0aW5nLWZpbHRlclwiKVxuICApO1xuICBjb25zdCBbY3NzQm9keUNsYXNzZXMsIHNldEJvZHlDc3NDbGFzc2VzXSA9IHVzZVN0YXRlNCgoKSA9PiBuZXcgQ3NzQ2xhc3NlcygpKTtcbiAgY29uc3QgW2Nzc0J1dHRvbldyYXBwZXJDbGFzc2VzLCBzZXRCdXR0b25XcmFwcGVyQ3NzQ2xhc3Nlc10gPSB1c2VTdGF0ZTQoXG4gICAgKCkgPT4gbmV3IENzc0NsYXNzZXMoXCJhZy1mbG9hdGluZy1maWx0ZXItYnV0dG9uXCIsIFwiYWctaGlkZGVuXCIpXG4gICk7XG4gIGNvbnN0IFtidXR0b25XcmFwcGVyQXJpYUhpZGRlbiwgc2V0QnV0dG9uV3JhcHBlckFyaWFIaWRkZW5dID0gdXNlU3RhdGU0KFwiZmFsc2VcIik7XG4gIGNvbnN0IFt1c2VyQ29tcERldGFpbHMsIHNldFVzZXJDb21wRGV0YWlsc10gPSB1c2VTdGF0ZTQoKTtcbiAgY29uc3QgWywgc2V0UmVuZGVyS2V5XSA9IHVzZVN0YXRlNCgxKTtcbiAgY29uc3QgY29tcEJlYW4gPSB1c2VSZWYzKCk7XG4gIGNvbnN0IGVHdWkgPSB1c2VSZWYzKG51bGwpO1xuICBjb25zdCBlRmxvYXRpbmdGaWx0ZXJCb2R5ID0gdXNlUmVmMyhudWxsKTtcbiAgY29uc3QgZUJ1dHRvbldyYXBwZXIgPSB1c2VSZWYzKG51bGwpO1xuICBjb25zdCBlQnV0dG9uU2hvd01haW5GaWx0ZXIgPSB1c2VSZWYzKG51bGwpO1xuICBjb25zdCB1c2VyQ29tcFJlc29sdmUgPSB1c2VSZWYzKCk7XG4gIGNvbnN0IHVzZXJDb21wUHJvbWlzZSA9IHVzZVJlZjMoKTtcbiAgY29uc3QgdXNlckNvbXBSZWYgPSAodmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB1c2VyQ29tcFJlc29sdmUuY3VycmVudCAmJiB1c2VyQ29tcFJlc29sdmUuY3VycmVudCh2YWx1ZSk7XG4gIH07XG4gIGNvbnN0IHNldFJlZjIgPSB1c2VDYWxsYmFjazMoKGVSZWYpID0+IHtcbiAgICBlR3VpLmN1cnJlbnQgPSBlUmVmO1xuICAgIGNvbXBCZWFuLmN1cnJlbnQgPSBlUmVmID8gY29udGV4dC5jcmVhdGVCZWFuKG5ldyBfRW1wdHlCZWFuMigpKSA6IGNvbnRleHQuZGVzdHJveUJlYW4oY29tcEJlYW4uY3VycmVudCk7XG4gICAgaWYgKCFlUmVmKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHVzZXJDb21wUHJvbWlzZS5jdXJyZW50ID0gbmV3IEFnUHJvbWlzZTUoKHJlc29sdmUpID0+IHtcbiAgICAgIHVzZXJDb21wUmVzb2x2ZS5jdXJyZW50ID0gcmVzb2x2ZTtcbiAgICB9KTtcbiAgICBjb25zdCBjb21wUHJveHkgPSB7XG4gICAgICBhZGRPclJlbW92ZUNzc0NsYXNzOiAobmFtZSwgb24pID0+IHNldENzc0NsYXNzZXMoKHByZXYpID0+IHByZXYuc2V0Q2xhc3MobmFtZSwgb24pKSxcbiAgICAgIGFkZE9yUmVtb3ZlQm9keUNzc0NsYXNzOiAobmFtZSwgb24pID0+IHNldEJvZHlDc3NDbGFzc2VzKChwcmV2KSA9PiBwcmV2LnNldENsYXNzKG5hbWUsIG9uKSksXG4gICAgICBzZXRCdXR0b25XcmFwcGVyRGlzcGxheWVkOiAoZGlzcGxheWVkKSA9PiB7XG4gICAgICAgIHNldEJ1dHRvbldyYXBwZXJDc3NDbGFzc2VzKChwcmV2KSA9PiBwcmV2LnNldENsYXNzKFwiYWctaGlkZGVuXCIsICFkaXNwbGF5ZWQpKTtcbiAgICAgICAgc2V0QnV0dG9uV3JhcHBlckFyaWFIaWRkZW4oIWRpc3BsYXllZCA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiKTtcbiAgICAgIH0sXG4gICAgICBzZXRXaWR0aDogKHdpZHRoKSA9PiB7XG4gICAgICAgIGlmIChlR3VpLmN1cnJlbnQpIHtcbiAgICAgICAgICBlR3VpLmN1cnJlbnQuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldENvbXBEZXRhaWxzOiAoY29tcERldGFpbHMpID0+IHNldFVzZXJDb21wRGV0YWlscyhjb21wRGV0YWlscyksXG4gICAgICBnZXRGbG9hdGluZ0ZpbHRlckNvbXA6ICgpID0+IHVzZXJDb21wUHJvbWlzZS5jdXJyZW50ID8gdXNlckNvbXBQcm9taXNlLmN1cnJlbnQgOiBudWxsLFxuICAgICAgc2V0TWVudUljb246IChlSWNvbikgPT4gZUJ1dHRvblNob3dNYWluRmlsdGVyLmN1cnJlbnQ/LmFwcGVuZENoaWxkKGVJY29uKVxuICAgIH07XG4gICAgY3RybC5zZXRDb21wKGNvbXBQcm94eSwgZVJlZiwgZUJ1dHRvblNob3dNYWluRmlsdGVyLmN1cnJlbnQsIGVGbG9hdGluZ0ZpbHRlckJvZHkuY3VycmVudCwgY29tcEJlYW4uY3VycmVudCk7XG4gIH0sIFtdKTtcbiAgdXNlTGF5b3V0RWZmZWN0MyhcbiAgICAoKSA9PiBzaG93SnNDb21wKHVzZXJDb21wRGV0YWlscywgY29udGV4dCwgZUZsb2F0aW5nRmlsdGVyQm9keS5jdXJyZW50LCB1c2VyQ29tcFJlZiksXG4gICAgW3VzZXJDb21wRGV0YWlsc11cbiAgKTtcbiAgY29uc3QgY2xhc3NOYW1lID0gdXNlTWVtbzMoKCkgPT4gY3NzQ2xhc3Nlcy50b1N0cmluZygpLCBbY3NzQ2xhc3Nlc10pO1xuICBjb25zdCBib2R5Q2xhc3NOYW1lID0gdXNlTWVtbzMoKCkgPT4gY3NzQm9keUNsYXNzZXMudG9TdHJpbmcoKSwgW2Nzc0JvZHlDbGFzc2VzXSk7XG4gIGNvbnN0IGJ1dHRvbldyYXBwZXJDbGFzc05hbWUgPSB1c2VNZW1vMygoKSA9PiBjc3NCdXR0b25XcmFwcGVyQ2xhc3Nlcy50b1N0cmluZygpLCBbY3NzQnV0dG9uV3JhcHBlckNsYXNzZXNdKTtcbiAgY29uc3QgdXNlckNvbXBTdGF0ZWxlc3MgPSB1c2VNZW1vMygoKSA9PiB7XG4gICAgY29uc3QgcmVzID0gdXNlckNvbXBEZXRhaWxzICYmIHVzZXJDb21wRGV0YWlscy5jb21wb25lbnRGcm9tRnJhbWV3b3JrICYmIGlzQ29tcG9uZW50U3RhdGVsZXNzKHVzZXJDb21wRGV0YWlscy5jb21wb25lbnRDbGFzcyk7XG4gICAgcmV0dXJuICEhcmVzO1xuICB9LCBbdXNlckNvbXBEZXRhaWxzXSk7XG4gIGNvbnN0IHJlYWN0aXZlQ3VzdG9tQ29tcG9uZW50cyA9IHVzZU1lbW8zKCgpID0+IGdvcy5nZXQoXCJyZWFjdGl2ZUN1c3RvbUNvbXBvbmVudHNcIiksIFtdKTtcbiAgY29uc3QgZmxvYXRpbmdGaWx0ZXJDb21wUHJveHkgPSB1c2VNZW1vMygoKSA9PiB7XG4gICAgaWYgKHVzZXJDb21wRGV0YWlscykge1xuICAgICAgaWYgKHJlYWN0aXZlQ3VzdG9tQ29tcG9uZW50cykge1xuICAgICAgICBjb25zdCBjb21wUHJveHkgPSBuZXcgRmxvYXRpbmdGaWx0ZXJDb21wb25lbnRQcm94eShcbiAgICAgICAgICB1c2VyQ29tcERldGFpbHMucGFyYW1zLFxuICAgICAgICAgICgpID0+IHNldFJlbmRlcktleSgocHJldikgPT4gcHJldiArIDEpXG4gICAgICAgICk7XG4gICAgICAgIHVzZXJDb21wUmVmKGNvbXBQcm94eSk7XG4gICAgICAgIHJldHVybiBjb21wUHJveHk7XG4gICAgICB9IGVsc2UgaWYgKHVzZXJDb21wRGV0YWlscy5jb21wb25lbnRGcm9tRnJhbWV3b3JrKSB7XG4gICAgICAgIHdhcm5SZWFjdGl2ZUN1c3RvbUNvbXBvbmVudHMoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfSwgW3VzZXJDb21wRGV0YWlsc10pO1xuICBjb25zdCBmbG9hdGluZ0ZpbHRlclByb3BzID0gZmxvYXRpbmdGaWx0ZXJDb21wUHJveHk/LmdldFByb3BzKCk7XG4gIGNvbnN0IHJlYWN0VXNlckNvbXAgPSB1c2VyQ29tcERldGFpbHMgJiYgdXNlckNvbXBEZXRhaWxzLmNvbXBvbmVudEZyb21GcmFtZXdvcms7XG4gIGNvbnN0IFVzZXJDb21wQ2xhc3MgPSB1c2VyQ29tcERldGFpbHMgJiYgdXNlckNvbXBEZXRhaWxzLmNvbXBvbmVudENsYXNzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBzZXRSZWYyLCBjbGFzc05hbWUsIHJvbGU6IFwiZ3JpZGNlbGxcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IGVGbG9hdGluZ0ZpbHRlckJvZHksIGNsYXNzTmFtZTogYm9keUNsYXNzTmFtZSwgcm9sZTogXCJwcmVzZW50YXRpb25cIiB9LCByZWFjdFVzZXJDb21wICYmICFyZWFjdGl2ZUN1c3RvbUNvbXBvbmVudHMgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KFVzZXJDb21wQ2xhc3MsIHsgLi4udXNlckNvbXBEZXRhaWxzLnBhcmFtcywgcmVmOiB1c2VyQ29tcFN0YXRlbGVzcyA/ICgpID0+IHtcbiAgfSA6IHVzZXJDb21wUmVmIH0pLCByZWFjdFVzZXJDb21wICYmIHJlYWN0aXZlQ3VzdG9tQ29tcG9uZW50cyAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoXG4gICAgQ3VzdG9tQ29udGV4dC5Qcm92aWRlcixcbiAgICB7XG4gICAgICB2YWx1ZToge1xuICAgICAgICBzZXRNZXRob2RzOiAobWV0aG9kcykgPT4gZmxvYXRpbmdGaWx0ZXJDb21wUHJveHkuc2V0TWV0aG9kcyhtZXRob2RzKVxuICAgICAgfVxuICAgIH0sXG4gICAgLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KFVzZXJDb21wQ2xhc3MsIHsgLi4uZmxvYXRpbmdGaWx0ZXJQcm9wcyB9KVxuICApKSwgLyogQF9fUFVSRV9fICovIFJlYWN0Ni5jcmVhdGVFbGVtZW50KFxuICAgIFwiZGl2XCIsXG4gICAge1xuICAgICAgcmVmOiBlQnV0dG9uV3JhcHBlcixcbiAgICAgIFwiYXJpYS1oaWRkZW5cIjogYnV0dG9uV3JhcHBlckFyaWFIaWRkZW4sXG4gICAgICBjbGFzc05hbWU6IGJ1dHRvbldyYXBwZXJDbGFzc05hbWUsXG4gICAgICByb2xlOiBcInByZXNlbnRhdGlvblwiXG4gICAgfSxcbiAgICAvKiBAX19QVVJFX18gKi8gUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcImJ1dHRvblwiLFxuICAgICAge1xuICAgICAgICByZWY6IGVCdXR0b25TaG93TWFpbkZpbHRlcixcbiAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgY2xhc3NOYW1lOiBcImFnLWJ1dHRvbiBhZy1mbG9hdGluZy1maWx0ZXItYnV0dG9uLWJ1dHRvblwiLFxuICAgICAgICB0YWJJbmRleDogLTFcbiAgICAgIH1cbiAgICApXG4gICkpO1xufTtcbnZhciBoZWFkZXJGaWx0ZXJDZWxsQ29tcF9kZWZhdWx0ID0gbWVtbzMoSGVhZGVyRmlsdGVyQ2VsbENvbXApO1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9yZWFjdFVpL2hlYWRlci9oZWFkZXJHcm91cENlbGxDb21wLnRzeFxuaW1wb3J0IHsgX0VtcHR5QmVhbiBhcyBfRW1wdHlCZWFuMyB9IGZyb20gXCJhZy1ncmlkLWNvbW11bml0eVwiO1xuaW1wb3J0IFJlYWN0NywgeyBtZW1vIGFzIG1lbW80LCB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazQsIHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDQsIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QzLCB1c2VMYXlvdXRFZmZlY3QgYXMgdXNlTGF5b3V0RWZmZWN0NCwgdXNlTWVtbyBhcyB1c2VNZW1vNCwgdXNlUmVmIGFzIHVzZVJlZjQsIHVzZVN0YXRlIGFzIHVzZVN0YXRlNSB9IGZyb20gXCJyZWFjdFwiO1xudmFyIEhlYWRlckdyb3VwQ2VsbENvbXAgPSAoeyBjdHJsIH0pID0+IHtcbiAgY29uc3QgeyBjb250ZXh0IH0gPSB1c2VDb250ZXh0NChCZWFuc0NvbnRleHQpO1xuICBjb25zdCBbY3NzQ2xhc3Nlcywgc2V0Q3NzQ2xhc3Nlc10gPSB1c2VTdGF0ZTUoKCkgPT4gbmV3IENzc0NsYXNzZXMoKSk7XG4gIGNvbnN0IFtjc3NSZXNpemFibGVDbGFzc2VzLCBzZXRSZXNpemFibGVDc3NDbGFzc2VzXSA9IHVzZVN0YXRlNSgoKSA9PiBuZXcgQ3NzQ2xhc3NlcygpKTtcbiAgY29uc3QgW3Jlc2l6YWJsZUFyaWFIaWRkZW4sIHNldFJlc2l6YWJsZUFyaWFIaWRkZW5dID0gdXNlU3RhdGU1KFwiZmFsc2VcIik7XG4gIGNvbnN0IFthcmlhRXhwYW5kZWQsIHNldEFyaWFFeHBhbmRlZF0gPSB1c2VTdGF0ZTUoKTtcbiAgY29uc3QgW3VzZXJDb21wRGV0YWlscywgc2V0VXNlckNvbXBEZXRhaWxzXSA9IHVzZVN0YXRlNSgpO1xuICBjb25zdCBjb2xJZCA9IHVzZU1lbW80KCgpID0+IGN0cmwuZ2V0Q29sSWQoKSwgW10pO1xuICBjb25zdCBjb21wQmVhbiA9IHVzZVJlZjQoKTtcbiAgY29uc3QgZUd1aSA9IHVzZVJlZjQobnVsbCk7XG4gIGNvbnN0IGVSZXNpemUgPSB1c2VSZWY0KG51bGwpO1xuICBjb25zdCBlSGVhZGVyQ29tcFdyYXBwZXIgPSB1c2VSZWY0KG51bGwpO1xuICBjb25zdCB1c2VyQ29tcFJlZiA9IHVzZVJlZjQoKTtcbiAgY29uc3Qgc2V0UmVmMiA9IHVzZUNhbGxiYWNrNCgoZVJlZikgPT4ge1xuICAgIGVHdWkuY3VycmVudCA9IGVSZWY7XG4gICAgY29tcEJlYW4uY3VycmVudCA9IGVSZWYgPyBjb250ZXh0LmNyZWF0ZUJlYW4obmV3IF9FbXB0eUJlYW4zKCkpIDogY29udGV4dC5kZXN0cm95QmVhbihjb21wQmVhbi5jdXJyZW50KTtcbiAgICBpZiAoIWVSZWYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29tcFByb3h5ID0ge1xuICAgICAgc2V0V2lkdGg6ICh3aWR0aCkgPT4ge1xuICAgICAgICBpZiAoZUd1aS5jdXJyZW50KSB7XG4gICAgICAgICAgZUd1aS5jdXJyZW50LnN0eWxlLndpZHRoID0gd2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhZGRPclJlbW92ZUNzc0NsYXNzOiAobmFtZSwgb24pID0+IHNldENzc0NsYXNzZXMoKHByZXYpID0+IHByZXYuc2V0Q2xhc3MobmFtZSwgb24pKSxcbiAgICAgIHNldEhlYWRlcldyYXBwZXJIaWRkZW46IChoaWRkZW4pID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGVyQ29tcFdyYXBwZXIgPSBlSGVhZGVyQ29tcFdyYXBwZXIuY3VycmVudDtcbiAgICAgICAgaWYgKCFoZWFkZXJDb21wV3JhcHBlcikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGlkZGVuKSB7XG4gICAgICAgICAgaGVhZGVyQ29tcFdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoZWFkZXJDb21wV3JhcHBlci5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImRpc3BsYXlcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzZXRIZWFkZXJXcmFwcGVyTWF4SGVpZ2h0OiAodmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGVyQ29tcFdyYXBwZXIgPSBlSGVhZGVyQ29tcFdyYXBwZXIuY3VycmVudDtcbiAgICAgICAgaWYgKCFoZWFkZXJDb21wV3JhcHBlcikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgIGhlYWRlckNvbXBXcmFwcGVyLnN0eWxlLnNldFByb3BlcnR5KFwibWF4LWhlaWdodFwiLCBgJHt2YWx1ZX1weGApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhlYWRlckNvbXBXcmFwcGVyLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwibWF4LWhlaWdodFwiKTtcbiAgICAgICAgfVxuICAgICAgICBoZWFkZXJDb21wV3JhcHBlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWctaGVhZGVyLWNlbGwtY29tcC13cmFwcGVyLWxpbWl0ZWQtaGVpZ2h0XCIsIHZhbHVlICE9IG51bGwpO1xuICAgICAgfSxcbiAgICAgIHNldFVzZXJDb21wRGV0YWlsczogKGNvbXBEZXRhaWxzKSA9PiBzZXRVc2VyQ29tcERldGFpbHMoY29tcERldGFpbHMpLFxuICAgICAgc2V0UmVzaXphYmxlRGlzcGxheWVkOiAoZGlzcGxheWVkKSA9PiB7XG4gICAgICAgIHNldFJlc2l6YWJsZUNzc0NsYXNzZXMoKHByZXYpID0+IHByZXYuc2V0Q2xhc3MoXCJhZy1oaWRkZW5cIiwgIWRpc3BsYXllZCkpO1xuICAgICAgICBzZXRSZXNpemFibGVBcmlhSGlkZGVuKCFkaXNwbGF5ZWQgPyBcInRydWVcIiA6IFwiZmFsc2VcIik7XG4gICAgICB9LFxuICAgICAgc2V0QXJpYUV4cGFuZGVkOiAoZXhwYW5kZWQpID0+IHNldEFyaWFFeHBhbmRlZChleHBhbmRlZCksXG4gICAgICBnZXRVc2VyQ29tcEluc3RhbmNlOiAoKSA9PiB1c2VyQ29tcFJlZi5jdXJyZW50IHx8IHZvaWQgMFxuICAgIH07XG4gICAgY3RybC5zZXRDb21wKGNvbXBQcm94eSwgZVJlZiwgZVJlc2l6ZS5jdXJyZW50LCBlSGVhZGVyQ29tcFdyYXBwZXIuY3VycmVudCwgY29tcEJlYW4uY3VycmVudCk7XG4gIH0sIFtdKTtcbiAgdXNlTGF5b3V0RWZmZWN0NCgoKSA9PiBzaG93SnNDb21wKHVzZXJDb21wRGV0YWlscywgY29udGV4dCwgZUhlYWRlckNvbXBXcmFwcGVyLmN1cnJlbnQpLCBbdXNlckNvbXBEZXRhaWxzXSk7XG4gIHVzZUVmZmVjdDMoKCkgPT4ge1xuICAgIGlmIChlR3VpLmN1cnJlbnQpIHtcbiAgICAgIGN0cmwuc2V0RHJhZ1NvdXJjZShlR3VpLmN1cnJlbnQpO1xuICAgIH1cbiAgfSwgW3VzZXJDb21wRGV0YWlsc10pO1xuICBjb25zdCB1c2VyQ29tcFN0YXRlbGVzcyA9IHVzZU1lbW80KCgpID0+IHtcbiAgICBjb25zdCByZXMgPSB1c2VyQ29tcERldGFpbHM/LmNvbXBvbmVudEZyb21GcmFtZXdvcmsgJiYgaXNDb21wb25lbnRTdGF0ZWxlc3ModXNlckNvbXBEZXRhaWxzLmNvbXBvbmVudENsYXNzKTtcbiAgICByZXR1cm4gISFyZXM7XG4gIH0sIFt1c2VyQ29tcERldGFpbHNdKTtcbiAgY29uc3QgY2xhc3NOYW1lID0gdXNlTWVtbzQoKCkgPT4gXCJhZy1oZWFkZXItZ3JvdXAtY2VsbCBcIiArIGNzc0NsYXNzZXMudG9TdHJpbmcoKSwgW2Nzc0NsYXNzZXNdKTtcbiAgY29uc3QgcmVzaXphYmxlQ2xhc3NOYW1lID0gdXNlTWVtbzQoXG4gICAgKCkgPT4gXCJhZy1oZWFkZXItY2VsbC1yZXNpemUgXCIgKyBjc3NSZXNpemFibGVDbGFzc2VzLnRvU3RyaW5nKCksXG4gICAgW2Nzc1Jlc2l6YWJsZUNsYXNzZXNdXG4gICk7XG4gIGNvbnN0IHJlYWN0VXNlckNvbXAgPSB1c2VyQ29tcERldGFpbHMgJiYgdXNlckNvbXBEZXRhaWxzLmNvbXBvbmVudEZyb21GcmFtZXdvcms7XG4gIGNvbnN0IFVzZXJDb21wQ2xhc3MgPSB1c2VyQ29tcERldGFpbHMgJiYgdXNlckNvbXBEZXRhaWxzLmNvbXBvbmVudENsYXNzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0Ny5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBzZXRSZWYyLCBjbGFzc05hbWUsIFwiY29sLWlkXCI6IGNvbElkLCByb2xlOiBcImNvbHVtbmhlYWRlclwiLCBcImFyaWEtZXhwYW5kZWRcIjogYXJpYUV4cGFuZGVkIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogZUhlYWRlckNvbXBXcmFwcGVyLCBjbGFzc05hbWU6IFwiYWctaGVhZGVyLWNlbGwtY29tcC13cmFwcGVyXCIsIHJvbGU6IFwicHJlc2VudGF0aW9uXCIgfSwgcmVhY3RVc2VyQ29tcCAmJiB1c2VyQ29tcFN0YXRlbGVzcyAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3LmNyZWF0ZUVsZW1lbnQoVXNlckNvbXBDbGFzcywgeyAuLi51c2VyQ29tcERldGFpbHMucGFyYW1zIH0pLCByZWFjdFVzZXJDb21wICYmICF1c2VyQ29tcFN0YXRlbGVzcyAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3LmNyZWF0ZUVsZW1lbnQoVXNlckNvbXBDbGFzcywgeyAuLi51c2VyQ29tcERldGFpbHMucGFyYW1zLCByZWY6IHVzZXJDb21wUmVmIH0pKSwgLyogQF9fUFVSRV9fICovIFJlYWN0Ny5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBlUmVzaXplLCBcImFyaWEtaGlkZGVuXCI6IHJlc2l6YWJsZUFyaWFIaWRkZW4sIGNsYXNzTmFtZTogcmVzaXphYmxlQ2xhc3NOYW1lIH0pKTtcbn07XG52YXIgaGVhZGVyR3JvdXBDZWxsQ29tcF9kZWZhdWx0ID0gbWVtbzQoSGVhZGVyR3JvdXBDZWxsQ29tcCk7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvaGVhZGVyL2hlYWRlclJvd0NvbXAudHN4XG52YXIgSGVhZGVyUm93Q29tcCA9ICh7IGN0cmwgfSkgPT4ge1xuICBjb25zdCB7IGNvbnRleHQgfSA9IHVzZUNvbnRleHQ1KEJlYW5zQ29udGV4dCk7XG4gIGNvbnN0IHsgdG9wT2Zmc2V0LCByb3dIZWlnaHQgfSA9IHVzZU1lbW81KCgpID0+IGN0cmwuZ2V0VG9wQW5kSGVpZ2h0KCksIFtdKTtcbiAgY29uc3QgYXJpYVJvd0luZGV4ID0gY3RybC5nZXRBcmlhUm93SW5kZXgoKTtcbiAgY29uc3QgY2xhc3NOYW1lID0gY3RybC5nZXRIZWFkZXJSb3dDbGFzcygpO1xuICBjb25zdCBbaGVpZ2h0LCBzZXRIZWlnaHRdID0gdXNlU3RhdGU2KCgpID0+IHJvd0hlaWdodCArIFwicHhcIik7XG4gIGNvbnN0IFt0b3AsIHNldFRvcF0gPSB1c2VTdGF0ZTYoKCkgPT4gdG9wT2Zmc2V0ICsgXCJweFwiKTtcbiAgY29uc3QgY2VsbEN0cmxzUmVmID0gdXNlUmVmNShudWxsKTtcbiAgY29uc3QgcHJldkNlbGxDdHJsc1JlZiA9IHVzZVJlZjUobnVsbCk7XG4gIGNvbnN0IFtjZWxsQ3RybHMsIHNldENlbGxDdHJsc10gPSB1c2VTdGF0ZTYoKCkgPT4gY3RybC5nZXRIZWFkZXJDdHJscygpKTtcbiAgY29uc3QgY29tcEJlYW4gPSB1c2VSZWY1KCk7XG4gIGNvbnN0IGVHdWkgPSB1c2VSZWY1KG51bGwpO1xuICBjb25zdCBzZXRSZWYyID0gdXNlQ2FsbGJhY2s1KChlUmVmKSA9PiB7XG4gICAgZUd1aS5jdXJyZW50ID0gZVJlZjtcbiAgICBjb21wQmVhbi5jdXJyZW50ID0gZVJlZiA/IGNvbnRleHQuY3JlYXRlQmVhbihuZXcgX0VtcHR5QmVhbjQoKSkgOiBjb250ZXh0LmRlc3Ryb3lCZWFuKGNvbXBCZWFuLmN1cnJlbnQpO1xuICAgIGlmICghZVJlZikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb21wUHJveHkgPSB7XG4gICAgICBzZXRIZWlnaHQ6IChoZWlnaHQyKSA9PiBzZXRIZWlnaHQoaGVpZ2h0MiksXG4gICAgICBzZXRUb3A6ICh0b3AyKSA9PiBzZXRUb3AodG9wMiksXG4gICAgICBzZXRIZWFkZXJDdHJsczogKGN0cmxzLCBmb3JjZU9yZGVyLCBhZnRlclNjcm9sbCkgPT4ge1xuICAgICAgICBwcmV2Q2VsbEN0cmxzUmVmLmN1cnJlbnQgPSBjZWxsQ3RybHNSZWYuY3VycmVudDtcbiAgICAgICAgY2VsbEN0cmxzUmVmLmN1cnJlbnQgPSBjdHJscztcbiAgICAgICAgY29uc3QgbmV4dCA9IGdldE5leHRWYWx1ZUlmRGlmZmVyZW50KHByZXZDZWxsQ3RybHNSZWYuY3VycmVudCwgY3RybHMsIGZvcmNlT3JkZXIpO1xuICAgICAgICBpZiAobmV4dCAhPT0gcHJldkNlbGxDdHJsc1JlZi5jdXJyZW50KSB7XG4gICAgICAgICAgYWdGbHVzaFN5bmMoYWZ0ZXJTY3JvbGwsICgpID0+IHNldENlbGxDdHJscyhuZXh0KSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzZXRXaWR0aDogKHdpZHRoKSA9PiB7XG4gICAgICAgIGlmIChlR3VpLmN1cnJlbnQpIHtcbiAgICAgICAgICBlR3VpLmN1cnJlbnQuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgY3RybC5zZXRDb21wKGNvbXBQcm94eSwgY29tcEJlYW4uY3VycmVudCwgZmFsc2UpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHN0eWxlID0gdXNlTWVtbzUoXG4gICAgKCkgPT4gKHtcbiAgICAgIGhlaWdodCxcbiAgICAgIHRvcFxuICAgIH0pLFxuICAgIFtoZWlnaHQsIHRvcF1cbiAgKTtcbiAgY29uc3QgY3JlYXRlQ2VsbEpzeCA9IHVzZUNhbGxiYWNrNSgoY2VsbEN0cmwpID0+IHtcbiAgICBzd2l0Y2ggKGN0cmwuZ2V0VHlwZSgpKSB7XG4gICAgICBjYXNlIEhlYWRlclJvd1R5cGUuQ09MVU1OX0dST1VQOlxuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KGhlYWRlckdyb3VwQ2VsbENvbXBfZGVmYXVsdCwgeyBjdHJsOiBjZWxsQ3RybCwga2V5OiBjZWxsQ3RybC5pbnN0YW5jZUlkIH0pO1xuICAgICAgY2FzZSBIZWFkZXJSb3dUeXBlLkZMT0FUSU5HX0ZJTFRFUjpcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChoZWFkZXJGaWx0ZXJDZWxsQ29tcF9kZWZhdWx0LCB7IGN0cmw6IGNlbGxDdHJsLCBrZXk6IGNlbGxDdHJsLmluc3RhbmNlSWQgfSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OC5jcmVhdGVFbGVtZW50KGhlYWRlckNlbGxDb21wX2RlZmF1bHQsIHsgY3RybDogY2VsbEN0cmwsIGtleTogY2VsbEN0cmwuaW5zdGFuY2VJZCB9KTtcbiAgICB9XG4gIH0sIFtdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogc2V0UmVmMiwgY2xhc3NOYW1lLCByb2xlOiBcInJvd1wiLCBzdHlsZSwgXCJhcmlhLXJvd2luZGV4XCI6IGFyaWFSb3dJbmRleCB9LCBjZWxsQ3RybHMubWFwKGNyZWF0ZUNlbGxKc3gpKTtcbn07XG52YXIgaGVhZGVyUm93Q29tcF9kZWZhdWx0ID0gbWVtbzUoSGVhZGVyUm93Q29tcCk7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvaGVhZGVyL2hlYWRlclJvd0NvbnRhaW5lckNvbXAudHN4XG52YXIgSGVhZGVyUm93Q29udGFpbmVyQ29tcCA9ICh7IHBpbm5lZCB9KSA9PiB7XG4gIGNvbnN0IFtkaXNwbGF5ZWQsIHNldERpc3BsYXllZF0gPSB1c2VTdGF0ZTcodHJ1ZSk7XG4gIGNvbnN0IFtoZWFkZXJSb3dDdHJscywgc2V0SGVhZGVyUm93Q3RybHNdID0gdXNlU3RhdGU3KFtdKTtcbiAgY29uc3QgeyBjb250ZXh0IH0gPSB1c2VDb250ZXh0NihCZWFuc0NvbnRleHQpO1xuICBjb25zdCBlR3VpID0gdXNlUmVmNihudWxsKTtcbiAgY29uc3QgZUNlbnRlckNvbnRhaW5lciA9IHVzZVJlZjYobnVsbCk7XG4gIGNvbnN0IGhlYWRlclJvd0N0cmxSZWYgPSB1c2VSZWY2KCk7XG4gIGNvbnN0IHBpbm5lZExlZnQgPSBwaW5uZWQgPT09IFwibGVmdFwiO1xuICBjb25zdCBwaW5uZWRSaWdodCA9IHBpbm5lZCA9PT0gXCJyaWdodFwiO1xuICBjb25zdCBjZW50cmUgPSAhcGlubmVkTGVmdCAmJiAhcGlubmVkUmlnaHQ7XG4gIGNvbnN0IHNldFJlZjIgPSB1c2VDYWxsYmFjazYoKGVSZWYpID0+IHtcbiAgICBlR3VpLmN1cnJlbnQgPSBlUmVmO1xuICAgIGhlYWRlclJvd0N0cmxSZWYuY3VycmVudCA9IGVSZWYgPyBjb250ZXh0LmNyZWF0ZUJlYW4obmV3IEhlYWRlclJvd0NvbnRhaW5lckN0cmwocGlubmVkKSkgOiBjb250ZXh0LmRlc3Ryb3lCZWFuKGhlYWRlclJvd0N0cmxSZWYuY3VycmVudCk7XG4gICAgaWYgKCFlUmVmKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbXBQcm94eSA9IHtcbiAgICAgIHNldERpc3BsYXllZCxcbiAgICAgIHNldEN0cmxzOiAoY3RybHMpID0+IHNldEhlYWRlclJvd0N0cmxzKGN0cmxzKSxcbiAgICAgIC8vIGNlbnRyZSBvbmx5XG4gICAgICBzZXRDZW50ZXJXaWR0aDogKHdpZHRoKSA9PiB7XG4gICAgICAgIGlmIChlQ2VudGVyQ29udGFpbmVyLmN1cnJlbnQpIHtcbiAgICAgICAgICBlQ2VudGVyQ29udGFpbmVyLmN1cnJlbnQuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldFZpZXdwb3J0U2Nyb2xsTGVmdDogKGxlZnQpID0+IHtcbiAgICAgICAgaWYgKGVHdWkuY3VycmVudCkge1xuICAgICAgICAgIGVHdWkuY3VycmVudC5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIHBpbm5lZCBvbmx5XG4gICAgICBzZXRQaW5uZWRDb250YWluZXJXaWR0aDogKHdpZHRoKSA9PiB7XG4gICAgICAgIGlmIChlR3VpLmN1cnJlbnQpIHtcbiAgICAgICAgICBlR3VpLmN1cnJlbnQuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICBlR3VpLmN1cnJlbnQuc3R5bGUubWluV2lkdGggPSB3aWR0aDtcbiAgICAgICAgICBlR3VpLmN1cnJlbnQuc3R5bGUubWF4V2lkdGggPSB3aWR0aDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgaGVhZGVyUm93Q3RybFJlZi5jdXJyZW50LnNldENvbXAoY29tcFByb3h5LCBlR3VpLmN1cnJlbnQpO1xuICB9LCBbXSk7XG4gIGNvbnN0IGNsYXNzTmFtZSA9ICFkaXNwbGF5ZWQgPyBcImFnLWhpZGRlblwiIDogXCJcIjtcbiAgY29uc3QgaW5zZXJ0Um93c0pzeCA9ICgpID0+IGhlYWRlclJvd0N0cmxzLm1hcCgoY3RybCkgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0OS5jcmVhdGVFbGVtZW50KGhlYWRlclJvd0NvbXBfZGVmYXVsdCwgeyBjdHJsLCBrZXk6IGN0cmwuaW5zdGFuY2VJZCB9KSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoUmVhY3Q5LkZyYWdtZW50LCBudWxsLCBwaW5uZWRMZWZ0ICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkuY3JlYXRlRWxlbWVudChcbiAgICBcImRpdlwiLFxuICAgIHtcbiAgICAgIHJlZjogc2V0UmVmMixcbiAgICAgIGNsYXNzTmFtZTogXCJhZy1waW5uZWQtbGVmdC1oZWFkZXIgXCIgKyBjbGFzc05hbWUsXG4gICAgICBcImFyaWEtaGlkZGVuXCI6ICFkaXNwbGF5ZWQsXG4gICAgICByb2xlOiBcInJvd2dyb3VwXCJcbiAgICB9LFxuICAgIGluc2VydFJvd3NKc3goKVxuICApLCBwaW5uZWRSaWdodCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoXG4gICAgXCJkaXZcIixcbiAgICB7XG4gICAgICByZWY6IHNldFJlZjIsXG4gICAgICBjbGFzc05hbWU6IFwiYWctcGlubmVkLXJpZ2h0LWhlYWRlciBcIiArIGNsYXNzTmFtZSxcbiAgICAgIFwiYXJpYS1oaWRkZW5cIjogIWRpc3BsYXllZCxcbiAgICAgIHJvbGU6IFwicm93Z3JvdXBcIlxuICAgIH0sXG4gICAgaW5zZXJ0Um93c0pzeCgpXG4gICksIGNlbnRyZSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IHNldFJlZjIsIGNsYXNzTmFtZTogXCJhZy1oZWFkZXItdmlld3BvcnQgXCIgKyBjbGFzc05hbWUsIHJvbGU6IFwicHJlc2VudGF0aW9uXCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0OS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBlQ2VudGVyQ29udGFpbmVyLCBjbGFzc05hbWU6IFwiYWctaGVhZGVyLWNvbnRhaW5lclwiLCByb2xlOiBcInJvd2dyb3VwXCIgfSwgaW5zZXJ0Um93c0pzeCgpKSkpO1xufTtcbnZhciBoZWFkZXJSb3dDb250YWluZXJDb21wX2RlZmF1bHQgPSBtZW1vNihIZWFkZXJSb3dDb250YWluZXJDb21wKTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9oZWFkZXIvZ3JpZEhlYWRlckNvbXAudHN4XG52YXIgR3JpZEhlYWRlckNvbXAgPSAoKSA9PiB7XG4gIGNvbnN0IFtjc3NDbGFzc2VzLCBzZXRDc3NDbGFzc2VzXSA9IHVzZVN0YXRlOCgoKSA9PiBuZXcgQ3NzQ2xhc3NlcygpKTtcbiAgY29uc3QgW2hlaWdodCwgc2V0SGVpZ2h0XSA9IHVzZVN0YXRlOCgpO1xuICBjb25zdCB7IGNvbnRleHQgfSA9IHVzZUNvbnRleHQ3KEJlYW5zQ29udGV4dCk7XG4gIGNvbnN0IGVHdWkgPSB1c2VSZWY3KG51bGwpO1xuICBjb25zdCBncmlkQ3RybFJlZiA9IHVzZVJlZjcoKTtcbiAgY29uc3Qgc2V0UmVmMiA9IHVzZUNhbGxiYWNrNygoZVJlZikgPT4ge1xuICAgIGVHdWkuY3VycmVudCA9IGVSZWY7XG4gICAgZ3JpZEN0cmxSZWYuY3VycmVudCA9IGVSZWYgPyBjb250ZXh0LmNyZWF0ZUJlYW4obmV3IEdyaWRIZWFkZXJDdHJsKCkpIDogY29udGV4dC5kZXN0cm95QmVhbihncmlkQ3RybFJlZi5jdXJyZW50KTtcbiAgICBpZiAoIWVSZWYpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgY29tcFByb3h5ID0ge1xuICAgICAgYWRkT3JSZW1vdmVDc3NDbGFzczogKG5hbWUsIG9uKSA9PiBzZXRDc3NDbGFzc2VzKChwcmV2KSA9PiBwcmV2LnNldENsYXNzKG5hbWUsIG9uKSksXG4gICAgICBzZXRIZWlnaHRBbmRNaW5IZWlnaHQ6IChoZWlnaHQyKSA9PiBzZXRIZWlnaHQoaGVpZ2h0MilcbiAgICB9O1xuICAgIGdyaWRDdHJsUmVmLmN1cnJlbnQuc2V0Q29tcChjb21wUHJveHksIGVSZWYsIGVSZWYpO1xuICB9LCBbXSk7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IHVzZU1lbW82KCgpID0+IHtcbiAgICBjb25zdCByZXMgPSBjc3NDbGFzc2VzLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIFwiYWctaGVhZGVyIFwiICsgcmVzO1xuICB9LCBbY3NzQ2xhc3Nlc10pO1xuICBjb25zdCBzdHlsZSA9IHVzZU1lbW82KFxuICAgICgpID0+ICh7XG4gICAgICBoZWlnaHQsXG4gICAgICBtaW5IZWlnaHQ6IGhlaWdodFxuICAgIH0pLFxuICAgIFtoZWlnaHRdXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBzZXRSZWYyLCBjbGFzc05hbWUsIHN0eWxlLCByb2xlOiBcInByZXNlbnRhdGlvblwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoaGVhZGVyUm93Q29udGFpbmVyQ29tcF9kZWZhdWx0LCB7IHBpbm5lZDogXCJsZWZ0XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoaGVhZGVyUm93Q29udGFpbmVyQ29tcF9kZWZhdWx0LCB7IHBpbm5lZDogbnVsbCB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTAuY3JlYXRlRWxlbWVudChoZWFkZXJSb3dDb250YWluZXJDb21wX2RlZmF1bHQsIHsgcGlubmVkOiBcInJpZ2h0XCIgfSkpO1xufTtcbnZhciBncmlkSGVhZGVyQ29tcF9kZWZhdWx0ID0gbWVtbzcoR3JpZEhlYWRlckNvbXApO1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9yZWFjdFVpL3JlYWN0Q29tbWVudC50c3hcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3Q0IH0gZnJvbSBcInJlYWN0XCI7XG52YXIgdXNlUmVhY3RDb21tZW50RWZmZWN0ID0gKGNvbW1lbnQsIGVGb3JDb21tZW50UmVmKSA9PiB7XG4gIHVzZUVmZmVjdDQoKCkgPT4ge1xuICAgIGNvbnN0IGVGb3JDb21tZW50ID0gZUZvckNvbW1lbnRSZWYuY3VycmVudDtcbiAgICBpZiAoZUZvckNvbW1lbnQpIHtcbiAgICAgIGNvbnN0IGVQYXJlbnQgPSBlRm9yQ29tbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgaWYgKGVQYXJlbnQpIHtcbiAgICAgICAgY29uc3QgZUNvbW1lbnQgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KGNvbW1lbnQpO1xuICAgICAgICBlUGFyZW50Lmluc2VydEJlZm9yZShlQ29tbWVudCwgZUZvckNvbW1lbnQpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIGVQYXJlbnQucmVtb3ZlQ2hpbGQoZUNvbW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbW1lbnRdKTtcbn07XG52YXIgcmVhY3RDb21tZW50X2RlZmF1bHQgPSB1c2VSZWFjdENvbW1lbnRFZmZlY3Q7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvcm93cy9yb3dDb250YWluZXJDb21wLnRzeFxuaW1wb3J0IHsgUm93Q29udGFpbmVyQ3RybCwgX2dldFJvd0NvbnRhaW5lck9wdGlvbnMgfSBmcm9tIFwiYWctZ3JpZC1jb21tdW5pdHlcIjtcbmltcG9ydCBSZWFjdDE0LCB7IG1lbW8gYXMgbWVtbzExLCB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazExLCB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQxMiwgdXNlTWVtbyBhcyB1c2VNZW1vOSwgdXNlUmVmIGFzIHVzZVJlZjExLCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTEzIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvcm93cy9yb3dDb21wLnRzeFxuaW1wb3J0IHsgQ3NzQ2xhc3NNYW5hZ2VyIGFzIENzc0NsYXNzTWFuYWdlcjMsIF9FbXB0eUJlYW4gYXMgX0VtcHR5QmVhbjYgfSBmcm9tIFwiYWctZ3JpZC1jb21tdW5pdHlcIjtcbmltcG9ydCBSZWFjdDEzLCB7IG1lbW8gYXMgbWVtbzEwLCB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazEwLCB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQxMSwgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDcsIHVzZUxheW91dEVmZmVjdCBhcyB1c2VMYXlvdXRFZmZlY3Q2LCB1c2VNZW1vIGFzIHVzZU1lbW84LCB1c2VSZWYgYXMgdXNlUmVmMTAsIHVzZVN0YXRlIGFzIHVzZVN0YXRlMTIgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9jZWxscy9jZWxsQ29tcC50c3hcbmltcG9ydCB7IENzc0NsYXNzTWFuYWdlciBhcyBDc3NDbGFzc01hbmFnZXIyLCBfRW1wdHlCZWFuIGFzIF9FbXB0eUJlYW41LCBfcmVtb3ZlRnJvbVBhcmVudCB9IGZyb20gXCJhZy1ncmlkLWNvbW11bml0eVwiO1xuaW1wb3J0IFJlYWN0MTIsIHsgbWVtbyBhcyBtZW1vOSwgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2s5LCB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQxMCwgdXNlTGF5b3V0RWZmZWN0IGFzIHVzZUxheW91dEVmZmVjdDUsIHVzZU1lbW8gYXMgdXNlTWVtbzcsIHVzZVJlZiBhcyB1c2VSZWY5LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTExIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3NoYXJlZC9jdXN0b21Db21wL2NlbGxFZGl0b3JDb21wb25lbnRQcm94eS50c1xuaW1wb3J0IHsgQWdQcm9taXNlIGFzIEFnUHJvbWlzZTYgfSBmcm9tIFwiYWctZ3JpZC1jb21tdW5pdHlcIjtcbnZhciBDZWxsRWRpdG9yQ29tcG9uZW50UHJveHkgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGNlbGxFZGl0b3JQYXJhbXMsIHJlZnJlc2hQcm9wcykge1xuICAgIHRoaXMuY2VsbEVkaXRvclBhcmFtcyA9IGNlbGxFZGl0b3JQYXJhbXM7XG4gICAgdGhpcy5yZWZyZXNoUHJvcHMgPSByZWZyZXNoUHJvcHM7XG4gICAgdGhpcy5pbnN0YW5jZUNyZWF0ZWQgPSBuZXcgQWdQcm9taXNlNigocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5yZXNvbHZlSW5zdGFuY2VDcmVhdGVkID0gcmVzb2x2ZTtcbiAgICB9KTtcbiAgICB0aGlzLm9uVmFsdWVDaGFuZ2UgPSAodmFsdWUpID0+IHRoaXMudXBkYXRlVmFsdWUodmFsdWUpO1xuICAgIHRoaXMudmFsdWUgPSBjZWxsRWRpdG9yUGFyYW1zLnZhbHVlO1xuICB9XG4gIGdldFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLmNlbGxFZGl0b3JQYXJhbXMsXG4gICAgICBpbml0aWFsVmFsdWU6IHRoaXMuY2VsbEVkaXRvclBhcmFtcy52YWx1ZSxcbiAgICAgIHZhbHVlOiB0aGlzLnZhbHVlLFxuICAgICAgb25WYWx1ZUNoYW5nZTogdGhpcy5vblZhbHVlQ2hhbmdlXG4gICAgfTtcbiAgfVxuICBnZXRWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfVxuICByZWZyZXNoKHBhcmFtcykge1xuICAgIHRoaXMuY2VsbEVkaXRvclBhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLnJlZnJlc2hQcm9wcygpO1xuICB9XG4gIHNldE1ldGhvZHMobWV0aG9kcykge1xuICAgIGFkZE9wdGlvbmFsTWV0aG9kcyh0aGlzLmdldE9wdGlvbmFsTWV0aG9kcygpLCBtZXRob2RzLCB0aGlzKTtcbiAgfVxuICBnZXRJbnN0YW5jZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUNyZWF0ZWQudGhlbigoKSA9PiB0aGlzLmNvbXBvbmVudEluc3RhbmNlKTtcbiAgfVxuICBzZXRSZWYoY29tcG9uZW50SW5zdGFuY2UpIHtcbiAgICB0aGlzLmNvbXBvbmVudEluc3RhbmNlID0gY29tcG9uZW50SW5zdGFuY2U7XG4gICAgdGhpcy5yZXNvbHZlSW5zdGFuY2VDcmVhdGVkPy4oKTtcbiAgICB0aGlzLnJlc29sdmVJbnN0YW5jZUNyZWF0ZWQgPSB2b2lkIDA7XG4gIH1cbiAgZ2V0T3B0aW9uYWxNZXRob2RzKCkge1xuICAgIHJldHVybiBbXCJpc0NhbmNlbEJlZm9yZVN0YXJ0XCIsIFwiaXNDYW5jZWxBZnRlckVuZFwiLCBcImZvY3VzSW5cIiwgXCJmb2N1c091dFwiLCBcImFmdGVyR3VpQXR0YWNoZWRcIl07XG4gIH1cbiAgdXBkYXRlVmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5yZWZyZXNoUHJvcHMoKTtcbiAgfVxufTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9jZWxscy9wb3B1cEVkaXRvckNvbXAudHN4XG5pbXBvcnQgUmVhY3QxMSwgeyBtZW1vIGFzIG1lbW84LCB1c2VDb250ZXh0IGFzIHVzZUNvbnRleHQ4LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTEwIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjcmVhdGVQb3J0YWwgYXMgY3JlYXRlUG9ydGFsMiB9IGZyb20gXCJyZWFjdC1kb21cIjtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS91c2VFZmZlY3RPbmNlLnRzeFxuaW1wb3J0IHsgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDUsIHVzZVJlZiBhcyB1c2VSZWY4LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTkgfSBmcm9tIFwicmVhY3RcIjtcbnZhciB1c2VFZmZlY3RPbmNlID0gKGVmZmVjdCkgPT4ge1xuICBjb25zdCBlZmZlY3RGbiA9IHVzZVJlZjgoZWZmZWN0KTtcbiAgY29uc3QgZGVzdHJveUZuID0gdXNlUmVmOCgpO1xuICBjb25zdCBlZmZlY3RDYWxsZWQgPSB1c2VSZWY4KGZhbHNlKTtcbiAgY29uc3QgcmVuZGVyZWQgPSB1c2VSZWY4KGZhbHNlKTtcbiAgY29uc3QgWywgc2V0VmFsXSA9IHVzZVN0YXRlOSgwKTtcbiAgaWYgKGVmZmVjdENhbGxlZC5jdXJyZW50KSB7XG4gICAgcmVuZGVyZWQuY3VycmVudCA9IHRydWU7XG4gIH1cbiAgdXNlRWZmZWN0NSgoKSA9PiB7XG4gICAgaWYgKCFlZmZlY3RDYWxsZWQuY3VycmVudCkge1xuICAgICAgZGVzdHJveUZuLmN1cnJlbnQgPSBlZmZlY3RGbi5jdXJyZW50KCk7XG4gICAgICBlZmZlY3RDYWxsZWQuY3VycmVudCA9IHRydWU7XG4gICAgfVxuICAgIHNldFZhbCgodmFsKSA9PiB2YWwgKyAxKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKCFyZW5kZXJlZC5jdXJyZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGRlc3Ryb3lGbi5jdXJyZW50Py4oKTtcbiAgICB9O1xuICB9LCBbXSk7XG59O1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9yZWFjdFVpL2NlbGxzL3BvcHVwRWRpdG9yQ29tcC50c3hcbnZhciBQb3B1cEVkaXRvckNvbXAgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgW3BvcHVwRWRpdG9yV3JhcHBlciwgc2V0UG9wdXBFZGl0b3JXcmFwcGVyXSA9IHVzZVN0YXRlMTAoKTtcbiAgY29uc3QgeyBjb250ZXh0LCBwb3B1cFNlcnZpY2UsIGxvY2FsZVNlcnZpY2UsIGdvcywgZWRpdFNlcnZpY2UgfSA9IHVzZUNvbnRleHQ4KEJlYW5zQ29udGV4dCk7XG4gIHVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGNvbnN0IHsgZWRpdERldGFpbHMsIGNlbGxDdHJsLCBlUGFyZW50Q2VsbCB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyBjb21wRGV0YWlscyB9ID0gZWRpdERldGFpbHM7XG4gICAgY29uc3QgdXNlTW9kZWxQb3B1cCA9IGdvcy5nZXQoXCJzdG9wRWRpdGluZ1doZW5DZWxsc0xvc2VGb2N1c1wiKTtcbiAgICBjb25zdCB3cmFwcGVyID0gY29udGV4dC5jcmVhdGVCZWFuKGVkaXRTZXJ2aWNlLmNyZWF0ZVBvcHVwRWRpdG9yV3JhcHBlcihjb21wRGV0YWlscy5wYXJhbXMpKTtcbiAgICBjb25zdCBlUG9wdXBHdWkgPSB3cmFwcGVyLmdldEd1aSgpO1xuICAgIGlmIChwcm9wcy5qc0NoaWxkQ29tcCkge1xuICAgICAgY29uc3QgZUNoaWxkR3VpID0gcHJvcHMuanNDaGlsZENvbXAuZ2V0R3VpKCk7XG4gICAgICBpZiAoZUNoaWxkR3VpKSB7XG4gICAgICAgIGVQb3B1cEd1aS5hcHBlbmRDaGlsZChlQ2hpbGRHdWkpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwb3NpdGlvblBhcmFtcyA9IHtcbiAgICAgIGNvbHVtbjogY2VsbEN0cmwuZ2V0Q29sdW1uKCksXG4gICAgICByb3dOb2RlOiBjZWxsQ3RybC5nZXRSb3dOb2RlKCksXG4gICAgICB0eXBlOiBcInBvcHVwQ2VsbEVkaXRvclwiLFxuICAgICAgZXZlbnRTb3VyY2U6IGVQYXJlbnRDZWxsLFxuICAgICAgZVBvcHVwOiBlUG9wdXBHdWksXG4gICAgICBwb3NpdGlvbjogZWRpdERldGFpbHMucG9wdXBQb3NpdGlvbixcbiAgICAgIGtlZXBXaXRoaW5Cb3VuZHM6IHRydWVcbiAgICB9O1xuICAgIGNvbnN0IHBvc2l0aW9uQ2FsbGJhY2sgPSBwb3B1cFNlcnZpY2UucG9zaXRpb25Qb3B1cEJ5Q29tcG9uZW50LmJpbmQocG9wdXBTZXJ2aWNlLCBwb3NpdGlvblBhcmFtcyk7XG4gICAgY29uc3QgdHJhbnNsYXRlID0gbG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpO1xuICAgIGNvbnN0IGFkZFBvcHVwUmVzID0gcG9wdXBTZXJ2aWNlLmFkZFBvcHVwKHtcbiAgICAgIG1vZGFsOiB1c2VNb2RlbFBvcHVwLFxuICAgICAgZUNoaWxkOiBlUG9wdXBHdWksXG4gICAgICBjbG9zZU9uRXNjOiB0cnVlLFxuICAgICAgY2xvc2VkQ2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgY2VsbEN0cmwub25Qb3B1cEVkaXRvckNsb3NlZCgpO1xuICAgICAgfSxcbiAgICAgIGFuY2hvclRvRWxlbWVudDogZVBhcmVudENlbGwsXG4gICAgICBwb3NpdGlvbkNhbGxiYWNrLFxuICAgICAgYXJpYUxhYmVsOiB0cmFuc2xhdGUoXCJhcmlhTGFiZWxDZWxsRWRpdG9yXCIsIFwiQ2VsbCBFZGl0b3JcIilcbiAgICB9KTtcbiAgICBjb25zdCBoaWRlRWRpdG9yUG9wdXAgPSBhZGRQb3B1cFJlcyA/IGFkZFBvcHVwUmVzLmhpZGVGdW5jIDogdm9pZCAwO1xuICAgIHNldFBvcHVwRWRpdG9yV3JhcHBlcih3cmFwcGVyKTtcbiAgICBwcm9wcy5qc0NoaWxkQ29tcD8uYWZ0ZXJHdWlBdHRhY2hlZD8uKCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGhpZGVFZGl0b3JQb3B1cD8uKCk7XG4gICAgICBjb250ZXh0LmRlc3Ryb3lCZWFuKHdyYXBwZXIpO1xuICAgIH07XG4gIH0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTEuY3JlYXRlRWxlbWVudChSZWFjdDExLkZyYWdtZW50LCBudWxsLCBwb3B1cEVkaXRvcldyYXBwZXIgJiYgcHJvcHMud3JhcHBlZENvbnRlbnQgJiYgY3JlYXRlUG9ydGFsMihwcm9wcy53cmFwcGVkQ29udGVudCwgcG9wdXBFZGl0b3JXcmFwcGVyLmdldEd1aSgpKSk7XG59O1xudmFyIHBvcHVwRWRpdG9yQ29tcF9kZWZhdWx0ID0gbWVtbzgoUG9wdXBFZGl0b3JDb21wKTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9jZWxscy9zaG93SnNSZW5kZXJlci50c3hcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrOCwgdXNlQ29udGV4dCBhcyB1c2VDb250ZXh0OSwgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDYgfSBmcm9tIFwicmVhY3RcIjtcbnZhciB1c2VKc0NlbGxSZW5kZXJlciA9IChzaG93RGV0YWlscywgc2hvd1Rvb2xzLCBlQ2VsbFZhbHVlLCBjZWxsVmFsdWVWZXJzaW9uLCBqc0NlbGxSZW5kZXJlclJlZiwgZUd1aSkgPT4ge1xuICBjb25zdCB7IGNvbnRleHQgfSA9IHVzZUNvbnRleHQ5KEJlYW5zQ29udGV4dCk7XG4gIGNvbnN0IGRlc3Ryb3lDZWxsUmVuZGVyZXIgPSB1c2VDYWxsYmFjazgoKCkgPT4ge1xuICAgIGNvbnN0IGNvbXAgPSBqc0NlbGxSZW5kZXJlclJlZi5jdXJyZW50O1xuICAgIGlmICghY29tcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb21wR3VpID0gY29tcC5nZXRHdWkoKTtcbiAgICBpZiAoY29tcEd1aSAmJiBjb21wR3VpLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIGNvbXBHdWkucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChjb21wR3VpKTtcbiAgICB9XG4gICAgY29udGV4dC5kZXN0cm95QmVhbihjb21wKTtcbiAgICBqc0NlbGxSZW5kZXJlclJlZi5jdXJyZW50ID0gdm9pZCAwO1xuICB9LCBbXSk7XG4gIHVzZUVmZmVjdDYoKCkgPT4ge1xuICAgIGNvbnN0IHNob3dWYWx1ZSA9IHNob3dEZXRhaWxzICE9IG51bGw7XG4gICAgY29uc3QganNDb21wRGV0YWlscyA9IHNob3dEZXRhaWxzPy5jb21wRGV0YWlscyAmJiAhc2hvd0RldGFpbHMuY29tcERldGFpbHMuY29tcG9uZW50RnJvbUZyYW1ld29yaztcbiAgICBjb25zdCB3YWl0aW5nRm9yVG9vbHNTZXR1cCA9IHNob3dUb29scyAmJiBlQ2VsbFZhbHVlID09IG51bGw7XG4gICAgY29uc3Qgc2hvd0NvbXAgPSBzaG93VmFsdWUgJiYganNDb21wRGV0YWlscyAmJiAhd2FpdGluZ0ZvclRvb2xzU2V0dXA7XG4gICAgaWYgKCFzaG93Q29tcCkge1xuICAgICAgZGVzdHJveUNlbGxSZW5kZXJlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb21wRGV0YWlscyA9IHNob3dEZXRhaWxzLmNvbXBEZXRhaWxzO1xuICAgIGlmIChqc0NlbGxSZW5kZXJlclJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zdCBjb21wID0ganNDZWxsUmVuZGVyZXJSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IGF0dGVtcHRSZWZyZXNoID0gY29tcC5yZWZyZXNoICE9IG51bGwgJiYgc2hvd0RldGFpbHMuZm9yY2UgPT0gZmFsc2U7XG4gICAgICBjb25zdCByZWZyZXNoUmVzdWx0ID0gYXR0ZW1wdFJlZnJlc2ggPyBjb21wLnJlZnJlc2goY29tcERldGFpbHMucGFyYW1zKSA6IGZhbHNlO1xuICAgICAgY29uc3QgcmVmcmVzaFdvcmtlZCA9IHJlZnJlc2hSZXN1bHQgPT09IHRydWUgfHwgcmVmcmVzaFJlc3VsdCA9PT0gdm9pZCAwO1xuICAgICAgaWYgKHJlZnJlc2hXb3JrZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZGVzdHJveUNlbGxSZW5kZXJlcigpO1xuICAgIH1cbiAgICBjb25zdCBwcm9taXNlID0gY29tcERldGFpbHMubmV3QWdTdGFja0luc3RhbmNlKCk7XG4gICAgaWYgKHByb21pc2UgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwcm9taXNlLnRoZW4oKGNvbXApID0+IHtcbiAgICAgIGlmICghY29tcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjb21wR3VpID0gY29tcC5nZXRHdWkoKTtcbiAgICAgIGlmICghY29tcEd1aSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBwYXJlbnQgPSBzaG93VG9vbHMgPyBlQ2VsbFZhbHVlIDogZUd1aS5jdXJyZW50O1xuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNvbXBHdWkpO1xuICAgICAganNDZWxsUmVuZGVyZXJSZWYuY3VycmVudCA9IGNvbXA7XG4gICAgfSk7XG4gIH0sIFtzaG93RGV0YWlscywgc2hvd1Rvb2xzLCBjZWxsVmFsdWVWZXJzaW9uXSk7XG4gIHVzZUVmZmVjdDYoKCkgPT4ge1xuICAgIHJldHVybiBkZXN0cm95Q2VsbFJlbmRlcmVyO1xuICB9LCBbXSk7XG59O1xudmFyIHNob3dKc1JlbmRlcmVyX2RlZmF1bHQgPSB1c2VKc0NlbGxSZW5kZXJlcjtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9jZWxscy9jZWxsQ29tcC50c3hcbnZhciBqc3hFZGl0b3JQcm94eSA9IChlZGl0RGV0YWlscywgQ2VsbEVkaXRvckNsYXNzLCBzZXRSZWYyKSA9PiB7XG4gIGNvbnN0IHsgY29tcFByb3h5IH0gPSBlZGl0RGV0YWlscztcbiAgc2V0UmVmMihjb21wUHJveHkpO1xuICBjb25zdCBwcm9wcyA9IGNvbXBQcm94eS5nZXRQcm9wcygpO1xuICBjb25zdCBpc1N0YXRlbGVzcyA9IGlzQ29tcG9uZW50U3RhdGVsZXNzKENlbGxFZGl0b3JDbGFzcyk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFxuICAgIEN1c3RvbUNvbnRleHQuUHJvdmlkZXIsXG4gICAge1xuICAgICAgdmFsdWU6IHtcbiAgICAgICAgc2V0TWV0aG9kczogKG1ldGhvZHMpID0+IGNvbXBQcm94eS5zZXRNZXRob2RzKG1ldGhvZHMpXG4gICAgICB9XG4gICAgfSxcbiAgICBpc1N0YXRlbGVzcyA/IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoQ2VsbEVkaXRvckNsYXNzLCB7IC4uLnByb3BzIH0pIDogLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChDZWxsRWRpdG9yQ2xhc3MsIHsgLi4ucHJvcHMsIHJlZjogKHJlZikgPT4gY29tcFByb3h5LnNldFJlZihyZWYpIH0pXG4gICk7XG59O1xudmFyIGpzeEVkaXRvciA9IChlZGl0RGV0YWlscywgQ2VsbEVkaXRvckNsYXNzLCBzZXRSZWYyKSA9PiB7XG4gIGNvbnN0IG5ld0Zvcm1hdCA9IGVkaXREZXRhaWxzLmNvbXBQcm94eTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMi5GcmFnbWVudCwgbnVsbCwgbmV3Rm9ybWF0ID8ganN4RWRpdG9yUHJveHkoZWRpdERldGFpbHMsIENlbGxFZGl0b3JDbGFzcywgc2V0UmVmMikgOiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KENlbGxFZGl0b3JDbGFzcywgeyAuLi5lZGl0RGV0YWlscy5jb21wRGV0YWlscy5wYXJhbXMsIHJlZjogc2V0UmVmMiB9KSk7XG59O1xudmFyIGpzeEVkaXRWYWx1ZSA9IChlZGl0RGV0YWlscywgc2V0Q2VsbEVkaXRvclJlZiwgZUd1aSwgY2VsbEN0cmwsIGpzRWRpdG9yQ29tcCkgPT4ge1xuICBjb25zdCBjb21wRGV0YWlscyA9IGVkaXREZXRhaWxzLmNvbXBEZXRhaWxzO1xuICBjb25zdCBDZWxsRWRpdG9yQ2xhc3MgPSBjb21wRGV0YWlscy5jb21wb25lbnRDbGFzcztcbiAgY29uc3QgcmVhY3RJbmxpbmVFZGl0b3IgPSBjb21wRGV0YWlscy5jb21wb25lbnRGcm9tRnJhbWV3b3JrICYmICFlZGl0RGV0YWlscy5wb3B1cDtcbiAgY29uc3QgcmVhY3RQb3B1cEVkaXRvciA9IGNvbXBEZXRhaWxzLmNvbXBvbmVudEZyb21GcmFtZXdvcmsgJiYgZWRpdERldGFpbHMucG9wdXA7XG4gIGNvbnN0IGpzUG9wdXBFZGl0b3IgPSAhY29tcERldGFpbHMuY29tcG9uZW50RnJvbUZyYW1ld29yayAmJiBlZGl0RGV0YWlscy5wb3B1cDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMi5GcmFnbWVudCwgbnVsbCwgcmVhY3RJbmxpbmVFZGl0b3IgJiYganN4RWRpdG9yKGVkaXREZXRhaWxzLCBDZWxsRWRpdG9yQ2xhc3MsIHNldENlbGxFZGl0b3JSZWYpLCByZWFjdFBvcHVwRWRpdG9yICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXG4gICAgcG9wdXBFZGl0b3JDb21wX2RlZmF1bHQsXG4gICAge1xuICAgICAgZWRpdERldGFpbHMsXG4gICAgICBjZWxsQ3RybCxcbiAgICAgIGVQYXJlbnRDZWxsOiBlR3VpLFxuICAgICAgd3JhcHBlZENvbnRlbnQ6IGpzeEVkaXRvcihlZGl0RGV0YWlscywgQ2VsbEVkaXRvckNsYXNzLCBzZXRDZWxsRWRpdG9yUmVmKVxuICAgIH1cbiAgKSwganNQb3B1cEVkaXRvciAmJiBqc0VkaXRvckNvbXAgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcbiAgICBwb3B1cEVkaXRvckNvbXBfZGVmYXVsdCxcbiAgICB7XG4gICAgICBlZGl0RGV0YWlscyxcbiAgICAgIGNlbGxDdHJsLFxuICAgICAgZVBhcmVudENlbGw6IGVHdWksXG4gICAgICBqc0NoaWxkQ29tcDoganNFZGl0b3JDb21wXG4gICAgfVxuICApKTtcbn07XG52YXIganN4U2hvd1ZhbHVlID0gKHNob3dEZXRhaWxzLCBrZXksIHBhcmVudElkLCBjZWxsUmVuZGVyZXJSZWYsIHNob3dDZWxsV3JhcHBlciwgcmVhY3RDZWxsUmVuZGVyZXJTdGF0ZWxlc3MsIHNldEVDZWxsVmFsdWUpID0+IHtcbiAgY29uc3QgeyBjb21wRGV0YWlscywgdmFsdWUgfSA9IHNob3dEZXRhaWxzO1xuICBjb25zdCBub0NlbGxSZW5kZXJlciA9ICFjb21wRGV0YWlscztcbiAgY29uc3QgcmVhY3RDZWxsUmVuZGVyZXIgPSBjb21wRGV0YWlscyAmJiBjb21wRGV0YWlscy5jb21wb25lbnRGcm9tRnJhbWV3b3JrO1xuICBjb25zdCBDZWxsUmVuZGVyZXJDbGFzcyA9IGNvbXBEZXRhaWxzICYmIGNvbXBEZXRhaWxzLmNvbXBvbmVudENsYXNzO1xuICBjb25zdCB2YWx1ZUZvck5vQ2VsbFJlbmRlcmVyID0gdmFsdWU/LnRvU3RyaW5nID8gdmFsdWUudG9TdHJpbmcoKSA6IHZhbHVlO1xuICBjb25zdCBib2R5SnN4RnVuYyA9ICgpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMi5GcmFnbWVudCwgbnVsbCwgbm9DZWxsUmVuZGVyZXIgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChSZWFjdDEyLkZyYWdtZW50LCBudWxsLCB2YWx1ZUZvck5vQ2VsbFJlbmRlcmVyKSwgcmVhY3RDZWxsUmVuZGVyZXIgJiYgIXJlYWN0Q2VsbFJlbmRlcmVyU3RhdGVsZXNzICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoQ2VsbFJlbmRlcmVyQ2xhc3MsIHsgLi4uY29tcERldGFpbHMucGFyYW1zLCBrZXksIHJlZjogY2VsbFJlbmRlcmVyUmVmIH0pLCByZWFjdENlbGxSZW5kZXJlciAmJiByZWFjdENlbGxSZW5kZXJlclN0YXRlbGVzcyAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KENlbGxSZW5kZXJlckNsYXNzLCB7IC4uLmNvbXBEZXRhaWxzLnBhcmFtcywga2V5IH0pKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMi5GcmFnbWVudCwgbnVsbCwgc2hvd0NlbGxXcmFwcGVyID8gLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyByb2xlOiBcInByZXNlbnRhdGlvblwiLCBpZDogYGNlbGwtJHtwYXJlbnRJZH1gLCBjbGFzc05hbWU6IFwiYWctY2VsbC12YWx1ZVwiLCByZWY6IHNldEVDZWxsVmFsdWUgfSwgYm9keUpzeEZ1bmMoKSkgOiBib2R5SnN4RnVuYygpKTtcbn07XG52YXIgQ2VsbENvbXAgPSAoe1xuICBjZWxsQ3RybCxcbiAgcHJpbnRMYXlvdXQsXG4gIGVkaXRpbmdSb3dcbn0pID0+IHtcbiAgY29uc3QgeyBjb250ZXh0IH0gPSB1c2VDb250ZXh0MTAoQmVhbnNDb250ZXh0KTtcbiAgY29uc3QgeyBjb2xJZFNhbml0aXNlZCwgaW5zdGFuY2VJZCB9ID0gY2VsbEN0cmw7XG4gIGNvbnN0IGNvbXBCZWFuID0gdXNlUmVmOSgpO1xuICBjb25zdCBbcmVuZGVyRGV0YWlscywgc2V0UmVuZGVyRGV0YWlsc10gPSB1c2VTdGF0ZTExKFxuICAgICgpID0+IGNlbGxDdHJsLmlzQ2VsbFJlbmRlcmVyKCkgPyB2b2lkIDAgOiB7IGNvbXBEZXRhaWxzOiB2b2lkIDAsIHZhbHVlOiBjZWxsQ3RybC5nZXRWYWx1ZVRvRGlzcGxheSgpLCBmb3JjZTogZmFsc2UgfVxuICApO1xuICBjb25zdCBbZWRpdERldGFpbHMsIHNldEVkaXREZXRhaWxzXSA9IHVzZVN0YXRlMTEoKTtcbiAgY29uc3QgW3JlbmRlcktleSwgc2V0UmVuZGVyS2V5XSA9IHVzZVN0YXRlMTEoMSk7XG4gIGNvbnN0IFt1c2VyU3R5bGVzLCBzZXRVc2VyU3R5bGVzXSA9IHVzZVN0YXRlMTEoKTtcbiAgY29uc3QgW2luY2x1ZGVTZWxlY3Rpb24sIHNldEluY2x1ZGVTZWxlY3Rpb25dID0gdXNlU3RhdGUxMShmYWxzZSk7XG4gIGNvbnN0IFtpbmNsdWRlUm93RHJhZywgc2V0SW5jbHVkZVJvd0RyYWddID0gdXNlU3RhdGUxMShmYWxzZSk7XG4gIGNvbnN0IFtpbmNsdWRlRG5kU291cmNlLCBzZXRJbmNsdWRlRG5kU291cmNlXSA9IHVzZVN0YXRlMTEoZmFsc2UpO1xuICBjb25zdCBbanNFZGl0b3JDb21wLCBzZXRKc0VkaXRvckNvbXBdID0gdXNlU3RhdGUxMSgpO1xuICBjb25zdCBmb3JjZVdyYXBwZXIgPSB1c2VNZW1vNygoKSA9PiBjZWxsQ3RybC5pc0ZvcmNlV3JhcHBlcigpLCBbY2VsbEN0cmxdKTtcbiAgY29uc3QgY2VsbEFyaWFSb2xlID0gdXNlTWVtbzcoKCkgPT4gY2VsbEN0cmwuZ2V0Q2VsbEFyaWFSb2xlKCksIFtjZWxsQ3RybF0pO1xuICBjb25zdCBlR3VpID0gdXNlUmVmOShudWxsKTtcbiAgY29uc3QgY2VsbFJlbmRlcmVyUmVmID0gdXNlUmVmOShudWxsKTtcbiAgY29uc3QganNDZWxsUmVuZGVyZXJSZWYgPSB1c2VSZWY5KCk7XG4gIGNvbnN0IGNlbGxFZGl0b3JSZWYgPSB1c2VSZWY5KCk7XG4gIGNvbnN0IGVDZWxsV3JhcHBlciA9IHVzZVJlZjkoKTtcbiAgY29uc3QgY2VsbFdyYXBwZXJEZXN0cm95RnVuY3MgPSB1c2VSZWY5KFtdKTtcbiAgY29uc3QgZUNlbGxWYWx1ZSA9IHVzZVJlZjkoKTtcbiAgY29uc3QgW2NlbGxWYWx1ZVZlcnNpb24sIHNldENlbGxWYWx1ZVZlcnNpb25dID0gdXNlU3RhdGUxMSgwKTtcbiAgY29uc3Qgc2V0Q2VsbFZhbHVlUmVmID0gdXNlQ2FsbGJhY2s5KChyZWYpID0+IHtcbiAgICBlQ2VsbFZhbHVlLmN1cnJlbnQgPSByZWY7XG4gICAgc2V0Q2VsbFZhbHVlVmVyc2lvbigodikgPT4gdiArIDEpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHNob3dUb29scyA9IHJlbmRlckRldGFpbHMgIT0gbnVsbCAmJiAoaW5jbHVkZVNlbGVjdGlvbiB8fCBpbmNsdWRlRG5kU291cmNlIHx8IGluY2x1ZGVSb3dEcmFnKTtcbiAgY29uc3Qgc2hvd0NlbGxXcmFwcGVyID0gZm9yY2VXcmFwcGVyIHx8IHNob3dUb29scztcbiAgY29uc3Qgc2V0Q2VsbEVkaXRvclJlZiA9IHVzZUNhbGxiYWNrOShcbiAgICAoY2VsbEVkaXRvcikgPT4ge1xuICAgICAgY2VsbEVkaXRvclJlZi5jdXJyZW50ID0gY2VsbEVkaXRvcjtcbiAgICAgIGlmIChjZWxsRWRpdG9yKSB7XG4gICAgICAgIGNvbnN0IGVkaXRpbmdDYW5jZWxsZWRCeVVzZXJDb21wID0gY2VsbEVkaXRvci5pc0NhbmNlbEJlZm9yZVN0YXJ0ICYmIGNlbGxFZGl0b3IuaXNDYW5jZWxCZWZvcmVTdGFydCgpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAoZWRpdGluZ0NhbmNlbGxlZEJ5VXNlckNvbXApIHtcbiAgICAgICAgICAgIGNlbGxDdHJsLnN0b3BFZGl0aW5nKHRydWUpO1xuICAgICAgICAgICAgY2VsbEN0cmwuZm9jdXNDZWxsKHRydWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjZWxsQ3RybC5jZWxsRWRpdG9yQXR0YWNoZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2NlbGxDdHJsXVxuICApO1xuICBjb25zdCBjc3NDbGFzc01hbmFnZXIgPSB1c2VSZWY5KCk7XG4gIGlmICghY3NzQ2xhc3NNYW5hZ2VyLmN1cnJlbnQpIHtcbiAgICBjc3NDbGFzc01hbmFnZXIuY3VycmVudCA9IG5ldyBDc3NDbGFzc01hbmFnZXIyKCgpID0+IGVHdWkuY3VycmVudCk7XG4gIH1cbiAgc2hvd0pzUmVuZGVyZXJfZGVmYXVsdChyZW5kZXJEZXRhaWxzLCBzaG93Q2VsbFdyYXBwZXIsIGVDZWxsVmFsdWUuY3VycmVudCwgY2VsbFZhbHVlVmVyc2lvbiwganNDZWxsUmVuZGVyZXJSZWYsIGVHdWkpO1xuICBjb25zdCBsYXN0UmVuZGVyRGV0YWlscyA9IHVzZVJlZjkoKTtcbiAgdXNlTGF5b3V0RWZmZWN0NSgoKSA9PiB7XG4gICAgY29uc3Qgb2xkRGV0YWlscyA9IGxhc3RSZW5kZXJEZXRhaWxzLmN1cnJlbnQ7XG4gICAgY29uc3QgbmV3RGV0YWlscyA9IHJlbmRlckRldGFpbHM7XG4gICAgbGFzdFJlbmRlckRldGFpbHMuY3VycmVudCA9IHJlbmRlckRldGFpbHM7XG4gICAgaWYgKG9sZERldGFpbHMgPT0gbnVsbCB8fCBvbGREZXRhaWxzLmNvbXBEZXRhaWxzID09IG51bGwgfHwgbmV3RGV0YWlscyA9PSBudWxsIHx8IG5ld0RldGFpbHMuY29tcERldGFpbHMgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvbGRDb21wRGV0YWlscyA9IG9sZERldGFpbHMuY29tcERldGFpbHM7XG4gICAgY29uc3QgbmV3Q29tcERldGFpbHMgPSBuZXdEZXRhaWxzLmNvbXBEZXRhaWxzO1xuICAgIGlmIChvbGRDb21wRGV0YWlscy5jb21wb25lbnRDbGFzcyAhPSBuZXdDb21wRGV0YWlscy5jb21wb25lbnRDbGFzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2VsbFJlbmRlcmVyUmVmLmN1cnJlbnQ/LnJlZnJlc2ggPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBjZWxsUmVuZGVyZXJSZWYuY3VycmVudC5yZWZyZXNoKG5ld0NvbXBEZXRhaWxzLnBhcmFtcyk7XG4gICAgaWYgKHJlc3VsdCAhPSB0cnVlKSB7XG4gICAgICBzZXRSZW5kZXJLZXkoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICB9XG4gIH0sIFtyZW5kZXJEZXRhaWxzXSk7XG4gIHVzZUxheW91dEVmZmVjdDUoKCkgPT4ge1xuICAgIGNvbnN0IGRvaW5nSnNFZGl0b3IgPSBlZGl0RGV0YWlscyAmJiAhZWRpdERldGFpbHMuY29tcERldGFpbHMuY29tcG9uZW50RnJvbUZyYW1ld29yaztcbiAgICBpZiAoIWRvaW5nSnNFZGl0b3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29tcERldGFpbHMgPSBlZGl0RGV0YWlscy5jb21wRGV0YWlscztcbiAgICBjb25zdCBpc1BvcHVwID0gZWRpdERldGFpbHMucG9wdXAgPT09IHRydWU7XG4gICAgY29uc3QgY2VsbEVkaXRvclByb21pc2UgPSBjb21wRGV0YWlscy5uZXdBZ1N0YWNrSW5zdGFuY2UoKTtcbiAgICBjZWxsRWRpdG9yUHJvbWlzZS50aGVuKChjZWxsRWRpdG9yKSA9PiB7XG4gICAgICBpZiAoIWNlbGxFZGl0b3IpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgY29tcEd1aSA9IGNlbGxFZGl0b3IuZ2V0R3VpKCk7XG4gICAgICBzZXRDZWxsRWRpdG9yUmVmKGNlbGxFZGl0b3IpO1xuICAgICAgaWYgKCFpc1BvcHVwKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudEVsID0gKGZvcmNlV3JhcHBlciA/IGVDZWxsV3JhcHBlciA6IGVHdWkpLmN1cnJlbnQ7XG4gICAgICAgIHBhcmVudEVsPy5hcHBlbmRDaGlsZChjb21wR3VpKTtcbiAgICAgICAgY2VsbEVkaXRvci5hZnRlckd1aUF0dGFjaGVkICYmIGNlbGxFZGl0b3IuYWZ0ZXJHdWlBdHRhY2hlZCgpO1xuICAgICAgfVxuICAgICAgc2V0SnNFZGl0b3JDb21wKGNlbGxFZGl0b3IpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjZWxsRWRpdG9yUHJvbWlzZS50aGVuKChjZWxsRWRpdG9yKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbXBHdWkgPSBjZWxsRWRpdG9yLmdldEd1aSgpO1xuICAgICAgICBjb250ZXh0LmRlc3Ryb3lCZWFuKGNlbGxFZGl0b3IpO1xuICAgICAgICBzZXRDZWxsRWRpdG9yUmVmKHZvaWQgMCk7XG4gICAgICAgIHNldEpzRWRpdG9yQ29tcCh2b2lkIDApO1xuICAgICAgICBjb21wR3VpPy5wYXJlbnRFbGVtZW50Py5yZW1vdmVDaGlsZChjb21wR3VpKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0sIFtlZGl0RGV0YWlsc10pO1xuICBjb25zdCBzZXRDZWxsV3JhcHBlclJlZiA9IHVzZUNhbGxiYWNrOShcbiAgICAoZVJlZikgPT4ge1xuICAgICAgZUNlbGxXcmFwcGVyLmN1cnJlbnQgPSBlUmVmO1xuICAgICAgaWYgKCFlUmVmKSB7XG4gICAgICAgIGNlbGxXcmFwcGVyRGVzdHJveUZ1bmNzLmN1cnJlbnQuZm9yRWFjaCgoZikgPT4gZigpKTtcbiAgICAgICAgY2VsbFdyYXBwZXJEZXN0cm95RnVuY3MuY3VycmVudCA9IFtdO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBhZGRDb21wID0gKGNvbXApID0+IHtcbiAgICAgICAgaWYgKGNvbXApIHtcbiAgICAgICAgICBjb25zdCBlR3VpMiA9IGNvbXAuZ2V0R3VpKCk7XG4gICAgICAgICAgZVJlZi5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGVHdWkyKTtcbiAgICAgICAgICBjZWxsV3JhcHBlckRlc3Ryb3lGdW5jcy5jdXJyZW50LnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgY29udGV4dC5kZXN0cm95QmVhbihjb21wKTtcbiAgICAgICAgICAgIF9yZW1vdmVGcm9tUGFyZW50KGVHdWkyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcDtcbiAgICAgIH07XG4gICAgICBpZiAoaW5jbHVkZVNlbGVjdGlvbikge1xuICAgICAgICBjb25zdCBjaGVja2JveFNlbGVjdGlvbkNvbXAgPSBjZWxsQ3RybC5jcmVhdGVTZWxlY3Rpb25DaGVja2JveCgpO1xuICAgICAgICBhZGRDb21wKGNoZWNrYm94U2VsZWN0aW9uQ29tcCk7XG4gICAgICB9XG4gICAgICBpZiAoaW5jbHVkZURuZFNvdXJjZSkge1xuICAgICAgICBhZGRDb21wKGNlbGxDdHJsLmNyZWF0ZURuZFNvdXJjZSgpKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbmNsdWRlUm93RHJhZykge1xuICAgICAgICBhZGRDb21wKGNlbGxDdHJsLmNyZWF0ZVJvd0RyYWdDb21wKCkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2NlbGxDdHJsLCBjb250ZXh0LCBpbmNsdWRlRG5kU291cmNlLCBpbmNsdWRlUm93RHJhZywgaW5jbHVkZVNlbGVjdGlvbl1cbiAgKTtcbiAgY29uc3Qgc2V0UmVmMiA9IHVzZUNhbGxiYWNrOSgoZVJlZikgPT4ge1xuICAgIGVHdWkuY3VycmVudCA9IGVSZWY7XG4gICAgY29tcEJlYW4uY3VycmVudCA9IGVSZWYgPyBjb250ZXh0LmNyZWF0ZUJlYW4obmV3IF9FbXB0eUJlYW41KCkpIDogY29udGV4dC5kZXN0cm95QmVhbihjb21wQmVhbi5jdXJyZW50KTtcbiAgICBpZiAoIWVSZWYgfHwgIWNlbGxDdHJsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbXBQcm94eSA9IHtcbiAgICAgIGFkZE9yUmVtb3ZlQ3NzQ2xhc3M6IChuYW1lLCBvbikgPT4gY3NzQ2xhc3NNYW5hZ2VyLmN1cnJlbnQuYWRkT3JSZW1vdmVDc3NDbGFzcyhuYW1lLCBvbiksXG4gICAgICBzZXRVc2VyU3R5bGVzOiAoc3R5bGVzKSA9PiBzZXRVc2VyU3R5bGVzKHN0eWxlcyksXG4gICAgICBnZXRGb2N1c2FibGVFbGVtZW50OiAoKSA9PiBlR3VpLmN1cnJlbnQsXG4gICAgICBzZXRJbmNsdWRlU2VsZWN0aW9uOiAoaW5jbHVkZSkgPT4gc2V0SW5jbHVkZVNlbGVjdGlvbihpbmNsdWRlKSxcbiAgICAgIHNldEluY2x1ZGVSb3dEcmFnOiAoaW5jbHVkZSkgPT4gc2V0SW5jbHVkZVJvd0RyYWcoaW5jbHVkZSksXG4gICAgICBzZXRJbmNsdWRlRG5kU291cmNlOiAoaW5jbHVkZSkgPT4gc2V0SW5jbHVkZURuZFNvdXJjZShpbmNsdWRlKSxcbiAgICAgIGdldENlbGxFZGl0b3I6ICgpID0+IGNlbGxFZGl0b3JSZWYuY3VycmVudCB8fCBudWxsLFxuICAgICAgZ2V0Q2VsbFJlbmRlcmVyOiAoKSA9PiBjZWxsUmVuZGVyZXJSZWYuY3VycmVudCA/PyBqc0NlbGxSZW5kZXJlclJlZi5jdXJyZW50LFxuICAgICAgZ2V0UGFyZW50T2ZWYWx1ZTogKCkgPT4gZUNlbGxWYWx1ZS5jdXJyZW50ID8/IGVDZWxsV3JhcHBlci5jdXJyZW50ID8/IGVHdWkuY3VycmVudCxcbiAgICAgIHNldFJlbmRlckRldGFpbHM6IChjb21wRGV0YWlscywgdmFsdWUsIGZvcmNlKSA9PiB7XG4gICAgICAgIHNldFJlbmRlckRldGFpbHMoKHByZXYpID0+IHtcbiAgICAgICAgICBpZiAocHJldj8uY29tcERldGFpbHMgIT09IGNvbXBEZXRhaWxzIHx8IHByZXY/LnZhbHVlICE9PSB2YWx1ZSB8fCBwcmV2Py5mb3JjZSAhPT0gZm9yY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICBjb21wRGV0YWlscyxcbiAgICAgICAgICAgICAgZm9yY2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgc2V0RWRpdERldGFpbHM6IChjb21wRGV0YWlscywgcG9wdXAsIHBvcHVwUG9zaXRpb24sIHJlYWN0aXZlQ3VzdG9tQ29tcG9uZW50cykgPT4ge1xuICAgICAgICBpZiAoY29tcERldGFpbHMpIHtcbiAgICAgICAgICBsZXQgY29tcFByb3h5MiA9IHZvaWQgMDtcbiAgICAgICAgICBpZiAocmVhY3RpdmVDdXN0b21Db21wb25lbnRzKSB7XG4gICAgICAgICAgICBjb21wUHJveHkyID0gbmV3IENlbGxFZGl0b3JDb21wb25lbnRQcm94eShcbiAgICAgICAgICAgICAgY29tcERldGFpbHMucGFyYW1zLFxuICAgICAgICAgICAgICAoKSA9PiBzZXRSZW5kZXJLZXkoKHByZXYpID0+IHByZXYgKyAxKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBEZXRhaWxzLmNvbXBvbmVudEZyb21GcmFtZXdvcmspIHtcbiAgICAgICAgICAgIHdhcm5SZWFjdGl2ZUN1c3RvbUNvbXBvbmVudHMoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0RWRpdERldGFpbHMoe1xuICAgICAgICAgICAgY29tcERldGFpbHMsXG4gICAgICAgICAgICBwb3B1cCxcbiAgICAgICAgICAgIHBvcHVwUG9zaXRpb24sXG4gICAgICAgICAgICBjb21wUHJveHk6IGNvbXBQcm94eTJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIXBvcHVwKSB7XG4gICAgICAgICAgICBzZXRSZW5kZXJEZXRhaWxzKHZvaWQgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldEVkaXREZXRhaWxzKChlZGl0RGV0YWlsczIpID0+IHtcbiAgICAgICAgICAgIGlmIChlZGl0RGV0YWlsczI/LmNvbXBQcm94eSkge1xuICAgICAgICAgICAgICBjZWxsRWRpdG9yUmVmLmN1cnJlbnQgPSB2b2lkIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjZWxsV3JhcHBlck9yVW5kZWZpbmVkID0gZUNlbGxXcmFwcGVyLmN1cnJlbnQgfHwgdm9pZCAwO1xuICAgIGNlbGxDdHJsLnNldENvbXAoY29tcFByb3h5LCBlUmVmLCBjZWxsV3JhcHBlck9yVW5kZWZpbmVkLCBwcmludExheW91dCwgZWRpdGluZ1JvdywgY29tcEJlYW4uY3VycmVudCk7XG4gIH0sIFtdKTtcbiAgY29uc3QgcmVhY3RDZWxsUmVuZGVyZXJTdGF0ZWxlc3MgPSB1c2VNZW1vNygoKSA9PiB7XG4gICAgY29uc3QgcmVzID0gcmVuZGVyRGV0YWlscz8uY29tcERldGFpbHM/LmNvbXBvbmVudEZyb21GcmFtZXdvcmsgJiYgaXNDb21wb25lbnRTdGF0ZWxlc3MocmVuZGVyRGV0YWlscy5jb21wRGV0YWlscy5jb21wb25lbnRDbGFzcyk7XG4gICAgcmV0dXJuICEhcmVzO1xuICB9LCBbcmVuZGVyRGV0YWlsc10pO1xuICB1c2VMYXlvdXRFZmZlY3Q1KCgpID0+IHtcbiAgICBpZiAoIWVHdWkuY3VycmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjc3NDbGFzc01hbmFnZXIuY3VycmVudC5hZGRPclJlbW92ZUNzc0NsYXNzKFwiYWctY2VsbC12YWx1ZVwiLCAhc2hvd0NlbGxXcmFwcGVyKTtcbiAgICBjc3NDbGFzc01hbmFnZXIuY3VycmVudC5hZGRPclJlbW92ZUNzc0NsYXNzKFwiYWctY2VsbC1pbmxpbmUtZWRpdGluZ1wiLCAhIWVkaXREZXRhaWxzICYmICFlZGl0RGV0YWlscy5wb3B1cCk7XG4gICAgY3NzQ2xhc3NNYW5hZ2VyLmN1cnJlbnQuYWRkT3JSZW1vdmVDc3NDbGFzcyhcImFnLWNlbGwtcG9wdXAtZWRpdGluZ1wiLCAhIWVkaXREZXRhaWxzICYmICEhZWRpdERldGFpbHMucG9wdXApO1xuICAgIGNzc0NsYXNzTWFuYWdlci5jdXJyZW50LmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoXCJhZy1jZWxsLW5vdC1pbmxpbmUtZWRpdGluZ1wiLCAhZWRpdERldGFpbHMgfHwgISFlZGl0RGV0YWlscy5wb3B1cCk7XG4gICAgY2VsbEN0cmwuZ2V0Um93Q3RybCgpPy5zZXRJbmxpbmVFZGl0aW5nQ3NzKCk7XG4gICAgaWYgKGNlbGxDdHJsLnNob3VsZFJlc3RvcmVGb2N1cygpICYmICFjZWxsQ3RybC5pc0VkaXRpbmcoKSkge1xuICAgICAgZUd1aS5jdXJyZW50LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCBzaG93Q29udGVudHMgPSAoKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMi5jcmVhdGVFbGVtZW50KFJlYWN0MTIuRnJhZ21lbnQsIG51bGwsIHJlbmRlckRldGFpbHMgIT0gbnVsbCAmJiBqc3hTaG93VmFsdWUoXG4gICAgcmVuZGVyRGV0YWlscyxcbiAgICByZW5kZXJLZXksXG4gICAgaW5zdGFuY2VJZCxcbiAgICBjZWxsUmVuZGVyZXJSZWYsXG4gICAgc2hvd0NlbGxXcmFwcGVyLFxuICAgIHJlYWN0Q2VsbFJlbmRlcmVyU3RhdGVsZXNzLFxuICAgIHNldENlbGxWYWx1ZVJlZlxuICApLCBlZGl0RGV0YWlscyAhPSBudWxsICYmIGpzeEVkaXRWYWx1ZShlZGl0RGV0YWlscywgc2V0Q2VsbEVkaXRvclJlZiwgZUd1aS5jdXJyZW50LCBjZWxsQ3RybCwganNFZGl0b3JDb21wKSk7XG4gIGNvbnN0IG9uQmx1ciA9IHVzZUNhbGxiYWNrOSgoKSA9PiBjZWxsQ3RybC5vbkZvY3VzT3V0KCksIFtdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IHNldFJlZjIsIHN0eWxlOiB1c2VyU3R5bGVzLCByb2xlOiBjZWxsQXJpYVJvbGUsIFwiY29sLWlkXCI6IGNvbElkU2FuaXRpc2VkLCBvbkJsdXIgfSwgc2hvd0NlbGxXcmFwcGVyID8gLyogQF9fUFVSRV9fICovIFJlYWN0MTIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJhZy1jZWxsLXdyYXBwZXJcIiwgcm9sZTogXCJwcmVzZW50YXRpb25cIiwgcmVmOiBzZXRDZWxsV3JhcHBlclJlZiB9LCBzaG93Q29udGVudHMoKSkgOiBzaG93Q29udGVudHMoKSk7XG59O1xudmFyIGNlbGxDb21wX2RlZmF1bHQgPSBtZW1vOShDZWxsQ29tcCk7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvcm93cy9yb3dDb21wLnRzeFxudmFyIFJvd0NvbXAgPSAoeyByb3dDdHJsLCBjb250YWluZXJUeXBlIH0pID0+IHtcbiAgY29uc3QgeyBjb250ZXh0LCBnb3MgfSA9IHVzZUNvbnRleHQxMShCZWFuc0NvbnRleHQpO1xuICBjb25zdCBjb21wQmVhbiA9IHVzZVJlZjEwKCk7XG4gIGNvbnN0IGRvbU9yZGVyUmVmID0gdXNlUmVmMTAocm93Q3RybC5nZXREb21PcmRlcigpKTtcbiAgY29uc3QgaXNGdWxsV2lkdGggPSByb3dDdHJsLmlzRnVsbFdpZHRoKCk7XG4gIGNvbnN0IGlzRGlzcGxheWVkID0gcm93Q3RybC5nZXRSb3dOb2RlKCkuZGlzcGxheWVkO1xuICBjb25zdCBbcm93SW5kZXgsIHNldFJvd0luZGV4XSA9IHVzZVN0YXRlMTIoKCkgPT4gaXNEaXNwbGF5ZWQgPyByb3dDdHJsLmdldFJvd0luZGV4KCkgOiBudWxsKTtcbiAgY29uc3QgW3Jvd0lkLCBzZXRSb3dJZF0gPSB1c2VTdGF0ZTEyKCgpID0+IHJvd0N0cmwuZ2V0Um93SWQoKSk7XG4gIGNvbnN0IFtyb3dCdXNpbmVzc0tleSwgc2V0Um93QnVzaW5lc3NLZXldID0gdXNlU3RhdGUxMigoKSA9PiByb3dDdHJsLmdldEJ1c2luZXNzS2V5KCkpO1xuICBjb25zdCBbdXNlclN0eWxlcywgc2V0VXNlclN0eWxlc10gPSB1c2VTdGF0ZTEyKCgpID0+IHJvd0N0cmwuZ2V0Um93U3R5bGVzKCkpO1xuICBjb25zdCBjZWxsQ3RybHNSZWYgPSB1c2VSZWYxMChudWxsKTtcbiAgY29uc3QgcHJldkNlbGxDdHJsc1JlZiA9IHVzZVJlZjEwKG51bGwpO1xuICBjb25zdCBbY2VsbEN0cmxzLCBzZXRDZWxsQ3RybHNdID0gdXNlU3RhdGUxMigoKSA9PiBudWxsKTtcbiAgY29uc3QgW2Z1bGxXaWR0aENvbXBEZXRhaWxzLCBzZXRGdWxsV2lkdGhDb21wRGV0YWlsc10gPSB1c2VTdGF0ZTEyKCk7XG4gIGNvbnN0IFt0b3AsIHNldFRvcF0gPSB1c2VTdGF0ZTEyKFxuICAgICgpID0+IGlzRGlzcGxheWVkID8gcm93Q3RybC5nZXRJbml0aWFsUm93VG9wKGNvbnRhaW5lclR5cGUpIDogdm9pZCAwXG4gICk7XG4gIGNvbnN0IFt0cmFuc2Zvcm0sIHNldFRyYW5zZm9ybV0gPSB1c2VTdGF0ZTEyKFxuICAgICgpID0+IGlzRGlzcGxheWVkID8gcm93Q3RybC5nZXRJbml0aWFsVHJhbnNmb3JtKGNvbnRhaW5lclR5cGUpIDogdm9pZCAwXG4gICk7XG4gIGNvbnN0IGVHdWkgPSB1c2VSZWYxMChudWxsKTtcbiAgY29uc3QgZnVsbFdpZHRoQ29tcFJlZiA9IHVzZVJlZjEwKCk7XG4gIGNvbnN0IGF1dG9IZWlnaHRTZXR1cCA9IHVzZVJlZjEwKGZhbHNlKTtcbiAgY29uc3QgW2F1dG9IZWlnaHRTZXR1cEF0dGVtcHQsIHNldEF1dG9IZWlnaHRTZXR1cEF0dGVtcHRdID0gdXNlU3RhdGUxMigwKTtcbiAgdXNlRWZmZWN0NygoKSA9PiB7XG4gICAgaWYgKGF1dG9IZWlnaHRTZXR1cC5jdXJyZW50IHx8ICFmdWxsV2lkdGhDb21wRGV0YWlscyB8fCBhdXRvSGVpZ2h0U2V0dXBBdHRlbXB0ID4gMTApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZUNoaWxkID0gZUd1aS5jdXJyZW50Py5maXJzdENoaWxkO1xuICAgIGlmIChlQ2hpbGQpIHtcbiAgICAgIHJvd0N0cmwuc2V0dXBEZXRhaWxSb3dBdXRvSGVpZ2h0KGVDaGlsZCk7XG4gICAgICBhdXRvSGVpZ2h0U2V0dXAuY3VycmVudCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldEF1dG9IZWlnaHRTZXR1cEF0dGVtcHQoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICB9XG4gIH0sIFtmdWxsV2lkdGhDb21wRGV0YWlscywgYXV0b0hlaWdodFNldHVwQXR0ZW1wdF0pO1xuICBjb25zdCBjc3NDbGFzc01hbmFnZXIgPSB1c2VSZWYxMCgpO1xuICBpZiAoIWNzc0NsYXNzTWFuYWdlci5jdXJyZW50KSB7XG4gICAgY3NzQ2xhc3NNYW5hZ2VyLmN1cnJlbnQgPSBuZXcgQ3NzQ2xhc3NNYW5hZ2VyMygoKSA9PiBlR3VpLmN1cnJlbnQpO1xuICB9XG4gIGNvbnN0IHNldFJlZjIgPSB1c2VDYWxsYmFjazEwKChlUmVmKSA9PiB7XG4gICAgZUd1aS5jdXJyZW50ID0gZVJlZjtcbiAgICBjb21wQmVhbi5jdXJyZW50ID0gZVJlZiA/IGNvbnRleHQuY3JlYXRlQmVhbihuZXcgX0VtcHR5QmVhbjYoKSkgOiBjb250ZXh0LmRlc3Ryb3lCZWFuKGNvbXBCZWFuLmN1cnJlbnQpO1xuICAgIGlmICghZVJlZikge1xuICAgICAgcm93Q3RybC51bnNldENvbXAoY29udGFpbmVyVHlwZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghcm93Q3RybC5pc0FsaXZlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29tcFByb3h5ID0ge1xuICAgICAgLy8gdGhlIHJvd1RvcCBpcyBtYW5hZ2VkIGJ5IHN0YXRlLCBpbnN0ZWFkIG9mIGRpcmVjdCBzdHlsZSBtYW5pcHVsYXRpb24gYnkgcm93Q3RybCAobGlrZSBhbGwgdGhlIG90aGVyIHN0eWxlcylcbiAgICAgIC8vIGFzIHdlIG5lZWQgdG8gaGF2ZSBhbiBpbml0aWFsIHZhbHVlIHdoZW4gaXQncyBwbGFjZWQgaW50byBoZSBET00gZm9yIHRoZSBmaXJzdCB0aW1lLCBmb3IgYW5pbWF0aW9uIHRvIHdvcmsuXG4gICAgICBzZXRUb3AsXG4gICAgICBzZXRUcmFuc2Zvcm0sXG4gICAgICAvLyBpIGZvdW5kIHVzaW5nIFJlYWN0IGZvciBtYW5hZ2luZyBjbGFzc2VzIGF0IHRoZSByb3cgbGV2ZWwgd2FzIHRvIHNsb3csIGFzIG1vZGlmeWluZyBjbGFzc2VzIGNhdXNlZCBhIGxvdCBvZlxuICAgICAgLy8gUmVhY3QgY29kZSB0byBleGVjdXRlLCBzbyBhdm9pZGluZyBSZWFjdCBmb3IgbWFuYWdpbmcgQ1NTIENsYXNzZXMgbWFkZSB0aGUgZ3JpZCBnbyBtdWNoIGZhc3Rlci5cbiAgICAgIGFkZE9yUmVtb3ZlQ3NzQ2xhc3M6IChuYW1lLCBvbikgPT4gY3NzQ2xhc3NNYW5hZ2VyLmN1cnJlbnQuYWRkT3JSZW1vdmVDc3NDbGFzcyhuYW1lLCBvbiksXG4gICAgICBzZXREb21PcmRlcjogKGRvbU9yZGVyKSA9PiBkb21PcmRlclJlZi5jdXJyZW50ID0gZG9tT3JkZXIsXG4gICAgICBzZXRSb3dJbmRleCxcbiAgICAgIHNldFJvd0lkLFxuICAgICAgc2V0Um93QnVzaW5lc3NLZXksXG4gICAgICBzZXRVc2VyU3R5bGVzLFxuICAgICAgLy8gaWYgd2UgZG9uJ3QgbWFpbnRhaW4gdGhlIG9yZGVyLCB0aGVuIGNvbHMgd2lsbCBiZSByaXBwZWQgb3V0IGFuZCBpbnRvIHRoZSBkb21cbiAgICAgIC8vIHdoZW4gY29scyByZW9yZGVyZWQsIHdoaWNoIHdvdWxkIHN0b3AgdGhlIENTUyB0cmFuc2l0aW9ucyBmcm9tIHdvcmtpbmdcbiAgICAgIHNldENlbGxDdHJsczogKG5leHQsIHVzZUZsdXNoU3luYykgPT4ge1xuICAgICAgICBwcmV2Q2VsbEN0cmxzUmVmLmN1cnJlbnQgPSBjZWxsQ3RybHNSZWYuY3VycmVudDtcbiAgICAgICAgY2VsbEN0cmxzUmVmLmN1cnJlbnQgPSBuZXh0O1xuICAgICAgICBjb25zdCBuZXh0Q2VsbHMgPSBnZXROZXh0VmFsdWVJZkRpZmZlcmVudChwcmV2Q2VsbEN0cmxzUmVmLmN1cnJlbnQsIG5leHQsIGRvbU9yZGVyUmVmLmN1cnJlbnQpO1xuICAgICAgICBpZiAobmV4dENlbGxzICE9PSBwcmV2Q2VsbEN0cmxzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBhZ0ZsdXNoU3luYyh1c2VGbHVzaFN5bmMsICgpID0+IHNldENlbGxDdHJscyhuZXh0Q2VsbHMpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNob3dGdWxsV2lkdGg6IChjb21wRGV0YWlscykgPT4gc2V0RnVsbFdpZHRoQ29tcERldGFpbHMoY29tcERldGFpbHMpLFxuICAgICAgZ2V0RnVsbFdpZHRoQ2VsbFJlbmRlcmVyOiAoKSA9PiBmdWxsV2lkdGhDb21wUmVmLmN1cnJlbnQsXG4gICAgICByZWZyZXNoRnVsbFdpZHRoOiAoZ2V0VXBkYXRlZFBhcmFtcykgPT4ge1xuICAgICAgICBpZiAoY2FuUmVmcmVzaEZ1bGxXaWR0aFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgc2V0RnVsbFdpZHRoQ29tcERldGFpbHMoKHByZXZGdWxsV2lkdGhDb21wRGV0YWlscykgPT4gKHtcbiAgICAgICAgICAgIC4uLnByZXZGdWxsV2lkdGhDb21wRGV0YWlscyxcbiAgICAgICAgICAgIHBhcmFtczogZ2V0VXBkYXRlZFBhcmFtcygpXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghZnVsbFdpZHRoQ29tcFJlZi5jdXJyZW50IHx8ICFmdWxsV2lkdGhDb21wUmVmLmN1cnJlbnQucmVmcmVzaCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZnVsbFdpZHRoQ29tcFJlZi5jdXJyZW50LnJlZnJlc2goZ2V0VXBkYXRlZFBhcmFtcygpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgcm93Q3RybC5zZXRDb21wKGNvbXBQcm94eSwgZVJlZiwgY29udGFpbmVyVHlwZSwgY29tcEJlYW4uY3VycmVudCk7XG4gIH0sIFtdKTtcbiAgdXNlTGF5b3V0RWZmZWN0NihcbiAgICAoKSA9PiBzaG93SnNDb21wKGZ1bGxXaWR0aENvbXBEZXRhaWxzLCBjb250ZXh0LCBlR3VpLmN1cnJlbnQsIGZ1bGxXaWR0aENvbXBSZWYpLFxuICAgIFtmdWxsV2lkdGhDb21wRGV0YWlsc11cbiAgKTtcbiAgY29uc3Qgcm93U3R5bGVzID0gdXNlTWVtbzgoKCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IHsgdG9wLCB0cmFuc2Zvcm0gfTtcbiAgICBPYmplY3QuYXNzaWduKHJlcywgdXNlclN0eWxlcyk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSwgW3RvcCwgdHJhbnNmb3JtLCB1c2VyU3R5bGVzXSk7XG4gIGNvbnN0IHNob3dGdWxsV2lkdGhGcmFtZXdvcmsgPSBpc0Z1bGxXaWR0aCAmJiBmdWxsV2lkdGhDb21wRGV0YWlscz8uY29tcG9uZW50RnJvbUZyYW1ld29yaztcbiAgY29uc3Qgc2hvd0NlbGxzID0gIWlzRnVsbFdpZHRoICYmIGNlbGxDdHJscyAhPSBudWxsO1xuICBjb25zdCByZWFjdEZ1bGxXaWR0aENlbGxSZW5kZXJlclN0YXRlbGVzcyA9IHVzZU1lbW84KCgpID0+IHtcbiAgICBjb25zdCByZXMgPSBmdWxsV2lkdGhDb21wRGV0YWlscz8uY29tcG9uZW50RnJvbUZyYW1ld29yayAmJiBpc0NvbXBvbmVudFN0YXRlbGVzcyhmdWxsV2lkdGhDb21wRGV0YWlscy5jb21wb25lbnRDbGFzcyk7XG4gICAgcmV0dXJuICEhcmVzO1xuICB9LCBbZnVsbFdpZHRoQ29tcERldGFpbHNdKTtcbiAgY29uc3QgY2FuUmVmcmVzaEZ1bGxXaWR0aFJlZiA9IHVzZVJlZjEwKGZhbHNlKTtcbiAgdXNlRWZmZWN0NygoKSA9PiB7XG4gICAgY2FuUmVmcmVzaEZ1bGxXaWR0aFJlZi5jdXJyZW50ID0gcmVhY3RGdWxsV2lkdGhDZWxsUmVuZGVyZXJTdGF0ZWxlc3MgJiYgISFmdWxsV2lkdGhDb21wRGV0YWlscyAmJiAhIWdvcy5nZXQoXCJyZWFjdGl2ZUN1c3RvbUNvbXBvbmVudHNcIik7XG4gIH0sIFtyZWFjdEZ1bGxXaWR0aENlbGxSZW5kZXJlclN0YXRlbGVzcywgZnVsbFdpZHRoQ29tcERldGFpbHNdKTtcbiAgY29uc3Qgc2hvd0NlbGxzSnN4ID0gKCkgPT4gY2VsbEN0cmxzPy5tYXAoKGNlbGxDdHJsKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KFxuICAgIGNlbGxDb21wX2RlZmF1bHQsXG4gICAge1xuICAgICAgY2VsbEN0cmwsXG4gICAgICBlZGl0aW5nUm93OiByb3dDdHJsLmlzRWRpdGluZygpLFxuICAgICAgcHJpbnRMYXlvdXQ6IHJvd0N0cmwuaXNQcmludExheW91dCgpLFxuICAgICAga2V5OiBjZWxsQ3RybC5pbnN0YW5jZUlkXG4gICAgfVxuICApKTtcbiAgY29uc3Qgc2hvd0Z1bGxXaWR0aEZyYW1ld29ya0pzeCA9ICgpID0+IHtcbiAgICBjb25zdCBGdWxsV2lkdGhDb21wID0gZnVsbFdpZHRoQ29tcERldGFpbHMuY29tcG9uZW50Q2xhc3M7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMy5GcmFnbWVudCwgbnVsbCwgcmVhY3RGdWxsV2lkdGhDZWxsUmVuZGVyZXJTdGF0ZWxlc3MgPyAvKiBAX19QVVJFX18gKi8gUmVhY3QxMy5jcmVhdGVFbGVtZW50KEZ1bGxXaWR0aENvbXAsIHsgLi4uZnVsbFdpZHRoQ29tcERldGFpbHMucGFyYW1zIH0pIDogLyogQF9fUFVSRV9fICovIFJlYWN0MTMuY3JlYXRlRWxlbWVudChGdWxsV2lkdGhDb21wLCB7IC4uLmZ1bGxXaWR0aENvbXBEZXRhaWxzLnBhcmFtcywgcmVmOiBmdWxsV2lkdGhDb21wUmVmIH0pKTtcbiAgfTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEzLmNyZWF0ZUVsZW1lbnQoXG4gICAgXCJkaXZcIixcbiAgICB7XG4gICAgICByZWY6IHNldFJlZjIsXG4gICAgICByb2xlOiBcInJvd1wiLFxuICAgICAgc3R5bGU6IHJvd1N0eWxlcyxcbiAgICAgIFwicm93LWluZGV4XCI6IHJvd0luZGV4LFxuICAgICAgXCJyb3ctaWRcIjogcm93SWQsXG4gICAgICBcInJvdy1idXNpbmVzcy1rZXlcIjogcm93QnVzaW5lc3NLZXlcbiAgICB9LFxuICAgIHNob3dDZWxscyAmJiBzaG93Q2VsbHNKc3goKSxcbiAgICBzaG93RnVsbFdpZHRoRnJhbWV3b3JrICYmIHNob3dGdWxsV2lkdGhGcmFtZXdvcmtKc3goKVxuICApO1xufTtcbnZhciByb3dDb21wX2RlZmF1bHQgPSBtZW1vMTAoUm93Q29tcCk7XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3JlYWN0VWkvcm93cy9yb3dDb250YWluZXJDb21wLnRzeFxudmFyIFJvd0NvbnRhaW5lckNvbXAgPSAoeyBuYW1lIH0pID0+IHtcbiAgY29uc3QgeyBjb250ZXh0IH0gPSB1c2VDb250ZXh0MTIoQmVhbnNDb250ZXh0KTtcbiAgY29uc3QgY29udGFpbmVyT3B0aW9ucyA9IHVzZU1lbW85KCgpID0+IF9nZXRSb3dDb250YWluZXJPcHRpb25zKG5hbWUpLCBbbmFtZV0pO1xuICBjb25zdCBlVmlld3BvcnQgPSB1c2VSZWYxMShudWxsKTtcbiAgY29uc3QgZUNvbnRhaW5lciA9IHVzZVJlZjExKG51bGwpO1xuICBjb25zdCByb3dDdHJsc1JlZiA9IHVzZVJlZjExKFtdKTtcbiAgY29uc3QgcHJldlJvd0N0cmxzUmVmID0gdXNlUmVmMTEoW10pO1xuICBjb25zdCBbcm93Q3RybHNPcmRlcmVkLCBzZXRSb3dDdHJsc09yZGVyZWRdID0gdXNlU3RhdGUxMygoKSA9PiBbXSk7XG4gIGNvbnN0IGRvbU9yZGVyUmVmID0gdXNlUmVmMTEoZmFsc2UpO1xuICBjb25zdCByb3dDb250YWluZXJDdHJsUmVmID0gdXNlUmVmMTEoKTtcbiAgY29uc3Qgdmlld3BvcnRDbGFzc2VzID0gdXNlTWVtbzkoKCkgPT4gY2xhc3Nlc0xpc3QoY29udGFpbmVyT3B0aW9ucy52aWV3cG9ydCksIFtjb250YWluZXJPcHRpb25zXSk7XG4gIGNvbnN0IGNvbnRhaW5lckNsYXNzZXMgPSB1c2VNZW1vOSgoKSA9PiBjbGFzc2VzTGlzdChjb250YWluZXJPcHRpb25zLmNvbnRhaW5lciksIFtjb250YWluZXJPcHRpb25zXSk7XG4gIGNvbnN0IGlzQ2VudGVyID0gY29udGFpbmVyT3B0aW9ucy50eXBlID09PSBcImNlbnRlclwiO1xuICBjb25zdCB0b3BMZXZlbFJlZiA9IGlzQ2VudGVyID8gZVZpZXdwb3J0IDogZUNvbnRhaW5lcjtcbiAgcmVhY3RDb21tZW50X2RlZmF1bHQoXCIgQUcgUm93IENvbnRhaW5lciBcIiArIG5hbWUgKyBcIiBcIiwgdG9wTGV2ZWxSZWYpO1xuICBjb25zdCBhcmVFbGVtZW50c1JlYWR5ID0gdXNlQ2FsbGJhY2sxMSgoKSA9PiB7XG4gICAgaWYgKGlzQ2VudGVyKSB7XG4gICAgICByZXR1cm4gZVZpZXdwb3J0LmN1cnJlbnQgIT0gbnVsbCAmJiBlQ29udGFpbmVyLmN1cnJlbnQgIT0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGVDb250YWluZXIuY3VycmVudCAhPSBudWxsO1xuICB9LCBbXSk7XG4gIGNvbnN0IGFyZUVsZW1lbnRzUmVtb3ZlZCA9IHVzZUNhbGxiYWNrMTEoKCkgPT4ge1xuICAgIGlmIChpc0NlbnRlcikge1xuICAgICAgcmV0dXJuIGVWaWV3cG9ydC5jdXJyZW50ID09IG51bGwgJiYgZUNvbnRhaW5lci5jdXJyZW50ID09IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBlQ29udGFpbmVyLmN1cnJlbnQgPT0gbnVsbDtcbiAgfSwgW10pO1xuICBjb25zdCBzZXRSZWYyID0gdXNlQ2FsbGJhY2sxMSgoKSA9PiB7XG4gICAgaWYgKGFyZUVsZW1lbnRzUmVtb3ZlZCgpKSB7XG4gICAgICByb3dDb250YWluZXJDdHJsUmVmLmN1cnJlbnQgPSBjb250ZXh0LmRlc3Ryb3lCZWFuKHJvd0NvbnRhaW5lckN0cmxSZWYuY3VycmVudCk7XG4gICAgfVxuICAgIGlmIChhcmVFbGVtZW50c1JlYWR5KCkpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZVJvd0N0cmxzT3JkZXJlZCA9ICh1c2VGbHVzaFN5bmMpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dCA9IGdldE5leHRWYWx1ZUlmRGlmZmVyZW50KFxuICAgICAgICAgIHByZXZSb3dDdHJsc1JlZi5jdXJyZW50LFxuICAgICAgICAgIHJvd0N0cmxzUmVmLmN1cnJlbnQsXG4gICAgICAgICAgZG9tT3JkZXJSZWYuY3VycmVudFxuICAgICAgICApO1xuICAgICAgICBpZiAobmV4dCAhPT0gcHJldlJvd0N0cmxzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBwcmV2Um93Q3RybHNSZWYuY3VycmVudCA9IG5leHQ7XG4gICAgICAgICAgYWdGbHVzaFN5bmModXNlRmx1c2hTeW5jLCAoKSA9PiBzZXRSb3dDdHJsc09yZGVyZWQobmV4dCkpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29uc3QgY29tcFByb3h5ID0ge1xuICAgICAgICBzZXRIb3Jpem9udGFsU2Nyb2xsOiAob2Zmc2V0KSA9PiB7XG4gICAgICAgICAgaWYgKGVWaWV3cG9ydC5jdXJyZW50KSB7XG4gICAgICAgICAgICBlVmlld3BvcnQuY3VycmVudC5zY3JvbGxMZWZ0ID0gb2Zmc2V0O1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc2V0Vmlld3BvcnRIZWlnaHQ6IChoZWlnaHQpID0+IHtcbiAgICAgICAgICBpZiAoZVZpZXdwb3J0LmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGVWaWV3cG9ydC5jdXJyZW50LnN0eWxlLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNldFJvd0N0cmxzOiAoeyByb3dDdHJscywgdXNlRmx1c2hTeW5jIH0pID0+IHtcbiAgICAgICAgICBjb25zdCB1c2VGbHVzaCA9ICEhdXNlRmx1c2hTeW5jICYmIHJvd0N0cmxzUmVmLmN1cnJlbnQubGVuZ3RoID4gMCAmJiByb3dDdHJscy5sZW5ndGggPiAwO1xuICAgICAgICAgIHJvd0N0cmxzUmVmLmN1cnJlbnQgPSByb3dDdHJscztcbiAgICAgICAgICB1cGRhdGVSb3dDdHJsc09yZGVyZWQodXNlRmx1c2gpO1xuICAgICAgICB9LFxuICAgICAgICBzZXREb21PcmRlcjogKGRvbU9yZGVyKSA9PiB7XG4gICAgICAgICAgaWYgKGRvbU9yZGVyUmVmLmN1cnJlbnQgIT0gZG9tT3JkZXIpIHtcbiAgICAgICAgICAgIGRvbU9yZGVyUmVmLmN1cnJlbnQgPSBkb21PcmRlcjtcbiAgICAgICAgICAgIHVwZGF0ZVJvd0N0cmxzT3JkZXJlZChmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzZXRDb250YWluZXJXaWR0aDogKHdpZHRoKSA9PiB7XG4gICAgICAgICAgaWYgKGVDb250YWluZXIuY3VycmVudCkge1xuICAgICAgICAgICAgZUNvbnRhaW5lci5jdXJyZW50LnN0eWxlLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzZXRPZmZzZXRUb3A6IChvZmZzZXQpID0+IHtcbiAgICAgICAgICBpZiAoZUNvbnRhaW5lci5jdXJyZW50KSB7XG4gICAgICAgICAgICBlQ29udGFpbmVyLmN1cnJlbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtvZmZzZXR9KWA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcm93Q29udGFpbmVyQ3RybFJlZi5jdXJyZW50ID0gY29udGV4dC5jcmVhdGVCZWFuKG5ldyBSb3dDb250YWluZXJDdHJsKG5hbWUpKTtcbiAgICAgIHJvd0NvbnRhaW5lckN0cmxSZWYuY3VycmVudC5zZXRDb21wKGNvbXBQcm94eSwgZUNvbnRhaW5lci5jdXJyZW50LCBlVmlld3BvcnQuY3VycmVudCk7XG4gICAgfVxuICB9LCBbYXJlRWxlbWVudHNSZWFkeSwgYXJlRWxlbWVudHNSZW1vdmVkXSk7XG4gIGNvbnN0IHNldENvbnRhaW5lclJlZiA9IHVzZUNhbGxiYWNrMTEoXG4gICAgKGUpID0+IHtcbiAgICAgIGVDb250YWluZXIuY3VycmVudCA9IGU7XG4gICAgICBzZXRSZWYyKCk7XG4gICAgfSxcbiAgICBbc2V0UmVmMl1cbiAgKTtcbiAgY29uc3Qgc2V0Vmlld3BvcnRSZWYgPSB1c2VDYWxsYmFjazExKFxuICAgIChlKSA9PiB7XG4gICAgICBlVmlld3BvcnQuY3VycmVudCA9IGU7XG4gICAgICBzZXRSZWYyKCk7XG4gICAgfSxcbiAgICBbc2V0UmVmMl1cbiAgKTtcbiAgY29uc3QgYnVpbGRDb250YWluZXIgPSAoKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjb250YWluZXJDbGFzc2VzLCByZWY6IHNldENvbnRhaW5lclJlZiwgcm9sZTogXCJyb3dncm91cFwiIH0sIHJvd0N0cmxzT3JkZXJlZC5tYXAoKHJvd0N0cmwpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQocm93Q29tcF9kZWZhdWx0LCB7IHJvd0N0cmwsIGNvbnRhaW5lclR5cGU6IGNvbnRhaW5lck9wdGlvbnMudHlwZSwga2V5OiByb3dDdHJsLmluc3RhbmNlSWQgfSkpKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE0LmNyZWF0ZUVsZW1lbnQoUmVhY3QxNC5GcmFnbWVudCwgbnVsbCwgaXNDZW50ZXIgPyAvKiBAX19QVVJFX18gKi8gUmVhY3QxNC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB2aWV3cG9ydENsYXNzZXMsIHJlZjogc2V0Vmlld3BvcnRSZWYsIHJvbGU6IFwicHJlc2VudGF0aW9uXCIgfSwgYnVpbGRDb250YWluZXIoKSkgOiBidWlsZENvbnRhaW5lcigpKTtcbn07XG52YXIgcm93Q29udGFpbmVyQ29tcF9kZWZhdWx0ID0gbWVtbzExKFJvd0NvbnRhaW5lckNvbXApO1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9yZWFjdFVpL2dyaWRCb2R5Q29tcC50c3hcbnZhciBHcmlkQm9keUNvbXAgPSAoKSA9PiB7XG4gIGNvbnN0IHsgY29udGV4dCwgcmVzaXplT2JzZXJ2ZXJTZXJ2aWNlIH0gPSB1c2VDb250ZXh0MTMoQmVhbnNDb250ZXh0KTtcbiAgY29uc3QgW3Jvd0FuaW1hdGlvbkNsYXNzLCBzZXRSb3dBbmltYXRpb25DbGFzc10gPSB1c2VTdGF0ZTE0KFwiXCIpO1xuICBjb25zdCBbdG9wSGVpZ2h0LCBzZXRUb3BIZWlnaHRdID0gdXNlU3RhdGUxNCgwKTtcbiAgY29uc3QgW2JvdHRvbUhlaWdodCwgc2V0Qm90dG9tSGVpZ2h0XSA9IHVzZVN0YXRlMTQoMCk7XG4gIGNvbnN0IFtzdGlja3lUb3BIZWlnaHQsIHNldFN0aWNreVRvcEhlaWdodF0gPSB1c2VTdGF0ZTE0KFwiMHB4XCIpO1xuICBjb25zdCBbc3RpY2t5VG9wVG9wLCBzZXRTdGlja3lUb3BUb3BdID0gdXNlU3RhdGUxNChcIjBweFwiKTtcbiAgY29uc3QgW3N0aWNreVRvcFdpZHRoLCBzZXRTdGlja3lUb3BXaWR0aF0gPSB1c2VTdGF0ZTE0KFwiMTAwJVwiKTtcbiAgY29uc3QgW3N0aWNreUJvdHRvbUhlaWdodCwgc2V0U3RpY2t5Qm90dG9tSGVpZ2h0XSA9IHVzZVN0YXRlMTQoXCIwcHhcIik7XG4gIGNvbnN0IFtzdGlja3lCb3R0b21Cb3R0b20sIHNldFN0aWNreUJvdHRvbUJvdHRvbV0gPSB1c2VTdGF0ZTE0KFwiMHB4XCIpO1xuICBjb25zdCBbc3RpY2t5Qm90dG9tV2lkdGgsIHNldFN0aWNreUJvdHRvbVdpZHRoXSA9IHVzZVN0YXRlMTQoXCIxMDAlXCIpO1xuICBjb25zdCBbdG9wRGlzcGxheSwgc2V0VG9wRGlzcGxheV0gPSB1c2VTdGF0ZTE0KFwiXCIpO1xuICBjb25zdCBbYm90dG9tRGlzcGxheSwgc2V0Qm90dG9tRGlzcGxheV0gPSB1c2VTdGF0ZTE0KFwiXCIpO1xuICBjb25zdCBbZm9yY2VWZXJ0aWNhbFNjcm9sbENsYXNzLCBzZXRGb3JjZVZlcnRpY2FsU2Nyb2xsQ2xhc3NdID0gdXNlU3RhdGUxNChudWxsKTtcbiAgY29uc3QgW3RvcEFuZEJvdHRvbU92ZXJmbG93WSwgc2V0VG9wQW5kQm90dG9tT3ZlcmZsb3dZXSA9IHVzZVN0YXRlMTQoXCJcIik7XG4gIGNvbnN0IFtjZWxsU2VsZWN0YWJsZUNzcywgc2V0Q2VsbFNlbGVjdGFibGVDc3NdID0gdXNlU3RhdGUxNChudWxsKTtcbiAgY29uc3QgW2xheW91dENsYXNzLCBzZXRMYXlvdXRDbGFzc10gPSB1c2VTdGF0ZTE0KFwiYWctbGF5b3V0LW5vcm1hbFwiKTtcbiAgY29uc3QgY3NzQ2xhc3NNYW5hZ2VyID0gdXNlUmVmMTIoKTtcbiAgaWYgKCFjc3NDbGFzc01hbmFnZXIuY3VycmVudCkge1xuICAgIGNzc0NsYXNzTWFuYWdlci5jdXJyZW50ID0gbmV3IENzc0NsYXNzTWFuYWdlcjQoKCkgPT4gZVJvb3QuY3VycmVudCk7XG4gIH1cbiAgY29uc3QgZVJvb3QgPSB1c2VSZWYxMihudWxsKTtcbiAgY29uc3QgZVRvcCA9IHVzZVJlZjEyKG51bGwpO1xuICBjb25zdCBlU3RpY2t5VG9wID0gdXNlUmVmMTIobnVsbCk7XG4gIGNvbnN0IGVTdGlja3lCb3R0b20gPSB1c2VSZWYxMihudWxsKTtcbiAgY29uc3QgZUJvZHkgPSB1c2VSZWYxMihudWxsKTtcbiAgY29uc3QgZUJvZHlWaWV3cG9ydCA9IHVzZVJlZjEyKG51bGwpO1xuICBjb25zdCBlQm90dG9tID0gdXNlUmVmMTIobnVsbCk7XG4gIGNvbnN0IGJlYW5zVG9EZXN0cm95ID0gdXNlUmVmMTIoW10pO1xuICBjb25zdCBkZXN0cm95RnVuY3MgPSB1c2VSZWYxMihbXSk7XG4gIHJlYWN0Q29tbWVudF9kZWZhdWx0KFwiIEFHIEdyaWQgQm9keSBcIiwgZVJvb3QpO1xuICByZWFjdENvbW1lbnRfZGVmYXVsdChcIiBBRyBQaW5uZWQgVG9wIFwiLCBlVG9wKTtcbiAgcmVhY3RDb21tZW50X2RlZmF1bHQoXCIgQUcgU3RpY2t5IFRvcCBcIiwgZVN0aWNreVRvcCk7XG4gIHJlYWN0Q29tbWVudF9kZWZhdWx0KFwiIEFHIE1pZGRsZSBcIiwgZUJvZHlWaWV3cG9ydCk7XG4gIHJlYWN0Q29tbWVudF9kZWZhdWx0KFwiIEFHIFBpbm5lZCBCb3R0b20gXCIsIGVCb3R0b20pO1xuICBjb25zdCBzZXRSZWYyID0gdXNlQ2FsbGJhY2sxMigoZVJlZikgPT4ge1xuICAgIGVSb290LmN1cnJlbnQgPSBlUmVmO1xuICAgIGlmICghZVJlZikge1xuICAgICAgYmVhbnNUb0Rlc3Ryb3kuY3VycmVudCA9IGNvbnRleHQuZGVzdHJveUJlYW5zKGJlYW5zVG9EZXN0cm95LmN1cnJlbnQpO1xuICAgICAgZGVzdHJveUZ1bmNzLmN1cnJlbnQuZm9yRWFjaCgoZikgPT4gZigpKTtcbiAgICAgIGRlc3Ryb3lGdW5jcy5jdXJyZW50ID0gW107XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghY29udGV4dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhdHRhY2hUb0RvbSA9IChlUGFyZW50LCBlQ2hpbGQpID0+IHtcbiAgICAgIGVQYXJlbnQuYXBwZW5kQ2hpbGQoZUNoaWxkKTtcbiAgICAgIGRlc3Ryb3lGdW5jcy5jdXJyZW50LnB1c2goKCkgPT4gZVBhcmVudC5yZW1vdmVDaGlsZChlQ2hpbGQpKTtcbiAgICB9O1xuICAgIGNvbnN0IG5ld0NvbXAgPSAoY29tcENsYXNzKSA9PiB7XG4gICAgICBjb25zdCBjb21wID0gY29udGV4dC5jcmVhdGVCZWFuKG5ldyBjb21wQ2xhc3MoKSk7XG4gICAgICBiZWFuc1RvRGVzdHJveS5jdXJyZW50LnB1c2goY29tcCk7XG4gICAgICByZXR1cm4gY29tcDtcbiAgICB9O1xuICAgIGNvbnN0IGFkZENvbXAgPSAoZVBhcmVudCwgY29tcENsYXNzLCBjb21tZW50KSA9PiB7XG4gICAgICBhdHRhY2hUb0RvbShlUGFyZW50LCBkb2N1bWVudC5jcmVhdGVDb21tZW50KGNvbW1lbnQpKTtcbiAgICAgIGF0dGFjaFRvRG9tKGVQYXJlbnQsIG5ld0NvbXAoY29tcENsYXNzKS5nZXRHdWkoKSk7XG4gICAgfTtcbiAgICBhZGRDb21wKGVSZWYsIEZha2VIU2Nyb2xsQ29tcCwgXCIgQUcgRmFrZSBIb3Jpem9udGFsIFNjcm9sbCBcIik7XG4gICAgYWRkQ29tcChlUmVmLCBPdmVybGF5V3JhcHBlckNvbXBvbmVudCwgXCIgQUcgT3ZlcmxheSBXcmFwcGVyIFwiKTtcbiAgICBpZiAoZUJvZHkuY3VycmVudCkge1xuICAgICAgYWRkQ29tcChlQm9keS5jdXJyZW50LCBGYWtlVlNjcm9sbENvbXAsIFwiIEFHIEZha2UgVmVydGljYWwgU2Nyb2xsIFwiKTtcbiAgICB9XG4gICAgY29uc3QgY29tcFByb3h5ID0ge1xuICAgICAgc2V0Um93QW5pbWF0aW9uQ3NzT25Cb2R5Vmlld3BvcnQ6IHNldFJvd0FuaW1hdGlvbkNsYXNzLFxuICAgICAgc2V0Q29sdW1uQ291bnQ6IChjb3VudCkgPT4ge1xuICAgICAgICBpZiAoZVJvb3QuY3VycmVudCkge1xuICAgICAgICAgIF9zZXRBcmlhQ29sQ291bnQoZVJvb3QuY3VycmVudCwgY291bnQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0Um93Q291bnQ6IChjb3VudCkgPT4ge1xuICAgICAgICBpZiAoZVJvb3QuY3VycmVudCkge1xuICAgICAgICAgIF9zZXRBcmlhUm93Q291bnQoZVJvb3QuY3VycmVudCwgY291bnQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0VG9wSGVpZ2h0LFxuICAgICAgc2V0Qm90dG9tSGVpZ2h0LFxuICAgICAgc2V0U3RpY2t5VG9wSGVpZ2h0LFxuICAgICAgc2V0U3RpY2t5VG9wVG9wLFxuICAgICAgc2V0U3RpY2t5VG9wV2lkdGgsXG4gICAgICBzZXRUb3BEaXNwbGF5LFxuICAgICAgc2V0Qm90dG9tRGlzcGxheSxcbiAgICAgIHNldENvbHVtbk1vdmluZ0NzczogKGNzc0NsYXNzLCBmbGFnKSA9PiBjc3NDbGFzc01hbmFnZXIuY3VycmVudC5hZGRPclJlbW92ZUNzc0NsYXNzKGNzc0NsYXNzLCBmbGFnKSxcbiAgICAgIHVwZGF0ZUxheW91dENsYXNzZXM6IHNldExheW91dENsYXNzLFxuICAgICAgc2V0QWx3YXlzVmVydGljYWxTY3JvbGxDbGFzczogc2V0Rm9yY2VWZXJ0aWNhbFNjcm9sbENsYXNzLFxuICAgICAgc2V0UGlubmVkVG9wQm90dG9tT3ZlcmZsb3dZOiBzZXRUb3BBbmRCb3R0b21PdmVyZmxvd1ksXG4gICAgICBzZXRDZWxsU2VsZWN0YWJsZUNzczogKGNzc0NsYXNzLCBmbGFnKSA9PiBzZXRDZWxsU2VsZWN0YWJsZUNzcyhmbGFnID8gY3NzQ2xhc3MgOiBudWxsKSxcbiAgICAgIHNldEJvZHlWaWV3cG9ydFdpZHRoOiAod2lkdGgpID0+IHtcbiAgICAgICAgaWYgKGVCb2R5Vmlld3BvcnQuY3VycmVudCkge1xuICAgICAgICAgIGVCb2R5Vmlld3BvcnQuY3VycmVudC5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcmVnaXN0ZXJCb2R5Vmlld3BvcnRSZXNpemVMaXN0ZW5lcjogKGxpc3RlbmVyKSA9PiB7XG4gICAgICAgIGlmIChlQm9keVZpZXdwb3J0LmN1cnJlbnQpIHtcbiAgICAgICAgICBjb25zdCB1bnN1YnNjcmliZUZyb21SZXNpemUgPSByZXNpemVPYnNlcnZlclNlcnZpY2Uub2JzZXJ2ZVJlc2l6ZShlQm9keVZpZXdwb3J0LmN1cnJlbnQsIGxpc3RlbmVyKTtcbiAgICAgICAgICBkZXN0cm95RnVuY3MuY3VycmVudC5wdXNoKCgpID0+IHVuc3Vic2NyaWJlRnJvbVJlc2l6ZSgpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldFN0aWNreUJvdHRvbUhlaWdodCxcbiAgICAgIHNldFN0aWNreUJvdHRvbUJvdHRvbSxcbiAgICAgIHNldFN0aWNreUJvdHRvbVdpZHRoXG4gICAgfTtcbiAgICBjb25zdCBjdHJsID0gY29udGV4dC5jcmVhdGVCZWFuKG5ldyBHcmlkQm9keUN0cmwoKSk7XG4gICAgYmVhbnNUb0Rlc3Ryb3kuY3VycmVudC5wdXNoKGN0cmwpO1xuICAgIGN0cmwuc2V0Q29tcChcbiAgICAgIGNvbXBQcm94eSxcbiAgICAgIGVSZWYsXG4gICAgICBlQm9keVZpZXdwb3J0LmN1cnJlbnQsXG4gICAgICBlVG9wLmN1cnJlbnQsXG4gICAgICBlQm90dG9tLmN1cnJlbnQsXG4gICAgICBlU3RpY2t5VG9wLmN1cnJlbnQsXG4gICAgICBlU3RpY2t5Qm90dG9tLmN1cnJlbnRcbiAgICApO1xuICB9LCBbXSk7XG4gIGNvbnN0IHJvb3RDbGFzc2VzID0gdXNlTWVtbzEwKCgpID0+IGNsYXNzZXNMaXN0KFwiYWctcm9vdFwiLCBcImFnLXVuc2VsZWN0YWJsZVwiLCBsYXlvdXRDbGFzcyksIFtsYXlvdXRDbGFzc10pO1xuICBjb25zdCBib2R5Vmlld3BvcnRDbGFzc2VzID0gdXNlTWVtbzEwKFxuICAgICgpID0+IGNsYXNzZXNMaXN0KFxuICAgICAgXCJhZy1ib2R5LXZpZXdwb3J0XCIsXG4gICAgICByb3dBbmltYXRpb25DbGFzcyxcbiAgICAgIGxheW91dENsYXNzLFxuICAgICAgZm9yY2VWZXJ0aWNhbFNjcm9sbENsYXNzLFxuICAgICAgY2VsbFNlbGVjdGFibGVDc3NcbiAgICApLFxuICAgIFtyb3dBbmltYXRpb25DbGFzcywgbGF5b3V0Q2xhc3MsIGZvcmNlVmVydGljYWxTY3JvbGxDbGFzcywgY2VsbFNlbGVjdGFibGVDc3NdXG4gICk7XG4gIGNvbnN0IGJvZHlDbGFzc2VzID0gdXNlTWVtbzEwKCgpID0+IGNsYXNzZXNMaXN0KFwiYWctYm9keVwiLCBsYXlvdXRDbGFzcyksIFtsYXlvdXRDbGFzc10pO1xuICBjb25zdCB0b3BDbGFzc2VzID0gdXNlTWVtbzEwKCgpID0+IGNsYXNzZXNMaXN0KFwiYWctZmxvYXRpbmctdG9wXCIsIGNlbGxTZWxlY3RhYmxlQ3NzKSwgW2NlbGxTZWxlY3RhYmxlQ3NzXSk7XG4gIGNvbnN0IHN0aWNreVRvcENsYXNzZXMgPSB1c2VNZW1vMTAoKCkgPT4gY2xhc3Nlc0xpc3QoXCJhZy1zdGlja3ktdG9wXCIsIGNlbGxTZWxlY3RhYmxlQ3NzKSwgW2NlbGxTZWxlY3RhYmxlQ3NzXSk7XG4gIGNvbnN0IHN0aWNreUJvdHRvbUNsYXNzZXMgPSB1c2VNZW1vMTAoXG4gICAgKCkgPT4gY2xhc3Nlc0xpc3QoXCJhZy1zdGlja3ktYm90dG9tXCIsIHN0aWNreUJvdHRvbUhlaWdodCA9PT0gXCIwcHhcIiA/IFwiYWctaGlkZGVuXCIgOiBudWxsLCBjZWxsU2VsZWN0YWJsZUNzcyksXG4gICAgW2NlbGxTZWxlY3RhYmxlQ3NzLCBzdGlja3lCb3R0b21IZWlnaHRdXG4gICk7XG4gIGNvbnN0IGJvdHRvbUNsYXNzZXMgPSB1c2VNZW1vMTAoKCkgPT4gY2xhc3Nlc0xpc3QoXCJhZy1mbG9hdGluZy1ib3R0b21cIiwgY2VsbFNlbGVjdGFibGVDc3MpLCBbY2VsbFNlbGVjdGFibGVDc3NdKTtcbiAgY29uc3QgdG9wU3R5bGUgPSB1c2VNZW1vMTAoXG4gICAgKCkgPT4gKHtcbiAgICAgIGhlaWdodDogdG9wSGVpZ2h0LFxuICAgICAgbWluSGVpZ2h0OiB0b3BIZWlnaHQsXG4gICAgICBkaXNwbGF5OiB0b3BEaXNwbGF5LFxuICAgICAgb3ZlcmZsb3dZOiB0b3BBbmRCb3R0b21PdmVyZmxvd1lcbiAgICB9KSxcbiAgICBbdG9wSGVpZ2h0LCB0b3BEaXNwbGF5LCB0b3BBbmRCb3R0b21PdmVyZmxvd1ldXG4gICk7XG4gIGNvbnN0IHN0aWNreVRvcFN0eWxlID0gdXNlTWVtbzEwKFxuICAgICgpID0+ICh7XG4gICAgICBoZWlnaHQ6IHN0aWNreVRvcEhlaWdodCxcbiAgICAgIHRvcDogc3RpY2t5VG9wVG9wLFxuICAgICAgd2lkdGg6IHN0aWNreVRvcFdpZHRoXG4gICAgfSksXG4gICAgW3N0aWNreVRvcEhlaWdodCwgc3RpY2t5VG9wVG9wLCBzdGlja3lUb3BXaWR0aF1cbiAgKTtcbiAgY29uc3Qgc3RpY2t5Qm90dG9tU3R5bGUgPSB1c2VNZW1vMTAoXG4gICAgKCkgPT4gKHtcbiAgICAgIGhlaWdodDogc3RpY2t5Qm90dG9tSGVpZ2h0LFxuICAgICAgYm90dG9tOiBzdGlja3lCb3R0b21Cb3R0b20sXG4gICAgICB3aWR0aDogc3RpY2t5Qm90dG9tV2lkdGhcbiAgICB9KSxcbiAgICBbc3RpY2t5Qm90dG9tSGVpZ2h0LCBzdGlja3lCb3R0b21Cb3R0b20sIHN0aWNreUJvdHRvbVdpZHRoXVxuICApO1xuICBjb25zdCBib3R0b21TdHlsZSA9IHVzZU1lbW8xMChcbiAgICAoKSA9PiAoe1xuICAgICAgaGVpZ2h0OiBib3R0b21IZWlnaHQsXG4gICAgICBtaW5IZWlnaHQ6IGJvdHRvbUhlaWdodCxcbiAgICAgIGRpc3BsYXk6IGJvdHRvbURpc3BsYXksXG4gICAgICBvdmVyZmxvd1k6IHRvcEFuZEJvdHRvbU92ZXJmbG93WVxuICAgIH0pLFxuICAgIFtib3R0b21IZWlnaHQsIGJvdHRvbURpc3BsYXksIHRvcEFuZEJvdHRvbU92ZXJmbG93WV1cbiAgKTtcbiAgY29uc3QgY3JlYXRlUm93Q29udGFpbmVyID0gKGNvbnRhaW5lcikgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0MTUuY3JlYXRlRWxlbWVudChyb3dDb250YWluZXJDb21wX2RlZmF1bHQsIHsgbmFtZTogY29udGFpbmVyLCBrZXk6IGAke2NvbnRhaW5lcn0tY29udGFpbmVyYCB9KTtcbiAgY29uc3QgY3JlYXRlU2VjdGlvbiA9ICh7XG4gICAgc2VjdGlvbixcbiAgICBjaGlsZHJlbixcbiAgICBjbGFzc05hbWUsXG4gICAgc3R5bGVcbiAgfSkgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0MTUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogc2VjdGlvbiwgY2xhc3NOYW1lLCByb2xlOiBcInByZXNlbnRhdGlvblwiLCBzdHlsZSB9LCBjaGlsZHJlbi5tYXAoY3JlYXRlUm93Q29udGFpbmVyKSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBzZXRSZWYyLCBjbGFzc05hbWU6IHJvb3RDbGFzc2VzLCByb2xlOiBcInRyZWVncmlkXCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTUuY3JlYXRlRWxlbWVudChncmlkSGVhZGVyQ29tcF9kZWZhdWx0LCBudWxsKSwgY3JlYXRlU2VjdGlvbih7XG4gICAgc2VjdGlvbjogZVRvcCxcbiAgICBjbGFzc05hbWU6IHRvcENsYXNzZXMsXG4gICAgc3R5bGU6IHRvcFN0eWxlLFxuICAgIGNoaWxkcmVuOiBbXCJ0b3BMZWZ0XCIsIFwidG9wQ2VudGVyXCIsIFwidG9wUmlnaHRcIiwgXCJ0b3BGdWxsV2lkdGhcIl1cbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE1LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGJvZHlDbGFzc2VzLCByZWY6IGVCb2R5LCByb2xlOiBcInByZXNlbnRhdGlvblwiIH0sIGNyZWF0ZVNlY3Rpb24oe1xuICAgIHNlY3Rpb246IGVCb2R5Vmlld3BvcnQsXG4gICAgY2xhc3NOYW1lOiBib2R5Vmlld3BvcnRDbGFzc2VzLFxuICAgIGNoaWxkcmVuOiBbXCJsZWZ0XCIsIFwiY2VudGVyXCIsIFwicmlnaHRcIiwgXCJmdWxsV2lkdGhcIl1cbiAgfSkpLCBjcmVhdGVTZWN0aW9uKHtcbiAgICBzZWN0aW9uOiBlU3RpY2t5VG9wLFxuICAgIGNsYXNzTmFtZTogc3RpY2t5VG9wQ2xhc3NlcyxcbiAgICBzdHlsZTogc3RpY2t5VG9wU3R5bGUsXG4gICAgY2hpbGRyZW46IFtcInN0aWNreVRvcExlZnRcIiwgXCJzdGlja3lUb3BDZW50ZXJcIiwgXCJzdGlja3lUb3BSaWdodFwiLCBcInN0aWNreVRvcEZ1bGxXaWR0aFwiXVxuICB9KSwgY3JlYXRlU2VjdGlvbih7XG4gICAgc2VjdGlvbjogZVN0aWNreUJvdHRvbSxcbiAgICBjbGFzc05hbWU6IHN0aWNreUJvdHRvbUNsYXNzZXMsXG4gICAgc3R5bGU6IHN0aWNreUJvdHRvbVN0eWxlLFxuICAgIGNoaWxkcmVuOiBbXCJzdGlja3lCb3R0b21MZWZ0XCIsIFwic3RpY2t5Qm90dG9tQ2VudGVyXCIsIFwic3RpY2t5Qm90dG9tUmlnaHRcIiwgXCJzdGlja3lCb3R0b21GdWxsV2lkdGhcIl1cbiAgfSksIGNyZWF0ZVNlY3Rpb24oe1xuICAgIHNlY3Rpb246IGVCb3R0b20sXG4gICAgY2xhc3NOYW1lOiBib3R0b21DbGFzc2VzLFxuICAgIHN0eWxlOiBib3R0b21TdHlsZSxcbiAgICBjaGlsZHJlbjogW1wiYm90dG9tTGVmdFwiLCBcImJvdHRvbUNlbnRlclwiLCBcImJvdHRvbVJpZ2h0XCIsIFwiYm90dG9tRnVsbFdpZHRoXCJdXG4gIH0pKTtcbn07XG52YXIgZ3JpZEJvZHlDb21wX2RlZmF1bHQgPSBtZW1vMTIoR3JpZEJvZHlDb21wKTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS90YWJHdWFyZENvbXAudHN4XG5pbXBvcnQgeyBUYWJHdWFyZENsYXNzTmFtZXMsIFRhYkd1YXJkQ3RybCB9IGZyb20gXCJhZy1ncmlkLWNvbW11bml0eVwiO1xuaW1wb3J0IFJlYWN0MTYsIHsgZm9yd2FyZFJlZiBhcyBmb3J3YXJkUmVmMiwgbWVtbyBhcyBtZW1vMTMsIHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrMTMsIHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDE0LCB1c2VJbXBlcmF0aXZlSGFuZGxlIGFzIHVzZUltcGVyYXRpdmVIYW5kbGUyLCB1c2VSZWYgYXMgdXNlUmVmMTMgfSBmcm9tIFwicmVhY3RcIjtcbnZhciBUYWJHdWFyZENvbXBSZWYgPSAocHJvcHMsIGZvcndhcmRSZWY0KSA9PiB7XG4gIGNvbnN0IHsgY2hpbGRyZW4sIGVGb2N1c2FibGVFbGVtZW50LCBvblRhYktleURvd24sIGdyaWRDdHJsLCBmb3JjZUZvY3VzT3V0V2hlblRhYkd1YXJkc0FyZUVtcHR5IH0gPSBwcm9wcztcbiAgY29uc3QgeyBjb250ZXh0IH0gPSB1c2VDb250ZXh0MTQoQmVhbnNDb250ZXh0KTtcbiAgY29uc3QgdG9wVGFiR3VhcmRSZWYgPSB1c2VSZWYxMyhudWxsKTtcbiAgY29uc3QgYm90dG9tVGFiR3VhcmRSZWYgPSB1c2VSZWYxMyhudWxsKTtcbiAgY29uc3QgdGFiR3VhcmRDdHJsUmVmID0gdXNlUmVmMTMoKTtcbiAgY29uc3Qgc2V0VGFiSW5kZXggPSAodmFsdWUpID0+IHtcbiAgICBjb25zdCBwcm9jZXNzZWRWYWx1ZSA9IHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiBwYXJzZUludCh2YWx1ZSwgMTApLnRvU3RyaW5nKCk7XG4gICAgW3RvcFRhYkd1YXJkUmVmLCBib3R0b21UYWJHdWFyZFJlZl0uZm9yRWFjaCgodGFiR3VhcmQpID0+IHtcbiAgICAgIGlmIChwcm9jZXNzZWRWYWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRhYkd1YXJkLmN1cnJlbnQ/LnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFiR3VhcmQuY3VycmVudD8uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgcHJvY2Vzc2VkVmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICB1c2VJbXBlcmF0aXZlSGFuZGxlMihmb3J3YXJkUmVmNCwgKCkgPT4gKHtcbiAgICBmb3JjZUZvY3VzT3V0T2ZDb250YWluZXIodXApIHtcbiAgICAgIHRhYkd1YXJkQ3RybFJlZi5jdXJyZW50Py5mb3JjZUZvY3VzT3V0T2ZDb250YWluZXIodXApO1xuICAgIH1cbiAgfSkpO1xuICBjb25zdCBzZXR1cEN0cmwgPSB1c2VDYWxsYmFjazEzKCgpID0+IHtcbiAgICBjb25zdCB0b3BUYWJHdWFyZCA9IHRvcFRhYkd1YXJkUmVmLmN1cnJlbnQ7XG4gICAgY29uc3QgYm90dG9tVGFiR3VhcmQgPSBib3R0b21UYWJHdWFyZFJlZi5jdXJyZW50O1xuICAgIGlmICghdG9wVGFiR3VhcmQgJiYgIWJvdHRvbVRhYkd1YXJkKSB7XG4gICAgICB0YWJHdWFyZEN0cmxSZWYuY3VycmVudCA9IGNvbnRleHQuZGVzdHJveUJlYW4odGFiR3VhcmRDdHJsUmVmLmN1cnJlbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodG9wVGFiR3VhcmQgJiYgYm90dG9tVGFiR3VhcmQpIHtcbiAgICAgIGNvbnN0IGNvbXBQcm94eSA9IHtcbiAgICAgICAgc2V0VGFiSW5kZXhcbiAgICAgIH07XG4gICAgICB0YWJHdWFyZEN0cmxSZWYuY3VycmVudCA9IGNvbnRleHQuY3JlYXRlQmVhbihcbiAgICAgICAgbmV3IFRhYkd1YXJkQ3RybCh7XG4gICAgICAgICAgY29tcDogY29tcFByb3h5LFxuICAgICAgICAgIGVUb3BHdWFyZDogdG9wVGFiR3VhcmQsXG4gICAgICAgICAgZUJvdHRvbUd1YXJkOiBib3R0b21UYWJHdWFyZCxcbiAgICAgICAgICBlRm9jdXNhYmxlRWxlbWVudCxcbiAgICAgICAgICBvblRhYktleURvd24sXG4gICAgICAgICAgZm9yY2VGb2N1c091dFdoZW5UYWJHdWFyZHNBcmVFbXB0eSxcbiAgICAgICAgICBmb2N1c0lubmVyRWxlbWVudDogKGZyb21Cb3R0b20pID0+IGdyaWRDdHJsLmZvY3VzSW5uZXJFbGVtZW50KGZyb21Cb3R0b20pXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfSwgW10pO1xuICBjb25zdCBzZXRUb3BSZWYgPSB1c2VDYWxsYmFjazEzKFxuICAgIChlKSA9PiB7XG4gICAgICB0b3BUYWJHdWFyZFJlZi5jdXJyZW50ID0gZTtcbiAgICAgIHNldHVwQ3RybCgpO1xuICAgIH0sXG4gICAgW3NldHVwQ3RybF1cbiAgKTtcbiAgY29uc3Qgc2V0Qm90dG9tUmVmID0gdXNlQ2FsbGJhY2sxMyhcbiAgICAoZSkgPT4ge1xuICAgICAgYm90dG9tVGFiR3VhcmRSZWYuY3VycmVudCA9IGU7XG4gICAgICBzZXR1cEN0cmwoKTtcbiAgICB9LFxuICAgIFtzZXR1cEN0cmxdXG4gICk7XG4gIGNvbnN0IGNyZWF0ZVRhYkd1YXJkID0gKHNpZGUpID0+IHtcbiAgICBjb25zdCBjbGFzc05hbWUgPSBzaWRlID09PSBcInRvcFwiID8gVGFiR3VhcmRDbGFzc05hbWVzLlRBQl9HVUFSRF9UT1AgOiBUYWJHdWFyZENsYXNzTmFtZXMuVEFCX0dVQVJEX0JPVFRPTTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTYuY3JlYXRlRWxlbWVudChcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogYCR7VGFiR3VhcmRDbGFzc05hbWVzLlRBQl9HVUFSRH0gJHtjbGFzc05hbWV9YCxcbiAgICAgICAgcm9sZTogXCJwcmVzZW50YXRpb25cIixcbiAgICAgICAgcmVmOiBzaWRlID09PSBcInRvcFwiID8gc2V0VG9wUmVmIDogc2V0Qm90dG9tUmVmXG4gICAgICB9XG4gICAgKTtcbiAgfTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE2LmNyZWF0ZUVsZW1lbnQoUmVhY3QxNi5GcmFnbWVudCwgbnVsbCwgY3JlYXRlVGFiR3VhcmQoXCJ0b3BcIiksIGNoaWxkcmVuLCBjcmVhdGVUYWJHdWFyZChcImJvdHRvbVwiKSk7XG59O1xudmFyIFRhYkd1YXJkQ29tcCA9IGZvcndhcmRSZWYyKFRhYkd1YXJkQ29tcFJlZik7XG52YXIgdGFiR3VhcmRDb21wX2RlZmF1bHQgPSBtZW1vMTMoVGFiR3VhcmRDb21wKTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9ncmlkQ29tcC50c3hcbnZhciBHcmlkQ29tcCA9ICh7IGNvbnRleHQgfSkgPT4ge1xuICBjb25zdCBbcnRsQ2xhc3MsIHNldFJ0bENsYXNzXSA9IHVzZVN0YXRlMTUoXCJcIik7XG4gIGNvbnN0IFtncmlkVGhlbWVDbGFzcywgc2V0R3JpZFRoZW1lQ2xhc3NdID0gdXNlU3RhdGUxNShcIlwiKTtcbiAgY29uc3QgW2xheW91dENsYXNzLCBzZXRMYXlvdXRDbGFzc10gPSB1c2VTdGF0ZTE1KFwiXCIpO1xuICBjb25zdCBbY3Vyc29yLCBzZXRDdXJzb3JdID0gdXNlU3RhdGUxNShudWxsKTtcbiAgY29uc3QgW3VzZXJTZWxlY3QsIHNldFVzZXJTZWxlY3RdID0gdXNlU3RhdGUxNShudWxsKTtcbiAgY29uc3QgW2luaXRpYWxpc2VkLCBzZXRJbml0aWFsaXNlZF0gPSB1c2VTdGF0ZTE1KGZhbHNlKTtcbiAgY29uc3QgW3RhYkd1YXJkUmVhZHksIHNldFRhYkd1YXJkUmVhZHldID0gdXNlU3RhdGUxNSgpO1xuICBjb25zdCBncmlkQ3RybFJlZiA9IHVzZVJlZjE0KCk7XG4gIGNvbnN0IGVSb290V3JhcHBlclJlZiA9IHVzZVJlZjE0KG51bGwpO1xuICBjb25zdCB0YWJHdWFyZFJlZiA9IHVzZVJlZjE0KCk7XG4gIGNvbnN0IFtlR3JpZEJvZHlQYXJlbnQsIHNldEdyaWRCb2R5UGFyZW50XSA9IHVzZVN0YXRlMTUobnVsbCk7XG4gIGNvbnN0IGZvY3VzSW5uZXJFbGVtZW50UmVmID0gdXNlUmVmMTQoKCkgPT4gdm9pZCAwKTtcbiAgY29uc3QgcGFnaW5hdGlvbkNvbXBSZWYgPSB1c2VSZWYxNCgpO1xuICBjb25zdCBmb2N1c2FibGVDb250YWluZXJzUmVmID0gdXNlUmVmMTQoW10pO1xuICBjb25zdCBvblRhYktleURvd24gPSB1c2VDYWxsYmFjazE0KCgpID0+IHZvaWQgMCwgW10pO1xuICBjb25zdCBiZWFucyA9IHVzZU1lbW8xMSgoKSA9PiB7XG4gICAgaWYgKGNvbnRleHQuaXNEZXN0cm95ZWQoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0LmdldEJlYW5zKCk7XG4gIH0sIFtjb250ZXh0XSk7XG4gIHJlYWN0Q29tbWVudF9kZWZhdWx0KFwiIEFHIEdyaWQgXCIsIGVSb290V3JhcHBlclJlZik7XG4gIGNvbnN0IHNldFJlZjIgPSB1c2VDYWxsYmFjazE0KChlUmVmKSA9PiB7XG4gICAgZVJvb3RXcmFwcGVyUmVmLmN1cnJlbnQgPSBlUmVmO1xuICAgIGdyaWRDdHJsUmVmLmN1cnJlbnQgPSBlUmVmID8gY29udGV4dC5jcmVhdGVCZWFuKG5ldyBHcmlkQ3RybCgpKSA6IGNvbnRleHQuZGVzdHJveUJlYW4oZ3JpZEN0cmxSZWYuY3VycmVudCk7XG4gICAgaWYgKCFlUmVmIHx8IGNvbnRleHQuaXNEZXN0cm95ZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBncmlkQ3RybCA9IGdyaWRDdHJsUmVmLmN1cnJlbnQ7XG4gICAgZm9jdXNJbm5lckVsZW1lbnRSZWYuY3VycmVudCA9IGdyaWRDdHJsLmZvY3VzSW5uZXJFbGVtZW50LmJpbmQoZ3JpZEN0cmwpO1xuICAgIGNvbnN0IGNvbXBQcm94eSA9IHtcbiAgICAgIGRlc3Ryb3lHcmlkVWk6ICgpID0+IHtcbiAgICAgIH0sXG4gICAgICAvLyBkbyBub3RoaW5nLCBhcyBmcmFtZXdvcmsgdXNlcnMgZGVzdHJveSBncmlkIGJ5IHJlbW92aW5nIHRoZSBjb21wXG4gICAgICBzZXRSdGxDbGFzcyxcbiAgICAgIHNldEdyaWRUaGVtZUNsYXNzLFxuICAgICAgZm9yY2VGb2N1c091dE9mQ29udGFpbmVyOiAodXApID0+IHtcbiAgICAgICAgaWYgKCF1cCAmJiBwYWdpbmF0aW9uQ29tcFJlZi5jdXJyZW50Py5pc0Rpc3BsYXllZCgpKSB7XG4gICAgICAgICAgcGFnaW5hdGlvbkNvbXBSZWYuY3VycmVudC5mb3JjZUZvY3VzT3V0T2ZDb250YWluZXIodXApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0YWJHdWFyZFJlZi5jdXJyZW50Py5mb3JjZUZvY3VzT3V0T2ZDb250YWluZXIodXApO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZUxheW91dENsYXNzZXM6IHNldExheW91dENsYXNzLFxuICAgICAgZ2V0Rm9jdXNhYmxlQ29udGFpbmVyczogKCkgPT4ge1xuICAgICAgICBjb25zdCBjb21wcyA9IFtdO1xuICAgICAgICBjb25zdCBncmlkQm9keUNvbXBFbCA9IGVSb290V3JhcHBlclJlZi5jdXJyZW50Py5xdWVyeVNlbGVjdG9yKFwiLmFnLXJvb3RcIik7XG4gICAgICAgIGlmIChncmlkQm9keUNvbXBFbCkge1xuICAgICAgICAgIGNvbXBzLnB1c2goeyBnZXRHdWk6ICgpID0+IGdyaWRCb2R5Q29tcEVsIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZvY3VzYWJsZUNvbnRhaW5lcnNSZWYuY3VycmVudC5mb3JFYWNoKChjb21wKSA9PiB7XG4gICAgICAgICAgaWYgKGNvbXAuaXNEaXNwbGF5ZWQoKSkge1xuICAgICAgICAgICAgY29tcHMucHVzaChjb21wKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY29tcHM7XG4gICAgICB9LFxuICAgICAgc2V0Q3Vyc29yLFxuICAgICAgc2V0VXNlclNlbGVjdFxuICAgIH07XG4gICAgZ3JpZEN0cmwuc2V0Q29tcChjb21wUHJveHksIGVSZWYsIGVSZWYpO1xuICAgIHNldEluaXRpYWxpc2VkKHRydWUpO1xuICB9LCBbXSk7XG4gIHVzZUVmZmVjdDgoKCkgPT4ge1xuICAgIGNvbnN0IGdyaWRDdHJsID0gZ3JpZEN0cmxSZWYuY3VycmVudDtcbiAgICBjb25zdCBlUm9vdFdyYXBwZXIgPSBlUm9vdFdyYXBwZXJSZWYuY3VycmVudDtcbiAgICBpZiAoIXRhYkd1YXJkUmVhZHkgfHwgIWJlYW5zIHx8ICFncmlkQ3RybCB8fCAhZUdyaWRCb2R5UGFyZW50IHx8ICFlUm9vdFdyYXBwZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYmVhbnNUb0Rlc3Ryb3kgPSBbXTtcbiAgICBjb25zdCB7XG4gICAgICB3YXRlcm1hcmtTZWxlY3RvcixcbiAgICAgIHBhZ2luYXRpb25TZWxlY3RvcixcbiAgICAgIHNpZGVCYXJTZWxlY3RvcixcbiAgICAgIHN0YXR1c0JhclNlbGVjdG9yLFxuICAgICAgZ3JpZEhlYWRlckRyb3Bab25lc1NlbGVjdG9yXG4gICAgfSA9IGdyaWRDdHJsLmdldE9wdGlvbmFsU2VsZWN0b3JzKCk7XG4gICAgY29uc3QgYWRkaXRpb25hbEVscyA9IFtdO1xuICAgIGlmIChncmlkSGVhZGVyRHJvcFpvbmVzU2VsZWN0b3IpIHtcbiAgICAgIGNvbnN0IGhlYWRlckRyb3Bab25lc0NvbXAgPSBjb250ZXh0LmNyZWF0ZUJlYW4obmV3IGdyaWRIZWFkZXJEcm9wWm9uZXNTZWxlY3Rvci5jb21wb25lbnQoKSk7XG4gICAgICBjb25zdCBlR3VpID0gaGVhZGVyRHJvcFpvbmVzQ29tcC5nZXRHdWkoKTtcbiAgICAgIGVSb290V3JhcHBlci5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGVHdWkpO1xuICAgICAgYWRkaXRpb25hbEVscy5wdXNoKGVHdWkpO1xuICAgICAgYmVhbnNUb0Rlc3Ryb3kucHVzaChoZWFkZXJEcm9wWm9uZXNDb21wKTtcbiAgICB9XG4gICAgaWYgKHNpZGVCYXJTZWxlY3Rvcikge1xuICAgICAgY29uc3Qgc2lkZUJhckNvbXAgPSBjb250ZXh0LmNyZWF0ZUJlYW4obmV3IHNpZGVCYXJTZWxlY3Rvci5jb21wb25lbnQoKSk7XG4gICAgICBjb25zdCBlR3VpID0gc2lkZUJhckNvbXAuZ2V0R3VpKCk7XG4gICAgICBjb25zdCBib3R0b21UYWJHdWFyZCA9IGVHcmlkQm9keVBhcmVudC5xdWVyeVNlbGVjdG9yKFwiLmFnLXRhYi1ndWFyZC1ib3R0b21cIik7XG4gICAgICBpZiAoYm90dG9tVGFiR3VhcmQpIHtcbiAgICAgICAgYm90dG9tVGFiR3VhcmQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlYmVnaW5cIiwgZUd1aSk7XG4gICAgICAgIGFkZGl0aW9uYWxFbHMucHVzaChlR3VpKTtcbiAgICAgIH1cbiAgICAgIGJlYW5zVG9EZXN0cm95LnB1c2goc2lkZUJhckNvbXApO1xuICAgICAgZm9jdXNhYmxlQ29udGFpbmVyc1JlZi5jdXJyZW50LnB1c2goc2lkZUJhckNvbXApO1xuICAgIH1cbiAgICBjb25zdCBhZGRDb21wb25lbnRUb0RvbSA9IChjb21wb25lbnQpID0+IHtcbiAgICAgIGNvbnN0IGNvbXAgPSBjb250ZXh0LmNyZWF0ZUJlYW4obmV3IGNvbXBvbmVudCgpKTtcbiAgICAgIGNvbnN0IGVHdWkgPSBjb21wLmdldEd1aSgpO1xuICAgICAgZVJvb3RXcmFwcGVyLmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBlR3VpKTtcbiAgICAgIGFkZGl0aW9uYWxFbHMucHVzaChlR3VpKTtcbiAgICAgIGJlYW5zVG9EZXN0cm95LnB1c2goY29tcCk7XG4gICAgICByZXR1cm4gY29tcDtcbiAgICB9O1xuICAgIGlmIChzdGF0dXNCYXJTZWxlY3Rvcikge1xuICAgICAgYWRkQ29tcG9uZW50VG9Eb20oc3RhdHVzQmFyU2VsZWN0b3IuY29tcG9uZW50KTtcbiAgICB9XG4gICAgaWYgKHBhZ2luYXRpb25TZWxlY3Rvcikge1xuICAgICAgY29uc3QgcGFnaW5hdGlvbkNvbXAgPSBhZGRDb21wb25lbnRUb0RvbShwYWdpbmF0aW9uU2VsZWN0b3IuY29tcG9uZW50KTtcbiAgICAgIHBhZ2luYXRpb25Db21wUmVmLmN1cnJlbnQgPSBwYWdpbmF0aW9uQ29tcDtcbiAgICAgIGZvY3VzYWJsZUNvbnRhaW5lcnNSZWYuY3VycmVudC5wdXNoKHBhZ2luYXRpb25Db21wKTtcbiAgICB9XG4gICAgaWYgKHdhdGVybWFya1NlbGVjdG9yKSB7XG4gICAgICBhZGRDb21wb25lbnRUb0RvbSh3YXRlcm1hcmtTZWxlY3Rvci5jb21wb25lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29udGV4dC5kZXN0cm95QmVhbnMoYmVhbnNUb0Rlc3Ryb3kpO1xuICAgICAgYWRkaXRpb25hbEVscy5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICBlbC5wYXJlbnRFbGVtZW50Py5yZW1vdmVDaGlsZChlbCk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9LCBbdGFiR3VhcmRSZWFkeSwgZUdyaWRCb2R5UGFyZW50LCBiZWFuc10pO1xuICBjb25zdCByb290V3JhcHBlckNsYXNzZXMgPSB1c2VNZW1vMTEoXG4gICAgKCkgPT4gY2xhc3Nlc0xpc3QoXCJhZy1yb290LXdyYXBwZXJcIiwgcnRsQ2xhc3MsIGdyaWRUaGVtZUNsYXNzLCBsYXlvdXRDbGFzcyksXG4gICAgW3J0bENsYXNzLCBncmlkVGhlbWVDbGFzcywgbGF5b3V0Q2xhc3NdXG4gICk7XG4gIGNvbnN0IHJvb3RXcmFwcGVyQm9keUNsYXNzZXMgPSB1c2VNZW1vMTEoXG4gICAgKCkgPT4gY2xhc3Nlc0xpc3QoXCJhZy1yb290LXdyYXBwZXItYm9keVwiLCBcImFnLWZvY3VzLW1hbmFnZWRcIiwgbGF5b3V0Q2xhc3MpLFxuICAgIFtsYXlvdXRDbGFzc11cbiAgKTtcbiAgY29uc3QgdG9wU3R5bGUgPSB1c2VNZW1vMTEoXG4gICAgKCkgPT4gKHtcbiAgICAgIHVzZXJTZWxlY3Q6IHVzZXJTZWxlY3QgIT0gbnVsbCA/IHVzZXJTZWxlY3QgOiBcIlwiLFxuICAgICAgV2Via2l0VXNlclNlbGVjdDogdXNlclNlbGVjdCAhPSBudWxsID8gdXNlclNlbGVjdCA6IFwiXCIsXG4gICAgICBjdXJzb3I6IGN1cnNvciAhPSBudWxsID8gY3Vyc29yIDogXCJcIlxuICAgIH0pLFxuICAgIFt1c2VyU2VsZWN0LCBjdXJzb3JdXG4gICk7XG4gIGNvbnN0IHNldFRhYkd1YXJkQ29tcFJlZiA9IHVzZUNhbGxiYWNrMTQoKHJlZikgPT4ge1xuICAgIHRhYkd1YXJkUmVmLmN1cnJlbnQgPSByZWY7XG4gICAgc2V0VGFiR3VhcmRSZWFkeShyZWYgIT09IG51bGwpO1xuICB9LCBbXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxNy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBzZXRSZWYyLCBjbGFzc05hbWU6IHJvb3RXcmFwcGVyQ2xhc3Nlcywgc3R5bGU6IHRvcFN0eWxlLCByb2xlOiBcInByZXNlbnRhdGlvblwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE3LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHJvb3RXcmFwcGVyQm9keUNsYXNzZXMsIHJlZjogc2V0R3JpZEJvZHlQYXJlbnQsIHJvbGU6IFwicHJlc2VudGF0aW9uXCIgfSwgaW5pdGlhbGlzZWQgJiYgZUdyaWRCb2R5UGFyZW50ICYmIGJlYW5zICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE3LmNyZWF0ZUVsZW1lbnQoQmVhbnNDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBiZWFucyB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxNy5jcmVhdGVFbGVtZW50KFxuICAgIHRhYkd1YXJkQ29tcF9kZWZhdWx0LFxuICAgIHtcbiAgICAgIHJlZjogc2V0VGFiR3VhcmRDb21wUmVmLFxuICAgICAgZUZvY3VzYWJsZUVsZW1lbnQ6IGVHcmlkQm9keVBhcmVudCxcbiAgICAgIG9uVGFiS2V5RG93bixcbiAgICAgIGdyaWRDdHJsOiBncmlkQ3RybFJlZi5jdXJyZW50LFxuICAgICAgZm9yY2VGb2N1c091dFdoZW5UYWJHdWFyZHNBcmVFbXB0eTogdHJ1ZVxuICAgIH0sXG4gICAgLy8gd2Ugd2FpdCBmb3IgaW5pdGlhbGlzZWQgYmVmb3JlIHJlbmRpbmcgdGhlIGNoaWxkcmVuLCBzbyBHcmlkQ29tcCBoYXMgY3JlYXRlZCBhbmQgcmVnaXN0ZXJlZCB3aXRoIGl0J3NcbiAgICAvLyBHcmlkQ3RybCBiZWZvcmUgd2UgY3JlYXRlIHRoZSBjaGlsZCBHcmlkQm9keUNvbXAuIE90aGVyd2lzZSB0aGUgR3JpZEJvZHlDb21wIHdvdWxkIGluaXRpYWxpc2UgZmlyc3QsXG4gICAgLy8gYmVmb3JlIHdlIGhhdmUgc2V0IHRoZSB0aGUgTGF5b3V0IENTUyBjbGFzc2VzLCBjYXVzaW5nIHRoZSBHcmlkQm9keUNvbXAgdG8gcmVuZGVyIHJvd3MgdG8gYSBncmlkIHRoYXRcbiAgICAvLyBkb2Vzbid0IGhhdmUgaXQncyBoZWlnaHQgc3BlY2lmaWVkLCB3aGljaCB3b3VsZCByZXN1bHQgaWYgYWxsIHRoZSByb3dzIGdldHRpbmcgcmVuZGVyZWQgKGFuZCBpZiBtYW55IHJvd3MsXG4gICAgLy8gaGFuZ3MgdGhlIFVJKVxuICAgIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE3LmNyZWF0ZUVsZW1lbnQoZ3JpZEJvZHlDb21wX2RlZmF1bHQsIG51bGwpXG4gICkpKSk7XG59O1xudmFyIGdyaWRDb21wX2RlZmF1bHQgPSBtZW1vMTQoR3JpZENvbXApO1xuXG4vLyBwYWNrYWdlcy9hZy1ncmlkLXJlYWN0L3NyYy9yZWFjdFVpL3JlbmRlclN0YXR1c1NlcnZpY2UudHN4XG5pbXBvcnQgeyBCZWFuU3R1YiB9IGZyb20gXCJhZy1ncmlkLWNvbW11bml0eVwiO1xudmFyIFJlbmRlclN0YXR1c1NlcnZpY2UgPSBjbGFzcyBleHRlbmRzIEJlYW5TdHViIHtcbiAgd2lyZUJlYW5zKGJlYW5zKSB7XG4gICAgdGhpcy5jdHJsc1NlcnZpY2UgPSBiZWFucy5jdHJsc1NlcnZpY2U7XG4gIH1cbiAgYXJlSGVhZGVyQ2VsbHNSZW5kZXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jdHJsc1NlcnZpY2UuZ2V0SGVhZGVyUm93Q29udGFpbmVyQ3RybHMoKS5ldmVyeSgoY29udGFpbmVyKSA9PiBjb250YWluZXIuZ2V0QWxsQ3RybHMoKS5ldmVyeSgoY3RybCkgPT4gY3RybC5hcmVDZWxsc1JlbmRlcmVkKCkpKTtcbiAgfVxufTtcblxuLy8gcGFja2FnZXMvYWctZ3JpZC1yZWFjdC9zcmMvcmVhY3RVaS9hZ0dyaWRSZWFjdFVpLnRzeFxudmFyIEFnR3JpZFJlYWN0VWkgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgYXBpUmVmID0gdXNlUmVmMTUoKTtcbiAgY29uc3QgZUd1aSA9IHVzZVJlZjE1KG51bGwpO1xuICBjb25zdCBwb3J0YWxNYW5hZ2VyID0gdXNlUmVmMTUobnVsbCk7XG4gIGNvbnN0IGRlc3Ryb3lGdW5jcyA9IHVzZVJlZjE1KFtdKTtcbiAgY29uc3Qgd2hlblJlYWR5RnVuY3MgPSB1c2VSZWYxNShbXSk7XG4gIGNvbnN0IHByZXZQcm9wcyA9IHVzZVJlZjE1KHByb3BzKTtcbiAgY29uc3QgZnJhbWV3b3JrT3ZlcnJpZGVzUmVmID0gdXNlUmVmMTUoKTtcbiAgY29uc3QgZ3JpZElkUmVmID0gdXNlUmVmMTUoKTtcbiAgY29uc3QgcmVhZHkgPSB1c2VSZWYxNShmYWxzZSk7XG4gIGNvbnN0IFtjb250ZXh0LCBzZXRDb250ZXh0XSA9IHVzZVN0YXRlMTYodm9pZCAwKTtcbiAgY29uc3QgWywgc2V0UG9ydGFsUmVmcmVzaGVyXSA9IHVzZVN0YXRlMTYoMCk7XG4gIGNvbnN0IHNldFJlZjIgPSB1c2VDYWxsYmFjazE1KChlUmVmKSA9PiB7XG4gICAgZUd1aS5jdXJyZW50ID0gZVJlZjtcbiAgICBpZiAoIWVSZWYpIHtcbiAgICAgIGRlc3Ryb3lGdW5jcy5jdXJyZW50LmZvckVhY2goKGYpID0+IGYoKSk7XG4gICAgICBkZXN0cm95RnVuY3MuY3VycmVudC5sZW5ndGggPSAwO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtb2R1bGVzID0gcHJvcHMubW9kdWxlcyB8fCBbXTtcbiAgICBpZiAoIXBvcnRhbE1hbmFnZXIuY3VycmVudCkge1xuICAgICAgcG9ydGFsTWFuYWdlci5jdXJyZW50ID0gbmV3IFBvcnRhbE1hbmFnZXIoXG4gICAgICAgICgpID0+IHNldFBvcnRhbFJlZnJlc2hlcigocHJldikgPT4gcHJldiArIDEpLFxuICAgICAgICBwcm9wcy5jb21wb25lbnRXcmFwcGluZ0VsZW1lbnQsXG4gICAgICAgIHByb3BzLm1heENvbXBvbmVudENyZWF0aW9uVGltZU1zXG4gICAgICApO1xuICAgICAgZGVzdHJveUZ1bmNzLmN1cnJlbnQucHVzaCgoKSA9PiB7XG4gICAgICAgIHBvcnRhbE1hbmFnZXIuY3VycmVudD8uZGVzdHJveSgpO1xuICAgICAgICBwb3J0YWxNYW5hZ2VyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG1lcmdlZEdyaWRPcHMgPSBfY29tYmluZUF0dHJpYnV0ZXNBbmRHcmlkT3B0aW9ucyhwcm9wcy5ncmlkT3B0aW9ucywgcHJvcHMpO1xuICAgIGNvbnN0IHByb2Nlc3NRdWV1ZWRVcGRhdGVzID0gKCkgPT4ge1xuICAgICAgaWYgKHJlYWR5LmN1cnJlbnQpIHtcbiAgICAgICAgY29uc3QgZ2V0Rm4gPSAoKSA9PiBmcmFtZXdvcmtPdmVycmlkZXNSZWYuY3VycmVudD8uc2hvdWxkUXVldWVVcGRhdGVzKCkgPyB2b2lkIDAgOiB3aGVuUmVhZHlGdW5jcy5jdXJyZW50LnNoaWZ0KCk7XG4gICAgICAgIGxldCBmbiA9IGdldEZuKCk7XG4gICAgICAgIHdoaWxlIChmbikge1xuICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgZm4gPSBnZXRGbigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBmcmFtZXdvcmtPdmVycmlkZXMgPSBuZXcgUmVhY3RGcmFtZXdvcmtPdmVycmlkZXMocHJvY2Vzc1F1ZXVlZFVwZGF0ZXMpO1xuICAgIGZyYW1ld29ya092ZXJyaWRlc1JlZi5jdXJyZW50ID0gZnJhbWV3b3JrT3ZlcnJpZGVzO1xuICAgIGNvbnN0IHJlbmRlclN0YXR1c1NlcnZpY2UgPSBuZXcgUmVuZGVyU3RhdHVzU2VydmljZSgpO1xuICAgIGNvbnN0IGdyaWRQYXJhbXMgPSB7XG4gICAgICBwcm92aWRlZEJlYW5JbnN0YW5jZXM6IHtcbiAgICAgICAgZnJhbWV3b3JrQ29tcG9uZW50V3JhcHBlcjogbmV3IFJlYWN0RnJhbWV3b3JrQ29tcG9uZW50V3JhcHBlcihcbiAgICAgICAgICBwb3J0YWxNYW5hZ2VyLmN1cnJlbnQsXG4gICAgICAgICAgbWVyZ2VkR3JpZE9wcy5yZWFjdGl2ZUN1c3RvbUNvbXBvbmVudHMgPz8gX2dldEdsb2JhbEdyaWRPcHRpb24oXCJyZWFjdGl2ZUN1c3RvbUNvbXBvbmVudHNcIikgPz8gdHJ1ZVxuICAgICAgICApLFxuICAgICAgICByZW5kZXJTdGF0dXNTZXJ2aWNlXG4gICAgICB9LFxuICAgICAgbW9kdWxlcyxcbiAgICAgIGZyYW1ld29ya092ZXJyaWRlc1xuICAgIH07XG4gICAgY29uc3QgY3JlYXRlVWlDYWxsYmFjayA9IChjb250ZXh0MikgPT4ge1xuICAgICAgc2V0Q29udGV4dChjb250ZXh0Mik7XG4gICAgICBjb250ZXh0Mi5jcmVhdGVCZWFuKHJlbmRlclN0YXR1c1NlcnZpY2UpO1xuICAgICAgZGVzdHJveUZ1bmNzLmN1cnJlbnQucHVzaCgoKSA9PiB7XG4gICAgICAgIGNvbnRleHQyLmRlc3Ryb3koKTtcbiAgICAgIH0pO1xuICAgICAgY29udGV4dDIuZ2V0QmVhbihcImN0cmxzU2VydmljZVwiKS53aGVuUmVhZHkoXG4gICAgICAgIHtcbiAgICAgICAgICBhZGREZXN0cm95RnVuYzogKGZ1bmMpID0+IHtcbiAgICAgICAgICAgIGRlc3Ryb3lGdW5jcy5jdXJyZW50LnB1c2goZnVuYyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgaWYgKGNvbnRleHQyLmlzRGVzdHJveWVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgYXBpID0gYXBpUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgaWYgKGFwaSkge1xuICAgICAgICAgICAgcHJvcHMuc2V0R3JpZEFwaT8uKGFwaSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH07XG4gICAgY29uc3QgYWNjZXB0Q2hhbmdlc0NhbGxiYWNrID0gKGNvbnRleHQyKSA9PiB7XG4gICAgICBjb250ZXh0Mi5nZXRCZWFuKFwiY3RybHNTZXJ2aWNlXCIpLndoZW5SZWFkeShcbiAgICAgICAge1xuICAgICAgICAgIGFkZERlc3Ryb3lGdW5jOiAoZnVuYykgPT4ge1xuICAgICAgICAgICAgZGVzdHJveUZ1bmNzLmN1cnJlbnQucHVzaChmdW5jKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB3aGVuUmVhZHlGdW5jcy5jdXJyZW50LmZvckVhY2goKGYpID0+IGYoKSk7XG4gICAgICAgICAgd2hlblJlYWR5RnVuY3MuY3VycmVudC5sZW5ndGggPSAwO1xuICAgICAgICAgIHJlYWR5LmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH07XG4gICAgY29uc3QgZ3JpZENvcmVDcmVhdG9yID0gbmV3IEdyaWRDb3JlQ3JlYXRvcigpO1xuICAgIG1lcmdlZEdyaWRPcHMuZ3JpZElkID8/IChtZXJnZWRHcmlkT3BzLmdyaWRJZCA9IGdyaWRJZFJlZi5jdXJyZW50KTtcbiAgICBhcGlSZWYuY3VycmVudCA9IGdyaWRDb3JlQ3JlYXRvci5jcmVhdGUoXG4gICAgICBlUmVmLFxuICAgICAgbWVyZ2VkR3JpZE9wcyxcbiAgICAgIGNyZWF0ZVVpQ2FsbGJhY2ssXG4gICAgICBhY2NlcHRDaGFuZ2VzQ2FsbGJhY2ssXG4gICAgICBncmlkUGFyYW1zXG4gICAgKTtcbiAgICBkZXN0cm95RnVuY3MuY3VycmVudC5wdXNoKCgpID0+IHtcbiAgICAgIGFwaVJlZi5jdXJyZW50ID0gdm9pZCAwO1xuICAgIH0pO1xuICAgIGlmIChhcGlSZWYuY3VycmVudCkge1xuICAgICAgZ3JpZElkUmVmLmN1cnJlbnQgPSBhcGlSZWYuY3VycmVudC5nZXRHcmlkSWQoKTtcbiAgICB9XG4gIH0sIFtdKTtcbiAgY29uc3Qgc3R5bGUgPSB1c2VNZW1vMTIoKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgICAgLi4ucHJvcHMuY29udGFpbmVyU3R5bGUgfHwge31cbiAgICB9O1xuICB9LCBbcHJvcHMuY29udGFpbmVyU3R5bGVdKTtcbiAgY29uc3QgcHJvY2Vzc1doZW5SZWFkeSA9IHVzZUNhbGxiYWNrMTUoKGZ1bmMpID0+IHtcbiAgICBpZiAocmVhZHkuY3VycmVudCAmJiAhZnJhbWV3b3JrT3ZlcnJpZGVzUmVmLmN1cnJlbnQ/LnNob3VsZFF1ZXVlVXBkYXRlcygpKSB7XG4gICAgICBmdW5jKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoZW5SZWFkeUZ1bmNzLmN1cnJlbnQucHVzaChmdW5jKTtcbiAgICB9XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0OSgoKSA9PiB7XG4gICAgY29uc3QgY2hhbmdlcyA9IGV4dHJhY3RHcmlkUHJvcGVydHlDaGFuZ2VzKHByZXZQcm9wcy5jdXJyZW50LCBwcm9wcyk7XG4gICAgcHJldlByb3BzLmN1cnJlbnQgPSBwcm9wcztcbiAgICBwcm9jZXNzV2hlblJlYWR5KCgpID0+IHtcbiAgICAgIGlmIChhcGlSZWYuY3VycmVudCkge1xuICAgICAgICBfcHJvY2Vzc09uQ2hhbmdlKGNoYW5nZXMsIGFwaVJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW3Byb3BzXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGUsIGNsYXNzTmFtZTogcHJvcHMuY2xhc3NOYW1lLCByZWY6IHNldFJlZjIgfSwgY29udGV4dCAmJiAhY29udGV4dC5pc0Rlc3Ryb3llZCgpID8gLyogQF9fUFVSRV9fICovIFJlYWN0MTguY3JlYXRlRWxlbWVudChncmlkQ29tcF9kZWZhdWx0LCB7IGNvbnRleHQgfSkgOiBudWxsLCBwb3J0YWxNYW5hZ2VyLmN1cnJlbnQ/LmdldFBvcnRhbHMoKSA/PyBudWxsKTtcbn07XG5mdW5jdGlvbiBleHRyYWN0R3JpZFByb3BlcnR5Q2hhbmdlcyhwcmV2UHJvcHMsIG5leHRQcm9wcykge1xuICBjb25zdCBjaGFuZ2VzID0ge307XG4gIE9iamVjdC5rZXlzKG5leHRQcm9wcykuZm9yRWFjaCgocHJvcEtleSkgPT4ge1xuICAgIGNvbnN0IHByb3BWYWx1ZSA9IG5leHRQcm9wc1twcm9wS2V5XTtcbiAgICBpZiAocHJldlByb3BzW3Byb3BLZXldICE9PSBwcm9wVmFsdWUpIHtcbiAgICAgIGNoYW5nZXNbcHJvcEtleV0gPSBwcm9wVmFsdWU7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGNoYW5nZXM7XG59XG52YXIgUmVhY3RGcmFtZXdvcmtDb21wb25lbnRXcmFwcGVyID0gY2xhc3MgZXh0ZW5kcyBCYXNlQ29tcG9uZW50V3JhcHBlciB7XG4gIGNvbnN0cnVjdG9yKHBhcmVudCwgcmVhY3RpdmVDdXN0b21Db21wb25lbnRzKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICB0aGlzLnJlYWN0aXZlQ3VzdG9tQ29tcG9uZW50cyA9IHJlYWN0aXZlQ3VzdG9tQ29tcG9uZW50cztcbiAgfVxuICBjcmVhdGVXcmFwcGVyKFVzZXJSZWFjdENvbXBvbmVudCwgY29tcG9uZW50VHlwZSkge1xuICAgIGlmICh0aGlzLnJlYWN0aXZlQ3VzdG9tQ29tcG9uZW50cykge1xuICAgICAgY29uc3QgZ2V0Q29tcG9uZW50Q2xhc3MgPSAocHJvcGVydHlOYW1lKSA9PiB7XG4gICAgICAgIHN3aXRjaCAocHJvcGVydHlOYW1lKSB7XG4gICAgICAgICAgY2FzZSBcImZpbHRlclwiOlxuICAgICAgICAgICAgcmV0dXJuIEZpbHRlckNvbXBvbmVudFdyYXBwZXI7XG4gICAgICAgICAgY2FzZSBcImZsb2F0aW5nRmlsdGVyQ29tcG9uZW50XCI6XG4gICAgICAgICAgICByZXR1cm4gRmxvYXRpbmdGaWx0ZXJDb21wb25lbnRXcmFwcGVyO1xuICAgICAgICAgIGNhc2UgXCJkYXRlQ29tcG9uZW50XCI6XG4gICAgICAgICAgICByZXR1cm4gRGF0ZUNvbXBvbmVudFdyYXBwZXI7XG4gICAgICAgICAgY2FzZSBcImRyYWdBbmREcm9wSW1hZ2VDb21wb25lbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBEcmFnQW5kRHJvcEltYWdlQ29tcG9uZW50V3JhcHBlcjtcbiAgICAgICAgICBjYXNlIFwibG9hZGluZ092ZXJsYXlDb21wb25lbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBMb2FkaW5nT3ZlcmxheUNvbXBvbmVudFdyYXBwZXI7XG4gICAgICAgICAgY2FzZSBcIm5vUm93c092ZXJsYXlDb21wb25lbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBOb1Jvd3NPdmVybGF5Q29tcG9uZW50V3JhcHBlcjtcbiAgICAgICAgICBjYXNlIFwic3RhdHVzUGFuZWxcIjpcbiAgICAgICAgICAgIHJldHVybiBTdGF0dXNQYW5lbENvbXBvbmVudFdyYXBwZXI7XG4gICAgICAgICAgY2FzZSBcInRvb2xQYW5lbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFRvb2xQYW5lbENvbXBvbmVudFdyYXBwZXI7XG4gICAgICAgICAgY2FzZSBcIm1lbnVJdGVtXCI6XG4gICAgICAgICAgICByZXR1cm4gTWVudUl0ZW1Db21wb25lbnRXcmFwcGVyO1xuICAgICAgICAgIGNhc2UgXCJjZWxsUmVuZGVyZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBDZWxsUmVuZGVyZXJDb21wb25lbnRXcmFwcGVyO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29uc3QgQ29tcG9uZW50Q2xhc3MgPSBnZXRDb21wb25lbnRDbGFzcyhjb21wb25lbnRUeXBlLnByb3BlcnR5TmFtZSk7XG4gICAgICBpZiAoQ29tcG9uZW50Q2xhc3MpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb25lbnRDbGFzcyhVc2VyUmVhY3RDb21wb25lbnQsIHRoaXMucGFyZW50LCBjb21wb25lbnRUeXBlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChjb21wb25lbnRUeXBlLnByb3BlcnR5TmFtZSkge1xuICAgICAgICBjYXNlIFwiZmlsdGVyXCI6XG4gICAgICAgIGNhc2UgXCJmbG9hdGluZ0ZpbHRlckNvbXBvbmVudFwiOlxuICAgICAgICBjYXNlIFwiZGF0ZUNvbXBvbmVudFwiOlxuICAgICAgICBjYXNlIFwiZHJhZ0FuZERyb3BJbWFnZUNvbXBvbmVudFwiOlxuICAgICAgICBjYXNlIFwibG9hZGluZ092ZXJsYXlDb21wb25lbnRcIjpcbiAgICAgICAgY2FzZSBcIm5vUm93c092ZXJsYXlDb21wb25lbnRcIjpcbiAgICAgICAgY2FzZSBcInN0YXR1c1BhbmVsXCI6XG4gICAgICAgIGNhc2UgXCJ0b29sUGFuZWxcIjpcbiAgICAgICAgY2FzZSBcIm1lbnVJdGVtXCI6XG4gICAgICAgIGNhc2UgXCJjZWxsUmVuZGVyZXJcIjpcbiAgICAgICAgICB3YXJuUmVhY3RpdmVDdXN0b21Db21wb25lbnRzKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHN1cHByZXNzRmFsbGJhY2tNZXRob2RzID0gIWNvbXBvbmVudFR5cGUuY2VsbFJlbmRlcmVyICYmIGNvbXBvbmVudFR5cGUucHJvcGVydHlOYW1lICE9PSBcInRvb2xQYW5lbFwiO1xuICAgIHJldHVybiBuZXcgUmVhY3RDb21wb25lbnQoVXNlclJlYWN0Q29tcG9uZW50LCB0aGlzLnBhcmVudCwgY29tcG9uZW50VHlwZSwgc3VwcHJlc3NGYWxsYmFja01ldGhvZHMpO1xuICB9XG59O1xudmFyIERldGFpbENlbGxSZW5kZXJlciA9IGZvcndhcmRSZWYzKChwcm9wcywgcmVmKSA9PiB7XG4gIGNvbnN0IHsgY3RybHNGYWN0b3J5LCBjb250ZXh0LCBnb3MsIHJlc2l6ZU9ic2VydmVyU2VydmljZSwgcm93TW9kZWwgfSA9IHVzZUNvbnRleHQxNShCZWFuc0NvbnRleHQpO1xuICBjb25zdCBbY3NzQ2xhc3Nlcywgc2V0Q3NzQ2xhc3Nlc10gPSB1c2VTdGF0ZTE2KCgpID0+IG5ldyBDc3NDbGFzc2VzKCkpO1xuICBjb25zdCBbZ3JpZENzc0NsYXNzZXMsIHNldEdyaWRDc3NDbGFzc2VzXSA9IHVzZVN0YXRlMTYoKCkgPT4gbmV3IENzc0NsYXNzZXMoKSk7XG4gIGNvbnN0IFtkZXRhaWxHcmlkT3B0aW9ucywgc2V0RGV0YWlsR3JpZE9wdGlvbnNdID0gdXNlU3RhdGUxNigpO1xuICBjb25zdCBbZGV0YWlsUm93RGF0YSwgc2V0RGV0YWlsUm93RGF0YV0gPSB1c2VTdGF0ZTE2KCk7XG4gIGNvbnN0IGN0cmxSZWYgPSB1c2VSZWYxNSgpO1xuICBjb25zdCBlR3VpUmVmID0gdXNlUmVmMTUobnVsbCk7XG4gIGNvbnN0IHJlc2l6ZU9ic2VydmVyRGVzdHJveUZ1bmMgPSB1c2VSZWYxNSgpO1xuICBjb25zdCBwYXJlbnRNb2R1bGVzID0gdXNlTWVtbzEyKCgpID0+IE1vZHVsZVJlZ2lzdHJ5Ll9fZ2V0R3JpZFJlZ2lzdGVyZWRNb2R1bGVzKHByb3BzLmFwaS5nZXRHcmlkSWQoKSksIFtwcm9wc10pO1xuICBjb25zdCB0b3BDbGFzc05hbWUgPSB1c2VNZW1vMTIoKCkgPT4gY3NzQ2xhc3Nlcy50b1N0cmluZygpICsgXCIgYWctZGV0YWlscy1yb3dcIiwgW2Nzc0NsYXNzZXNdKTtcbiAgY29uc3QgZ3JpZENsYXNzTmFtZSA9IHVzZU1lbW8xMigoKSA9PiBncmlkQ3NzQ2xhc3Nlcy50b1N0cmluZygpICsgXCIgYWctZGV0YWlscy1ncmlkXCIsIFtncmlkQ3NzQ2xhc3Nlc10pO1xuICBpZiAocmVmKSB7XG4gICAgdXNlSW1wZXJhdGl2ZUhhbmRsZTMocmVmLCAoKSA9PiAoe1xuICAgICAgcmVmcmVzaCgpIHtcbiAgICAgICAgcmV0dXJuIGN0cmxSZWYuY3VycmVudD8ucmVmcmVzaCgpID8/IGZhbHNlO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfVxuICBpZiAocHJvcHMudGVtcGxhdGUpIHtcbiAgICBfd2Fybk9uY2UzKFxuICAgICAgXCJkZXRhaWxDZWxsUmVuZGVyZXJQYXJhbXMudGVtcGxhdGUgaXMgbm90IHN1cHBvcnRlZCBieSBBRyBHcmlkIFJlYWN0LiBUbyBjaGFuZ2UgdGhlIHRlbXBsYXRlLCBwcm92aWRlIGEgQ3VzdG9tIERldGFpbCBDZWxsIFJlbmRlcmVyLiBTZWUgaHR0cHM6Ly9hZy1ncmlkLmNvbS9yZWFjdC1kYXRhLWdyaWQvbWFzdGVyLWRldGFpbC1jdXN0b20tZGV0YWlsL1wiXG4gICAgKTtcbiAgfVxuICBjb25zdCBzZXRSZWYyID0gdXNlQ2FsbGJhY2sxNSgoZVJlZikgPT4ge1xuICAgIGVHdWlSZWYuY3VycmVudCA9IGVSZWY7XG4gICAgaWYgKCFlUmVmKSB7XG4gICAgICBjdHJsUmVmLmN1cnJlbnQgPSBjb250ZXh0LmRlc3Ryb3lCZWFuKGN0cmxSZWYuY3VycmVudCk7XG4gICAgICByZXNpemVPYnNlcnZlckRlc3Ryb3lGdW5jLmN1cnJlbnQ/LigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb21wUHJveHkgPSB7XG4gICAgICBhZGRPclJlbW92ZUNzc0NsYXNzOiAobmFtZSwgb24pID0+IHNldENzc0NsYXNzZXMoKHByZXYpID0+IHByZXYuc2V0Q2xhc3MobmFtZSwgb24pKSxcbiAgICAgIGFkZE9yUmVtb3ZlRGV0YWlsR3JpZENzc0NsYXNzOiAobmFtZSwgb24pID0+IHNldEdyaWRDc3NDbGFzc2VzKChwcmV2KSA9PiBwcmV2LnNldENsYXNzKG5hbWUsIG9uKSksXG4gICAgICBzZXREZXRhaWxHcmlkOiAoZ3JpZE9wdGlvbnMpID0+IHNldERldGFpbEdyaWRPcHRpb25zKGdyaWRPcHRpb25zKSxcbiAgICAgIHNldFJvd0RhdGE6IChyb3dEYXRhKSA9PiBzZXREZXRhaWxSb3dEYXRhKHJvd0RhdGEpLFxuICAgICAgZ2V0R3VpOiAoKSA9PiBlR3VpUmVmLmN1cnJlbnRcbiAgICB9O1xuICAgIGNvbnN0IGN0cmwgPSBjdHJsc0ZhY3RvcnkuZ2V0SW5zdGFuY2UoXCJkZXRhaWxDZWxsUmVuZGVyZXJcIik7XG4gICAgaWYgKCFjdHJsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnRleHQuY3JlYXRlQmVhbihjdHJsKTtcbiAgICBjdHJsLmluaXQoY29tcFByb3h5LCBwcm9wcyk7XG4gICAgY3RybFJlZi5jdXJyZW50ID0gY3RybDtcbiAgICBpZiAoZ29zLmdldChcImRldGFpbFJvd0F1dG9IZWlnaHRcIikpIHtcbiAgICAgIGNvbnN0IGNoZWNrUm93U2l6ZUZ1bmMgPSAoKSA9PiB7XG4gICAgICAgIGlmIChlR3VpUmVmLmN1cnJlbnQgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbGllbnRIZWlnaHQgPSBlR3VpUmVmLmN1cnJlbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgICBpZiAoY2xpZW50SGVpZ2h0ICE9IG51bGwgJiYgY2xpZW50SGVpZ2h0ID4gMCkge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZVJvd0hlaWdodEZ1bmMgPSAoKSA9PiB7XG4gICAgICAgICAgICBwcm9wcy5ub2RlLnNldFJvd0hlaWdodChjbGllbnRIZWlnaHQpO1xuICAgICAgICAgICAgaWYgKF9pc0NsaWVudFNpZGVSb3dNb2RlbChnb3MpIHx8IF9pc1NlcnZlclNpZGVSb3dNb2RlbChnb3MpKSB7XG4gICAgICAgICAgICAgIHJvd01vZGVsLm9uUm93SGVpZ2h0Q2hhbmdlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgc2V0VGltZW91dCh1cGRhdGVSb3dIZWlnaHRGdW5jLCAwKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHJlc2l6ZU9ic2VydmVyRGVzdHJveUZ1bmMuY3VycmVudCA9IHJlc2l6ZU9ic2VydmVyU2VydmljZS5vYnNlcnZlUmVzaXplKGVSZWYsIGNoZWNrUm93U2l6ZUZ1bmMpO1xuICAgICAgY2hlY2tSb3dTaXplRnVuYygpO1xuICAgIH1cbiAgfSwgW10pO1xuICBjb25zdCBzZXRHcmlkQXBpID0gdXNlQ2FsbGJhY2sxNSgoYXBpKSA9PiB7XG4gICAgY3RybFJlZi5jdXJyZW50Py5yZWdpc3RlckRldGFpbFdpdGhNYXN0ZXIoYXBpKTtcbiAgfSwgW10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTguY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogdG9wQ2xhc3NOYW1lLCByZWY6IHNldFJlZjIgfSwgZGV0YWlsR3JpZE9wdGlvbnMgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTguY3JlYXRlRWxlbWVudChcbiAgICBBZ0dyaWRSZWFjdFVpLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogZ3JpZENsYXNzTmFtZSxcbiAgICAgIC4uLmRldGFpbEdyaWRPcHRpb25zLFxuICAgICAgbW9kdWxlczogcGFyZW50TW9kdWxlcyxcbiAgICAgIHJvd0RhdGE6IGRldGFpbFJvd0RhdGEsXG4gICAgICBzZXRHcmlkQXBpXG4gICAgfVxuICApKTtcbn0pO1xudmFyIFJlYWN0RnJhbWV3b3JrT3ZlcnJpZGVzID0gY2xhc3MgZXh0ZW5kcyBWYW5pbGxhRnJhbWV3b3JrT3ZlcnJpZGVzIHtcbiAgY29uc3RydWN0b3IocHJvY2Vzc1F1ZXVlZFVwZGF0ZXMpIHtcbiAgICBzdXBlcihcInJlYWN0XCIpO1xuICAgIHRoaXMucHJvY2Vzc1F1ZXVlZFVwZGF0ZXMgPSBwcm9jZXNzUXVldWVkVXBkYXRlcztcbiAgICB0aGlzLnF1ZXVlVXBkYXRlcyA9IGZhbHNlO1xuICAgIHRoaXMuZnJhbWV3b3JrQ29tcG9uZW50cyA9IHtcbiAgICAgIGFnR3JvdXBDZWxsUmVuZGVyZXI6IGdyb3VwQ2VsbFJlbmRlcmVyX2RlZmF1bHQsXG4gICAgICBhZ0dyb3VwUm93UmVuZGVyZXI6IGdyb3VwQ2VsbFJlbmRlcmVyX2RlZmF1bHQsXG4gICAgICBhZ0RldGFpbENlbGxSZW5kZXJlcjogRGV0YWlsQ2VsbFJlbmRlcmVyXG4gICAgfTtcbiAgICB0aGlzLndyYXBJbmNvbWluZyA9IChjYWxsYmFjaywgc291cmNlKSA9PiB7XG4gICAgICBpZiAoc291cmNlID09PSBcImVuc3VyZVZpc2libGVcIikge1xuICAgICAgICByZXR1cm4gcnVuV2l0aG91dEZsdXNoU3luYyhjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICB9O1xuICAgIHRoaXMucmVuZGVyaW5nRW5naW5lID0gXCJyZWFjdFwiO1xuICB9XG4gIGZyYW1ld29ya0NvbXBvbmVudChuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuZnJhbWV3b3JrQ29tcG9uZW50c1tuYW1lXTtcbiAgfVxuICBpc0ZyYW1ld29ya0NvbXBvbmVudChjb21wKSB7XG4gICAgaWYgKCFjb21wKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHByb3RvdHlwZSA9IGNvbXAucHJvdG90eXBlO1xuICAgIGNvbnN0IGlzSnNDb21wID0gcHJvdG90eXBlICYmIFwiZ2V0R3VpXCIgaW4gcHJvdG90eXBlO1xuICAgIHJldHVybiAhaXNKc0NvbXA7XG4gIH1cbiAgZ2V0TG9ja09uUmVmcmVzaCgpIHtcbiAgICB0aGlzLnF1ZXVlVXBkYXRlcyA9IHRydWU7XG4gIH1cbiAgcmVsZWFzZUxvY2tPblJlZnJlc2goKSB7XG4gICAgdGhpcy5xdWV1ZVVwZGF0ZXMgPSBmYWxzZTtcbiAgICB0aGlzLnByb2Nlc3NRdWV1ZWRVcGRhdGVzKCk7XG4gIH1cbiAgc2hvdWxkUXVldWVVcGRhdGVzKCkge1xuICAgIHJldHVybiB0aGlzLnF1ZXVlVXBkYXRlcztcbiAgfVxuICBydW5XaGVuUmVhZHlBc3luYygpIHtcbiAgICByZXR1cm4gaXNSZWFjdDE5KCk7XG4gIH1cbn07XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL2FnR3JpZFJlYWN0LnRzeFxudmFyIEFnR3JpZFJlYWN0ID0gY2xhc3MgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuYXBpTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5zZXRHcmlkQXBpID0gKGFwaSkgPT4ge1xuICAgICAgdGhpcy5hcGkgPSBhcGk7XG4gICAgICB0aGlzLmFwaUxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoYXBpKSk7XG4gICAgfTtcbiAgfVxuICByZWdpc3RlckFwaUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgdGhpcy5hcGlMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gIH1cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5hcGlMaXN0ZW5lcnMubGVuZ3RoID0gMDtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDE5LmNyZWF0ZUVsZW1lbnQoQWdHcmlkUmVhY3RVaSwgeyAuLi50aGlzLnByb3BzLCBzZXRHcmlkQXBpOiB0aGlzLnNldEdyaWRBcGkgfSk7XG4gIH1cbn07XG5cbi8vIHBhY2thZ2VzL2FnLWdyaWQtcmVhY3Qvc3JjL3NoYXJlZC9jdXN0b21Db21wL2ludGVyZmFjZXMudHNcbmltcG9ydCB7IHVzZUNvbnRleHQgYXMgdXNlQ29udGV4dDE2IH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VHcmlkQ3VzdG9tQ29tcG9uZW50KG1ldGhvZHMpIHtcbiAgY29uc3QgeyBzZXRNZXRob2RzIH0gPSB1c2VDb250ZXh0MTYoQ3VzdG9tQ29udGV4dCk7XG4gIHNldE1ldGhvZHMobWV0aG9kcyk7XG59XG5mdW5jdGlvbiB1c2VHcmlkQ2VsbEVkaXRvcihjYWxsYmFja3MpIHtcbiAgdXNlR3JpZEN1c3RvbUNvbXBvbmVudChjYWxsYmFja3MpO1xufVxuZnVuY3Rpb24gdXNlR3JpZERhdGUoY2FsbGJhY2tzKSB7XG4gIHJldHVybiB1c2VHcmlkQ3VzdG9tQ29tcG9uZW50KGNhbGxiYWNrcyk7XG59XG5mdW5jdGlvbiB1c2VHcmlkRmlsdGVyKGNhbGxiYWNrcykge1xuICByZXR1cm4gdXNlR3JpZEN1c3RvbUNvbXBvbmVudChjYWxsYmFja3MpO1xufVxuZnVuY3Rpb24gdXNlR3JpZEZsb2F0aW5nRmlsdGVyKGNhbGxiYWNrcykge1xuICB1c2VHcmlkQ3VzdG9tQ29tcG9uZW50KGNhbGxiYWNrcyk7XG59XG5mdW5jdGlvbiB1c2VHcmlkTWVudUl0ZW0oY2FsbGJhY2tzKSB7XG4gIHVzZUdyaWRDdXN0b21Db21wb25lbnQoY2FsbGJhY2tzKTtcbn1cbmV4cG9ydCB7XG4gIEFnR3JpZFJlYWN0LFxuICBDdXN0b21Db250ZXh0IGFzIEN1c3RvbUNvbXBvbmVudENvbnRleHQsXG4gIGdldEluc3RhbmNlLFxuICB1c2VHcmlkQ2VsbEVkaXRvcixcbiAgdXNlR3JpZERhdGUsXG4gIHVzZUdyaWRGaWx0ZXIsXG4gIHVzZUdyaWRGbG9hdGluZ0ZpbHRlcixcbiAgdXNlR3JpZE1lbnVJdGVtLFxuICB3YXJuUmVhY3RpdmVDdXN0b21Db21wb25lbnRzXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/ag-grid-react/dist/package/index.esm.mjs\n");

/***/ })

};
;